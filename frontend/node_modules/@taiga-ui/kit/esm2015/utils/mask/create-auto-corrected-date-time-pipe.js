import { DATE_FILLER_LENGTH, tuiIsString } from '@taiga-ui/cdk';
import { DATE_TIME_SEPARATOR } from '@taiga-ui/kit/constants';
import { tuiNormalizeDateValue, } from './create-auto-corrected-date-pipe';
import { tuiCreateAutoCorrectedTimePipe } from './create-auto-corrected-time-pipe';
export function tuiCreateAutoCorrectedDateTimePipe(configs) {
    const timePipe = tuiCreateAutoCorrectedTimePipe(configs.timeMode);
    return value => {
        if (value.length < DATE_FILLER_LENGTH) {
            return { value };
        }
        const [date, time] = value.split(DATE_TIME_SEPARATOR);
        const formattedDate = tuiNormalizeDateValue(date, configs);
        if (!time) {
            return { value: formattedDate };
        }
        const pipedTime = timePipe(time, {});
        if (!pipedTime || tuiIsString(pipedTime)) {
            return false;
        }
        return {
            value: `${formattedDate}${DATE_TIME_SEPARATOR}${pipedTime.value}`,
            indexesOfPipedChars: pipedTime.indexesOfPipedChars
                ? pipedTime.indexesOfPipedChars.map(i => i + date.length + 2)
                : undefined,
        };
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLWF1dG8tY29ycmVjdGVkLWRhdGUtdGltZS1waXBlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMva2l0L3V0aWxzL21hc2svY3JlYXRlLWF1dG8tY29ycmVjdGVkLWRhdGUtdGltZS1waXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQWMsTUFBTSxlQUFlLENBQUM7QUFNM0UsT0FBTyxFQUFDLG1CQUFtQixFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFFNUQsT0FBTyxFQUVILHFCQUFxQixHQUN4QixNQUFNLG1DQUFtQyxDQUFDO0FBQzNDLE9BQU8sRUFBQyw4QkFBOEIsRUFBQyxNQUFNLG1DQUFtQyxDQUFDO0FBTWpGLE1BQU0sVUFBVSxrQ0FBa0MsQ0FDOUMsT0FBNEM7SUFFNUMsTUFBTSxRQUFRLEdBQUcsOEJBQThCLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRWxFLE9BQU8sS0FBSyxDQUFDLEVBQUU7UUFDWCxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsa0JBQWtCLEVBQUU7WUFDbkMsT0FBTyxFQUFDLEtBQUssRUFBQyxDQUFDO1NBQ2xCO1FBRUQsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFFdEQsTUFBTSxhQUFhLEdBQUcscUJBQXFCLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBRTNELElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDUCxPQUFPLEVBQUMsS0FBSyxFQUFFLGFBQWEsRUFBQyxDQUFDO1NBQ2pDO1FBRUQsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUN0QixJQUFJLEVBQ0osRUFBdUQsQ0FDMUQsQ0FBQztRQUVGLElBQUksQ0FBQyxTQUFTLElBQUksV0FBVyxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3RDLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBRUQsT0FBTztZQUNILEtBQUssRUFBRSxHQUFHLGFBQWEsR0FBRyxtQkFBbUIsR0FBRyxTQUFTLENBQUMsS0FBSyxFQUFFO1lBQ2pFLG1CQUFtQixFQUFFLFNBQVMsQ0FBQyxtQkFBbUI7Z0JBQzlDLENBQUMsQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2dCQUM3RCxDQUFDLENBQUMsU0FBUztTQUNsQixDQUFDO0lBQ04sQ0FBQyxDQUFDO0FBQ04sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7REFURV9GSUxMRVJfTEVOR1RILCB0dWlJc1N0cmluZywgVHVpVGltZU1vZGV9IGZyb20gJ0B0YWlnYS11aS9jZGsnO1xuaW1wb3J0IHtcbiAgICBUdWlUZXh0TWFza0NvbmZpZyxcbiAgICBUdWlUZXh0TWFza09wdGlvbnMsXG4gICAgVHVpVGV4dE1hc2tQaXBlSGFuZGxlcixcbn0gZnJvbSAnQHRhaWdhLXVpL2NvcmUnO1xuaW1wb3J0IHtEQVRFX1RJTUVfU0VQQVJBVE9SfSBmcm9tICdAdGFpZ2EtdWkva2l0L2NvbnN0YW50cyc7XG5cbmltcG9ydCB7XG4gICAgVHVpQXV0b0NvcnJlY3RlZERhdGVQaXBlQ29uZmlncyxcbiAgICB0dWlOb3JtYWxpemVEYXRlVmFsdWUsXG59IGZyb20gJy4vY3JlYXRlLWF1dG8tY29ycmVjdGVkLWRhdGUtcGlwZSc7XG5pbXBvcnQge3R1aUNyZWF0ZUF1dG9Db3JyZWN0ZWRUaW1lUGlwZX0gZnJvbSAnLi9jcmVhdGUtYXV0by1jb3JyZWN0ZWQtdGltZS1waXBlJztcblxuaW50ZXJmYWNlIFR1aUF1dG9Db3JyZWN0ZWREYXRlVGltZVBpcGVDb25maWdzIGV4dGVuZHMgVHVpQXV0b0NvcnJlY3RlZERhdGVQaXBlQ29uZmlncyB7XG4gICAgdGltZU1vZGU6IFR1aVRpbWVNb2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHVpQ3JlYXRlQXV0b0NvcnJlY3RlZERhdGVUaW1lUGlwZShcbiAgICBjb25maWdzOiBUdWlBdXRvQ29ycmVjdGVkRGF0ZVRpbWVQaXBlQ29uZmlncyxcbik6IFR1aVRleHRNYXNrUGlwZUhhbmRsZXIge1xuICAgIGNvbnN0IHRpbWVQaXBlID0gdHVpQ3JlYXRlQXV0b0NvcnJlY3RlZFRpbWVQaXBlKGNvbmZpZ3MudGltZU1vZGUpO1xuXG4gICAgcmV0dXJuIHZhbHVlID0+IHtcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8IERBVEVfRklMTEVSX0xFTkdUSCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZX07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBbZGF0ZSwgdGltZV0gPSB2YWx1ZS5zcGxpdChEQVRFX1RJTUVfU0VQQVJBVE9SKTtcblxuICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gdHVpTm9ybWFsaXplRGF0ZVZhbHVlKGRhdGUsIGNvbmZpZ3MpO1xuXG4gICAgICAgIGlmICghdGltZSkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTogZm9ybWF0dGVkRGF0ZX07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwaXBlZFRpbWUgPSB0aW1lUGlwZShcbiAgICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgICB7fSBhcyB1bmtub3duIGFzIFR1aVRleHRNYXNrQ29uZmlnICYgVHVpVGV4dE1hc2tPcHRpb25zLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghcGlwZWRUaW1lIHx8IHR1aUlzU3RyaW5nKHBpcGVkVGltZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogYCR7Zm9ybWF0dGVkRGF0ZX0ke0RBVEVfVElNRV9TRVBBUkFUT1J9JHtwaXBlZFRpbWUudmFsdWV9YCxcbiAgICAgICAgICAgIGluZGV4ZXNPZlBpcGVkQ2hhcnM6IHBpcGVkVGltZS5pbmRleGVzT2ZQaXBlZENoYXJzXG4gICAgICAgICAgICAgICAgPyBwaXBlZFRpbWUuaW5kZXhlc09mUGlwZWRDaGFycy5tYXAoaSA9PiBpICsgZGF0ZS5sZW5ndGggKyAyKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH07XG59XG4iXX0=