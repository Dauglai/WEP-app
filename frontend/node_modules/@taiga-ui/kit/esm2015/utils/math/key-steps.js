import { tuiRound } from '@taiga-ui/cdk';
import { TUI_FLOATING_PRECISION } from '@taiga-ui/kit/constants';
function tuiFindKeyStepsBoundariesByFn(keySteps, fn) {
    const keyStepUpperIndex = keySteps.findIndex((keyStep, i) => i && fn(keyStep));
    const lowerStep = keySteps[keyStepUpperIndex - 1];
    const upperStep = keySteps[keyStepUpperIndex];
    return [lowerStep, upperStep];
}
export function tuiPercentageToKeyStepValue(valuePercentage, keySteps) {
    const [[lowerStepPercent, lowerStepValue], [upperStepPercent, upperStepValue]] = tuiFindKeyStepsBoundariesByFn(keySteps, ([keyStepPercentage, _]) => valuePercentage <= keyStepPercentage);
    const ratio = (valuePercentage - lowerStepPercent) / (upperStepPercent - lowerStepPercent);
    const controlValue = (upperStepValue - lowerStepValue) * ratio + lowerStepValue;
    return tuiRound(controlValue, TUI_FLOATING_PRECISION);
}
export function tuiKeyStepValueToPercentage(value, keySteps) {
    const [[lowerStepPercent, lowerStepValue], [upperStepPercent, upperStepValue]] = tuiFindKeyStepsBoundariesByFn(keySteps, ([_, keyStepValue]) => value <= keyStepValue);
    const ratio = (value - lowerStepValue) / (upperStepValue - lowerStepValue) || 0;
    return (upperStepPercent - lowerStepPercent) * ratio + lowerStepPercent;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2V5LXN0ZXBzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMva2l0L3V0aWxzL21hdGgva2V5LXN0ZXBzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDdkMsT0FBTyxFQUFDLHNCQUFzQixFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFHL0QsU0FBUyw2QkFBNkIsQ0FDbEMsUUFBcUIsRUFDckIsRUFBaUU7SUFFakUsTUFBTSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQy9FLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxpQkFBaUIsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNsRCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUU5QyxPQUFPLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ2xDLENBQUM7QUFFRCxNQUFNLFVBQVUsMkJBQTJCLENBQ3ZDLGVBQXVCLEVBQ3ZCLFFBQXFCO0lBRXJCLE1BQU0sQ0FBQyxDQUFDLGdCQUFnQixFQUFFLGNBQWMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsY0FBYyxDQUFDLENBQUMsR0FDMUUsNkJBQTZCLENBQ3pCLFFBQVEsRUFDUixDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsSUFBSSxpQkFBaUIsQ0FDbkUsQ0FBQztJQUNOLE1BQU0sS0FBSyxHQUNQLENBQUMsZUFBZSxHQUFHLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ2pGLE1BQU0sWUFBWSxHQUFHLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQyxHQUFHLEtBQUssR0FBRyxjQUFjLENBQUM7SUFFaEYsT0FBTyxRQUFRLENBQUMsWUFBWSxFQUFFLHNCQUFzQixDQUFDLENBQUM7QUFDMUQsQ0FBQztBQUVELE1BQU0sVUFBVSwyQkFBMkIsQ0FDdkMsS0FBYSxFQUNiLFFBQXFCO0lBRXJCLE1BQU0sQ0FBQyxDQUFDLGdCQUFnQixFQUFFLGNBQWMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsY0FBYyxDQUFDLENBQUMsR0FDMUUsNkJBQTZCLENBQ3pCLFFBQVEsRUFDUixDQUFDLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLElBQUksWUFBWSxDQUMvQyxDQUFDO0lBQ04sTUFBTSxLQUFLLEdBQUcsQ0FBQyxLQUFLLEdBQUcsY0FBYyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRWhGLE9BQU8sQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQyxHQUFHLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQztBQUM1RSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt0dWlSb3VuZH0gZnJvbSAnQHRhaWdhLXVpL2Nkayc7XG5pbXBvcnQge1RVSV9GTE9BVElOR19QUkVDSVNJT059IGZyb20gJ0B0YWlnYS11aS9raXQvY29uc3RhbnRzJztcbmltcG9ydCB7VHVpS2V5U3RlcHN9IGZyb20gJ0B0YWlnYS11aS9raXQvdHlwZXMnO1xuXG5mdW5jdGlvbiB0dWlGaW5kS2V5U3RlcHNCb3VuZGFyaWVzQnlGbihcbiAgICBrZXlTdGVwczogVHVpS2V5U3RlcHMsXG4gICAgZm46IChba2V5U3RlcFBlcmNlbnQsIGtleVN0ZXBWYWx1ZV06IFtudW1iZXIsIG51bWJlcl0pID0+IGJvb2xlYW4sXG4pOiBbW251bWJlciwgbnVtYmVyXSwgW251bWJlciwgbnVtYmVyXV0ge1xuICAgIGNvbnN0IGtleVN0ZXBVcHBlckluZGV4ID0ga2V5U3RlcHMuZmluZEluZGV4KChrZXlTdGVwLCBpKSA9PiBpICYmIGZuKGtleVN0ZXApKTtcbiAgICBjb25zdCBsb3dlclN0ZXAgPSBrZXlTdGVwc1trZXlTdGVwVXBwZXJJbmRleCAtIDFdO1xuICAgIGNvbnN0IHVwcGVyU3RlcCA9IGtleVN0ZXBzW2tleVN0ZXBVcHBlckluZGV4XTtcblxuICAgIHJldHVybiBbbG93ZXJTdGVwLCB1cHBlclN0ZXBdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHVpUGVyY2VudGFnZVRvS2V5U3RlcFZhbHVlKFxuICAgIHZhbHVlUGVyY2VudGFnZTogbnVtYmVyLFxuICAgIGtleVN0ZXBzOiBUdWlLZXlTdGVwcyxcbik6IG51bWJlciB7XG4gICAgY29uc3QgW1tsb3dlclN0ZXBQZXJjZW50LCBsb3dlclN0ZXBWYWx1ZV0sIFt1cHBlclN0ZXBQZXJjZW50LCB1cHBlclN0ZXBWYWx1ZV1dID1cbiAgICAgICAgdHVpRmluZEtleVN0ZXBzQm91bmRhcmllc0J5Rm4oXG4gICAgICAgICAgICBrZXlTdGVwcyxcbiAgICAgICAgICAgIChba2V5U3RlcFBlcmNlbnRhZ2UsIF9dKSA9PiB2YWx1ZVBlcmNlbnRhZ2UgPD0ga2V5U3RlcFBlcmNlbnRhZ2UsXG4gICAgICAgICk7XG4gICAgY29uc3QgcmF0aW8gPVxuICAgICAgICAodmFsdWVQZXJjZW50YWdlIC0gbG93ZXJTdGVwUGVyY2VudCkgLyAodXBwZXJTdGVwUGVyY2VudCAtIGxvd2VyU3RlcFBlcmNlbnQpO1xuICAgIGNvbnN0IGNvbnRyb2xWYWx1ZSA9ICh1cHBlclN0ZXBWYWx1ZSAtIGxvd2VyU3RlcFZhbHVlKSAqIHJhdGlvICsgbG93ZXJTdGVwVmFsdWU7XG5cbiAgICByZXR1cm4gdHVpUm91bmQoY29udHJvbFZhbHVlLCBUVUlfRkxPQVRJTkdfUFJFQ0lTSU9OKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHR1aUtleVN0ZXBWYWx1ZVRvUGVyY2VudGFnZShcbiAgICB2YWx1ZTogbnVtYmVyLFxuICAgIGtleVN0ZXBzOiBUdWlLZXlTdGVwcyxcbik6IG51bWJlciB7XG4gICAgY29uc3QgW1tsb3dlclN0ZXBQZXJjZW50LCBsb3dlclN0ZXBWYWx1ZV0sIFt1cHBlclN0ZXBQZXJjZW50LCB1cHBlclN0ZXBWYWx1ZV1dID1cbiAgICAgICAgdHVpRmluZEtleVN0ZXBzQm91bmRhcmllc0J5Rm4oXG4gICAgICAgICAgICBrZXlTdGVwcyxcbiAgICAgICAgICAgIChbXywga2V5U3RlcFZhbHVlXSkgPT4gdmFsdWUgPD0ga2V5U3RlcFZhbHVlLFxuICAgICAgICApO1xuICAgIGNvbnN0IHJhdGlvID0gKHZhbHVlIC0gbG93ZXJTdGVwVmFsdWUpIC8gKHVwcGVyU3RlcFZhbHVlIC0gbG93ZXJTdGVwVmFsdWUpIHx8IDA7XG5cbiAgICByZXR1cm4gKHVwcGVyU3RlcFBlcmNlbnQgLSBsb3dlclN0ZXBQZXJjZW50KSAqIHJhdGlvICsgbG93ZXJTdGVwUGVyY2VudDtcbn1cbiJdfQ==