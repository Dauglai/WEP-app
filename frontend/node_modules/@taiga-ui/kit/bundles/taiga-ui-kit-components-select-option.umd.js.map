{"version":3,"file":"taiga-ui-kit-components-select-option.umd.js","sources":["../../../projects/kit/components/select-option/select-option.component.ts","../../../projects/kit/components/select-option/select-option.template.html","../../../projects/kit/components/select-option/select-option.module.ts","../../../projects/kit/components/select-option/taiga-ui-kit-components-select-option.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    DoCheck,\n    ElementRef,\n    Inject,\n    OnInit,\n    Optional,\n    TemplateRef,\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {\n    AbstractTuiControl,\n    TUI_DEFAULT_IDENTITY_MATCHER,\n    TuiContextWithImplicit,\n    TuiIdentityMatcher,\n    tuiIsPresent,\n    tuiTypedFromEvent,\n} from '@taiga-ui/cdk';\nimport {\n    TUI_DATA_LIST_HOST,\n    TuiDataListComponent,\n    TuiDataListHost,\n    TuiOptionComponent,\n} from '@taiga-ui/core';\nimport {POLYMORPHEUS_CONTEXT, PolymorpheusComponent} from '@tinkoff/ng-polymorpheus';\nimport {EMPTY, merge, Subject} from 'rxjs';\nimport {distinctUntilChanged, map, startWith} from 'rxjs/operators';\n\n@Component({\n    selector: 'tui-select-option',\n    templateUrl: './select-option.template.html',\n    styleUrls: ['./select-option.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiSelectOptionComponent<T> implements OnInit, DoCheck {\n    private readonly changeDetection$ = new Subject();\n\n    readonly selected$ = merge(\n        this.changeDetection$,\n        this.control.valueChanges || EMPTY,\n        tuiTypedFromEvent(this.el.nativeElement, 'animationstart'),\n    ).pipe(\n        startWith(null),\n        map(() => this.selected),\n        distinctUntilChanged(),\n    );\n\n    constructor(\n        @Inject(POLYMORPHEUS_CONTEXT)\n        readonly context: TuiContextWithImplicit<TemplateRef<Record<string, unknown>>>,\n        @Inject(TUI_DATA_LIST_HOST)\n        private readonly host: TuiDataListHost<T>,\n        @Inject(ElementRef) private readonly el: ElementRef<HTMLElement>,\n        @Inject(TuiOptionComponent) protected readonly option: TuiOptionComponent<T>,\n        @Optional()\n        @Inject(TuiDataListComponent)\n        protected readonly dataList: TuiDataListComponent<T> | null,\n        @Inject(NgControl) protected readonly control: NgControl,\n        @Optional()\n        @Inject(AbstractTuiControl)\n        protected readonly abstractControl: AbstractTuiControl<T> | null,\n    ) {}\n\n    get matcher(): TuiIdentityMatcher<T> {\n        return this.host.identityMatcher || TUI_DEFAULT_IDENTITY_MATCHER;\n    }\n\n    ngDoCheck(): void {\n        this.changeDetection$.next();\n    }\n\n    ngOnInit(): void {\n        /**\n         * This would cause changes inside already checked parent component (during the same change detection cycle),\n         * and it might cause ExpressionChanged error due to potential HostBinding\n         * (for example, inside {@link https://github.com/angular/angular/blob/main/packages/forms/src/directives/ng_control_status.ts#L99 NgControlStatus}).\n         * Microtask keeps it in the same frame but allows change detection to run.\n         */\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        Promise.resolve().then(() => {\n            if (tuiIsPresent(this.option.value) && this.host.checkOption) {\n                this.host.checkOption(this.option.value);\n            }\n        });\n    }\n\n    protected get value(): T | null {\n        return this.abstractControl?.value ?? this.control.value;\n    }\n\n    protected get selected(): boolean {\n        return (\n            tuiIsPresent(this.option.value) &&\n            tuiIsPresent(this.value) &&\n            this.matcher(this.value, this.option.value)\n        );\n    }\n}\n\nexport const TUI_SELECT_OPTION = new PolymorpheusComponent(TuiSelectOptionComponent);\n","<ng-container [ngTemplateOutlet]=\"context.$implicit\"></ng-container>\n<tui-svg\n    *ngIf=\"selected$ | async; else dummy\"\n    automation-id=\"tui-select-option__checkmark\"\n    src=\"tuiIconCheckLarge\"\n    class=\"t-checkmark\"\n    [tuiScrollIntoView]=\"true\"\n></tui-svg>\n<ng-template #dummy>\n    <span class=\"t-dummy\"></span>\n</ng-template>\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiScrollIntoViewModule, TuiSvgModule} from '@taiga-ui/core';\n\nimport {TuiSelectOptionComponent} from './select-option.component';\n\n@NgModule({\n    imports: [CommonModule, TuiSvgModule, TuiScrollIntoViewModule],\n    declarations: [TuiSelectOptionComponent],\n    exports: [TuiSelectOptionComponent],\n})\nexport class TuiSelectOptionModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["Subject","merge","EMPTY","tuiTypedFromEvent","startWith","map","distinctUntilChanged","TUI_DEFAULT_IDENTITY_MATCHER","tuiIsPresent","i0","POLYMORPHEUS_CONTEXT","TUI_DATA_LIST_HOST","ElementRef","TuiOptionComponent","TuiDataListComponent","NgControl","AbstractTuiControl","i1","i2","Component","ChangeDetectionStrategy","Inject","Optional","PolymorpheusComponent","CommonModule","TuiSvgModule","TuiScrollIntoViewModule","NgModule"],"mappings":"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"}