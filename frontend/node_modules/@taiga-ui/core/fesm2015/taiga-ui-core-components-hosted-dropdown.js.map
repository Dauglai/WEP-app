{"version":3,"file":"taiga-ui-core-components-hosted-dropdown.js","sources":["../../../projects/core/components/hosted-dropdown/accessor-proxy.directive.ts","../../../projects/core/components/hosted-dropdown/hosted-dropdown-connector.directive.ts","../../../projects/core/components/hosted-dropdown/hosted-dropdown.component.ts","../../../projects/core/components/hosted-dropdown/hosted-dropdown.template.html","../../../projects/core/components/hosted-dropdown/hosted-dropdown.module.ts","../../../projects/core/components/hosted-dropdown/taiga-ui-core-components-hosted-dropdown.ts"],"sourcesContent":["import {Directive, Optional, SkipSelf} from '@angular/core';\nimport {TuiPositionAccessor} from '@taiga-ui/core/abstract';\nimport {TuiPoint} from '@taiga-ui/core/types';\n\n@Directive({\n    selector: '[tuiAccessorProxy]',\n    providers: [\n        {\n            provide: TuiPositionAccessor,\n            multi: true,\n            deps: [\n                [new Optional(), new SkipSelf(), TuiAccessorProxyDirective],\n                TuiAccessorProxyDirective,\n            ],\n            useFactory: (\n                accessor: TuiPositionAccessor | null,\n                fallback: TuiPositionAccessor,\n            ) => accessor || fallback,\n        },\n    ],\n})\nexport class TuiAccessorProxyDirective extends TuiPositionAccessor {\n    readonly type = 'dummy';\n\n    getPosition(): TuiPoint {\n        return [0, 0];\n    }\n}\n","import {Directive} from '@angular/core';\n\n@Directive({\n    selector: '[tuiHostedDropdownHost]',\n})\nexport class TuiHostedDropdownConnectorDirective {}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    Optional,\n    Output,\n    Self,\n    ViewChild,\n} from '@angular/core';\nimport {\n    TuiActiveZoneDirective,\n    tuiAsFocusableItemAccessor,\n    TuiContextWithImplicit,\n    tuiDefaultProp,\n    TuiFocusableElementAccessor,\n    tuiGetClosestFocusable,\n    tuiIsElement,\n    tuiIsElementEditable,\n    tuiIsHTMLElement,\n    tuiIsNativeFocusedIn,\n    tuiIsNativeKeyboardFocusable,\n    TuiNativeFocusableElement,\n} from '@taiga-ui/cdk';\nimport {TuiPositionAccessor} from '@taiga-ui/core/abstract';\nimport {\n    TuiDropdownDirective,\n    TuiDropdownHoverDirective,\n} from '@taiga-ui/core/directives/dropdown';\nimport {tuiIsEditingKey} from '@taiga-ui/core/utils/miscellaneous';\nimport {shouldCall} from '@tinkoff/ng-event-plugins';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {BehaviorSubject, EMPTY, merge} from 'rxjs';\nimport {distinctUntilChanged, skip} from 'rxjs/operators';\n\nimport {TuiAccessorProxyDirective} from './accessor-proxy.directive';\nimport {TuiHostedDropdownConnectorDirective} from './hosted-dropdown-connector.directive';\n\nexport interface TuiHostedDropdownContext\n    extends TuiContextWithImplicit<TuiActiveZoneDirective> {\n    close(): void;\n}\n\nfunction shouldClose(\n    this: TuiHostedDropdownComponent,\n    event: Event | KeyboardEvent,\n): boolean {\n    return (\n        'key' in event &&\n        event.key.toLowerCase() === 'escape' &&\n        this.canOpen &&\n        this.open &&\n        !this.dropdown?.nextElementSibling\n    );\n}\n\n/* eslint-disable @typescript-eslint/member-ordering */\n@Component({\n    selector: 'tui-hosted-dropdown',\n    templateUrl: './hosted-dropdown.template.html',\n    styleUrls: ['./hosted-dropdown.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        tuiAsFocusableItemAccessor(TuiHostedDropdownComponent),\n        {\n            provide: TuiAccessorProxyDirective,\n            deps: [[new Optional(), new Self(), TuiPositionAccessor]],\n            useFactory: (position: TuiPositionAccessor[] | null) => position?.[0],\n        },\n    ],\n})\nexport class TuiHostedDropdownComponent implements TuiFocusableElementAccessor {\n    @ContentChild(TuiHostedDropdownConnectorDirective, {read: ElementRef})\n    private readonly dropdownHost?: ElementRef<HTMLElement>;\n\n    @ViewChild('wrapper', {read: ElementRef})\n    private readonly wrapper?: ElementRef<HTMLDivElement>;\n\n    @ViewChild(TuiDropdownDirective)\n    private readonly dropdownDirective?: TuiDropdownDirective;\n\n    /** TODO: rename in 4.0 */\n    readonly openChange = new BehaviorSubject(false);\n\n    @ViewChild(TuiActiveZoneDirective)\n    readonly activeZone!: TuiActiveZoneDirective;\n\n    @Input()\n    content: PolymorpheusContent<TuiHostedDropdownContext>;\n\n    @Input()\n    @tuiDefaultProp()\n    sided = false;\n\n    @Input()\n    @tuiDefaultProp()\n    canOpen = true;\n\n    @Output('openChange')\n    readonly open$ = merge(this.openChange, this.hover$ || EMPTY).pipe(\n        skip(1),\n        distinctUntilChanged(),\n    );\n\n    @Output()\n    readonly focusedChange = new EventEmitter<boolean>();\n\n    readonly context!: TuiContextWithImplicit<TuiActiveZoneDirective>;\n\n    constructor(\n        @Optional()\n        @Inject(TuiDropdownHoverDirective)\n        private readonly hover$: TuiDropdownHoverDirective | null,\n        @Inject(ElementRef) private readonly el: ElementRef,\n    ) {}\n\n    @Input()\n    @tuiDefaultProp()\n    set open(open: boolean) {\n        this.openChange.next(open);\n    }\n\n    get open(): boolean {\n        return this.openChange.value;\n    }\n\n    get host(): HTMLElement {\n        return this.dropdownHost?.nativeElement || this.el.nativeElement;\n    }\n\n    get computedHost(): HTMLElement {\n        return (\n            this.dropdownHost?.nativeElement ||\n            this.nativeFocusableElement ||\n            this.el.nativeElement\n        );\n    }\n\n    get dropdown(): HTMLElement | undefined {\n        return this.dropdownDirective?.dropdownBoxRef?.location.nativeElement;\n    }\n\n    get nativeFocusableElement(): TuiNativeFocusableElement | null {\n        return tuiIsNativeKeyboardFocusable(this.host)\n            ? this.host\n            : tuiGetClosestFocusable({\n                  initial: this.host,\n                  root: this.el.nativeElement,\n              });\n    }\n\n    @HostBinding('class._hosted_dropdown_focused')\n    get focused(): boolean {\n        return (\n            tuiIsNativeFocusedIn(this.host) ||\n            (this.open &&\n                !!this.wrapper &&\n                tuiIsNativeFocusedIn(this.wrapper.nativeElement))\n        );\n    }\n\n    @HostListener('focusin', ['$event.target'])\n    onFocusIn(target: HTMLElement): void {\n        if (!this.computedHost.contains(target)) {\n            this.updateOpen(false);\n        }\n    }\n\n    @HostListener('click', ['$event.target'])\n    onClick(target: HTMLElement): void {\n        if (\n            !this.hostEditable &&\n            this.computedHost.contains(target) &&\n            !this.hover$?.hovered\n        ) {\n            this.updateOpen(!this.open);\n        }\n    }\n\n    @shouldCall(shouldClose)\n    @HostListener('document:keydown.silent', ['$event'])\n    onKeyDownEsc(event: Event): void {\n        event.stopPropagation();\n        this.closeDropdown();\n    }\n\n    @HostListener('keydown.arrowDown', ['$event', 'true'])\n    @HostListener('keydown.arrowUp', ['$event', 'false'])\n    onArrow(event: KeyboardEvent, down: boolean): void {\n        this.focusDropdown(event, down);\n    }\n\n    onKeydown({key, target, defaultPrevented}: KeyboardEvent): void {\n        if (\n            !defaultPrevented &&\n            tuiIsEditingKey(key) &&\n            this.hostEditable &&\n            tuiIsHTMLElement(target) &&\n            !tuiIsElementEditable(target)\n        ) {\n            this.focusHost();\n        }\n    }\n\n    onActiveZone(active: boolean): void {\n        this.updateFocused(active);\n\n        if (!active) {\n            this.updateOpen(false);\n        }\n    }\n\n    onHostObscured(obscured: boolean): void {\n        if (obscured) {\n            this.closeDropdown();\n        }\n    }\n\n    updateOpen(open: boolean): void {\n        if (!open || this.canOpen) {\n            this.open = open;\n        }\n    }\n\n    readonly close = (): void => this.updateOpen(false);\n\n    private get hostEditable(): boolean {\n        return tuiIsElementEditable(this.computedHost);\n    }\n\n    private focusDropdown(event: KeyboardEvent, first: boolean): void {\n        const host = this.nativeFocusableElement;\n\n        if (\n            !host ||\n            !tuiIsHTMLElement(host) ||\n            !tuiIsElement(event.target) ||\n            !host.contains(event.target)\n        ) {\n            return;\n        }\n\n        if (\n            !this.wrapper ||\n            !this.open ||\n            !this.dropdown ||\n            !tuiIsHTMLElement(this.wrapper.nativeElement.nextElementSibling)\n        ) {\n            this.updateOpen(true);\n\n            if (!tuiIsElementEditable(host)) {\n                event.preventDefault();\n            }\n\n            return;\n        }\n\n        const initial = first\n            ? this.wrapper.nativeElement\n            : this.wrapper.nativeElement.nextElementSibling;\n        const focusable = tuiGetClosestFocusable({\n            initial,\n            root: this.wrapper.nativeElement,\n            previous: !first,\n        });\n\n        if (!focusable) {\n            return;\n        }\n\n        focusable.focus();\n        event.preventDefault();\n    }\n\n    private closeDropdown(): void {\n        if (this.focused) {\n            this.focusHost();\n        }\n\n        this.updateOpen(false);\n    }\n\n    private focusHost(): void {\n        const host = this.nativeFocusableElement;\n\n        if (host) {\n            host.focus({preventScroll: true});\n        }\n    }\n\n    private updateFocused(focused: boolean): void {\n        this.focusedChange.emit(focused);\n    }\n}\n","<div\n    *tuiLet=\"!!(open$ | async) as isOpen\"\n    #activeZone=\"tuiActiveZone\"\n    tuiAccessorProxy\n    class=\"t-wrapper\"\n    [tuiDropdownSided]=\"sided\"\n    [tuiDropdown]=\"dropdown\"\n    [tuiDropdownManual]=\"isOpen && canOpen\"\n    [tuiObscuredEnabled]=\"isOpen\"\n    (tuiObscured)=\"onHostObscured($event)\"\n    (tuiActiveZoneChange)=\"onActiveZone($event)\"\n>\n    <ng-content></ng-content>\n    <ng-template\n        #dropdown=\"polymorpheus\"\n        [polymorpheus]=\"context\"\n    >\n        <div\n            #wrapper\n            (keydown)=\"onKeydown($event)\"\n        >\n            <ng-container\n                *polymorpheusOutlet=\"\n                    content as text;\n                    context: {\n                        $implicit: activeZone,\n                        close: close\n                    }\n                \"\n            >\n                {{ text }}\n            </ng-container>\n        </div>\n        <!--This DIV is here to start backwards TreeWalker for focusing last focusable item on ArrowUp-->\n        <div></div>\n    </ng-template>\n</div>\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiActiveZoneModule, TuiLetModule, TuiObscuredModule} from '@taiga-ui/cdk';\nimport {\n    TuiDropdownModule,\n    TuiDropdownOptionsDirective,\n} from '@taiga-ui/core/directives/dropdown';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiAccessorProxyDirective} from './accessor-proxy.directive';\nimport {TuiHostedDropdownComponent} from './hosted-dropdown.component';\nimport {TuiHostedDropdownConnectorDirective} from './hosted-dropdown-connector.directive';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        PolymorpheusModule,\n        TuiLetModule,\n        TuiObscuredModule,\n        TuiActiveZoneModule,\n        TuiDropdownModule,\n    ],\n    declarations: [\n        TuiAccessorProxyDirective,\n        TuiHostedDropdownComponent,\n        TuiHostedDropdownConnectorDirective,\n    ],\n    exports: [\n        TuiHostedDropdownComponent,\n        TuiHostedDropdownConnectorDirective,\n        TuiDropdownOptionsDirective,\n    ],\n})\nexport class TuiHostedDropdownModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i2.TuiAccessorProxyDirective"],"mappings":"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"}