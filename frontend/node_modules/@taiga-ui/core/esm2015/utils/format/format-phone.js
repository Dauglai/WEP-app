import { CHAR_PLUS } from '@taiga-ui/cdk';
/**
 * Formats a string with the phone format +7XXXXXXXXXXXX or XXXXXXXXXXXX,
 * adding parentheses and hyphens.
 *
 * @param value the input string
 * @param countryCode a country code
 * @param phoneMask a phone number mask
 * @return the formatted phone string of the form +7 XXX XXX-XX-XX
 */
export function tuiFormatPhone(value, countryCode, phoneMask) {
    if (!value) {
        return ``;
    }
    let result = countryCode;
    countryCode = countryCode.replace(/[()]/g, ``);
    if (!value.startsWith(countryCode)) {
        value = countryCode + value.replace(CHAR_PLUS, ``);
    }
    const splitPhoneMask = phoneMask.split(``);
    const splitValue = value.slice(countryCode.length).split(``);
    result += ` `;
    if (splitValue.length === 0) {
        return result;
    }
    for (const mask of splitPhoneMask) {
        if (splitValue.length === 0) {
            break;
        }
        if (mask === `#`) {
            result += splitValue[0] || ``;
            splitValue.splice(0, 1);
        }
        else {
            result += mask;
        }
    }
    return result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWF0LXBob25lLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29yZS91dGlscy9mb3JtYXQvZm9ybWF0LXBob25lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFeEM7Ozs7Ozs7O0dBUUc7QUFDSCxNQUFNLFVBQVUsY0FBYyxDQUMxQixLQUFhLEVBQ2IsV0FBbUIsRUFDbkIsU0FBaUI7SUFFakIsSUFBSSxDQUFDLEtBQUssRUFBRTtRQUNSLE9BQU8sRUFBRSxDQUFDO0tBQ2I7SUFFRCxJQUFJLE1BQU0sR0FBRyxXQUFXLENBQUM7SUFFekIsV0FBVyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRS9DLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1FBQ2hDLEtBQUssR0FBRyxXQUFXLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUM7S0FDdEQ7SUFFRCxNQUFNLGNBQWMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUU3RCxNQUFNLElBQUksR0FBRyxDQUFDO0lBRWQsSUFBSSxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUN6QixPQUFPLE1BQU0sQ0FBQztLQUNqQjtJQUVELEtBQUssTUFBTSxJQUFJLElBQUksY0FBYyxFQUFFO1FBQy9CLElBQUksVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDekIsTUFBTTtTQUNUO1FBRUQsSUFBSSxJQUFJLEtBQUssR0FBRyxFQUFFO1lBQ2QsTUFBTSxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDOUIsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDM0I7YUFBTTtZQUNILE1BQU0sSUFBSSxJQUFJLENBQUM7U0FDbEI7S0FDSjtJQUVELE9BQU8sTUFBTSxDQUFDO0FBQ2xCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NIQVJfUExVU30gZnJvbSAnQHRhaWdhLXVpL2Nkayc7XG5cbi8qKlxuICogRm9ybWF0cyBhIHN0cmluZyB3aXRoIHRoZSBwaG9uZSBmb3JtYXQgKzdYWFhYWFhYWFhYWFggb3IgWFhYWFhYWFhYWFhYLFxuICogYWRkaW5nIHBhcmVudGhlc2VzIGFuZCBoeXBoZW5zLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSB0aGUgaW5wdXQgc3RyaW5nXG4gKiBAcGFyYW0gY291bnRyeUNvZGUgYSBjb3VudHJ5IGNvZGVcbiAqIEBwYXJhbSBwaG9uZU1hc2sgYSBwaG9uZSBudW1iZXIgbWFza1xuICogQHJldHVybiB0aGUgZm9ybWF0dGVkIHBob25lIHN0cmluZyBvZiB0aGUgZm9ybSArNyBYWFggWFhYLVhYLVhYXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0dWlGb3JtYXRQaG9uZShcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvdW50cnlDb2RlOiBzdHJpbmcsXG4gICAgcGhvbmVNYXNrOiBzdHJpbmcsXG4pOiBzdHJpbmcge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGBgO1xuICAgIH1cblxuICAgIGxldCByZXN1bHQgPSBjb3VudHJ5Q29kZTtcblxuICAgIGNvdW50cnlDb2RlID0gY291bnRyeUNvZGUucmVwbGFjZSgvWygpXS9nLCBgYCk7XG5cbiAgICBpZiAoIXZhbHVlLnN0YXJ0c1dpdGgoY291bnRyeUNvZGUpKSB7XG4gICAgICAgIHZhbHVlID0gY291bnRyeUNvZGUgKyB2YWx1ZS5yZXBsYWNlKENIQVJfUExVUywgYGApO1xuICAgIH1cblxuICAgIGNvbnN0IHNwbGl0UGhvbmVNYXNrID0gcGhvbmVNYXNrLnNwbGl0KGBgKTtcbiAgICBjb25zdCBzcGxpdFZhbHVlID0gdmFsdWUuc2xpY2UoY291bnRyeUNvZGUubGVuZ3RoKS5zcGxpdChgYCk7XG5cbiAgICByZXN1bHQgKz0gYCBgO1xuXG4gICAgaWYgKHNwbGl0VmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBtYXNrIG9mIHNwbGl0UGhvbmVNYXNrKSB7XG4gICAgICAgIGlmIChzcGxpdFZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWFzayA9PT0gYCNgKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gc3BsaXRWYWx1ZVswXSB8fCBgYDtcbiAgICAgICAgICAgIHNwbGl0VmFsdWUuc3BsaWNlKDAsIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ICs9IG1hc2s7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIl19