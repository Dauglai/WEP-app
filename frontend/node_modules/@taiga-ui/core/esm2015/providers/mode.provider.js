import { ElementRef, Optional } from '@angular/core';
import { TuiModeDirective } from '@taiga-ui/core/directives/mode';
import { TUI_MODE } from '@taiga-ui/core/tokens';
import { of } from 'rxjs';
import { map, startWith } from 'rxjs/operators';
export const MODE_PROVIDER = {
    provide: TUI_MODE,
    deps: [[new Optional(), TuiModeDirective], ElementRef],
    useFactory: (mode, { nativeElement }) => {
        const mode$ = mode
            ? mode.change$.pipe(startWith(null), map(() => mode.mode))
            : of(null);
        nativeElement[`$.data-mode.attr`] = mode$;
        return mode$;
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZS5wcm92aWRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL2NvcmUvcHJvdmlkZXJzL21vZGUucHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLFVBQVUsRUFBRSxRQUFRLEVBQVcsTUFBTSxlQUFlLENBQUM7QUFDN0QsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sZ0NBQWdDLENBQUM7QUFDaEUsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRS9DLE9BQU8sRUFBYSxFQUFFLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFDcEMsT0FBTyxFQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUU5QyxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQWE7SUFDbkMsT0FBTyxFQUFFLFFBQVE7SUFDakIsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLFFBQVEsRUFBRSxFQUFFLGdCQUFnQixDQUFDLEVBQUUsVUFBVSxDQUFDO0lBQ3RELFVBQVUsRUFBRSxDQUNSLElBQTZCLEVBQzdCLEVBQUMsYUFBYSxFQUFhLEVBQ0ssRUFBRTtRQUNsQyxNQUFNLEtBQUssR0FBRyxJQUFJO1lBQ2QsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUNiLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFDZixHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUN2QjtZQUNILENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFZixhQUFhLENBQUMsa0JBQWtCLENBQUMsR0FBRyxLQUFLLENBQUM7UUFFMUMsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztDQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0VsZW1lbnRSZWYsIE9wdGlvbmFsLCBQcm92aWRlcn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1R1aU1vZGVEaXJlY3RpdmV9IGZyb20gJ0B0YWlnYS11aS9jb3JlL2RpcmVjdGl2ZXMvbW9kZSc7XG5pbXBvcnQge1RVSV9NT0RFfSBmcm9tICdAdGFpZ2EtdWkvY29yZS90b2tlbnMnO1xuaW1wb3J0IHtUdWlCcmlnaHRuZXNzfSBmcm9tICdAdGFpZ2EtdWkvY29yZS90eXBlcyc7XG5pbXBvcnQge09ic2VydmFibGUsIG9mfSBmcm9tICdyeGpzJztcbmltcG9ydCB7bWFwLCBzdGFydFdpdGh9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuZXhwb3J0IGNvbnN0IE1PREVfUFJPVklERVI6IFByb3ZpZGVyID0ge1xuICAgIHByb3ZpZGU6IFRVSV9NT0RFLFxuICAgIGRlcHM6IFtbbmV3IE9wdGlvbmFsKCksIFR1aU1vZGVEaXJlY3RpdmVdLCBFbGVtZW50UmVmXSxcbiAgICB1c2VGYWN0b3J5OiAoXG4gICAgICAgIG1vZGU6IFR1aU1vZGVEaXJlY3RpdmUgfCBudWxsLFxuICAgICAgICB7bmF0aXZlRWxlbWVudH06IEVsZW1lbnRSZWYsXG4gICAgKTogT2JzZXJ2YWJsZTxUdWlCcmlnaHRuZXNzIHwgbnVsbD4gPT4ge1xuICAgICAgICBjb25zdCBtb2RlJCA9IG1vZGVcbiAgICAgICAgICAgID8gbW9kZS5jaGFuZ2UkLnBpcGUoXG4gICAgICAgICAgICAgICAgICBzdGFydFdpdGgobnVsbCksXG4gICAgICAgICAgICAgICAgICBtYXAoKCkgPT4gbW9kZS5tb2RlKSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiBvZihudWxsKTtcblxuICAgICAgICBuYXRpdmVFbGVtZW50W2AkLmRhdGEtbW9kZS5hdHRyYF0gPSBtb2RlJDtcblxuICAgICAgICByZXR1cm4gbW9kZSQ7XG4gICAgfSxcbn07XG4iXX0=