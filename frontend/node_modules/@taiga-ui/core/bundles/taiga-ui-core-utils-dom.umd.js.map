{"version":3,"file":"taiga-ui-core-utils-dom.umd.js","sources":["../../../projects/core/utils/dom/check-fixed-position.ts","../../../projects/core/utils/dom/get-safe-area-size.ts","../../../projects/core/utils/dom/get-screen-width.ts","../../../projects/core/utils/dom/get-viewport-height.ts","../../../projects/core/utils/dom/get-viewport-width.ts","../../../projects/core/utils/dom/get-word-range.ts","../../../projects/core/utils/dom/process-icon.ts","../../../projects/core/utils/dom/taiga-ui-core-utils-dom.ts"],"sourcesContent":["export function tuiCheckFixedPosition(element: HTMLElement | null): boolean {\n    if (!element || typeof getComputedStyle === `undefined`) {\n        return false;\n    }\n\n    const style = getComputedStyle(element);\n\n    return (\n        style.getPropertyValue(`position`) === `fixed` ||\n        tuiCheckFixedPosition(element.parentElement)\n    );\n}\n","/**\n * Calculates size of safe area on mobile devices (status bars)\n *\n * ATTENTION: Only use in browser environment\n */\nexport function tuiGetSafeAreaSize(): number {\n    if (!CSS.supports(`padding-top: env(safe-area-inset-top)`)) {\n        return 0;\n    }\n\n    const div = document.createElement(`div`);\n\n    div.style.paddingTop = `env(safe-area-inset-top)`;\n    document.body.appendChild(div);\n\n    const safeAreaSize = parseInt(window.getComputedStyle(div).paddingTop, 10) || 0;\n\n    document.body.removeChild(div);\n\n    return safeAreaSize;\n}\n","export function tuiGetScreenWidth(doc: Document): number {\n    return Math.max(\n        doc.documentElement.clientWidth,\n        doc.defaultView ? doc.defaultView.innerWidth : 0,\n    );\n}\n","/**\n * @description:\n * Cross-browser @media (height)\n *\n * 1. window.innerWidth\n * 1.1. gets CSS viewport @media (height) which include scrollbars\n * 1.2. initial-scale and zoom variations may cause mobile values to\n *      wrongly scale down to what PPK calls the visual\n *      viewport and be smaller than the @media values\n *  1.3. zoom may cause values to be 1px off due to native rounding\n *\n *  2. document.documentElement.clientHeight\n *  2.1. equals CSS viewport width minus scrollbar width\n *  2.2. matches @media (height) when there is no scrollbar\n *  2.3. available cross-browser\n *  2.4. inaccurate if doctype is missing\n */\nexport function tuiGetViewportHeight({document, innerHeight}: Window): number {\n    return Math.max(document.documentElement.clientHeight || 0, innerHeight || 0);\n}\n","/**\n * @description:\n * Cross-browser @media (width)\n *\n * 1. window.innerWidth\n * 1.1. gets CSS viewport @media (width) which include scrollbars\n * 1.2. initial-scale and zoom variations may cause mobile values to\n *      wrongly scale down to what PPK calls the visual\n *      viewport and be smaller than the @media values\n *  1.3. zoom may cause values to be 1px off due to native rounding\n *\n *  2. document.documentElement.clientWidth\n *  2.1. equals CSS viewport width minus scrollbar width\n *  2.2. matches @media (width) when there is no scrollbar\n *  2.3. available cross-browser\n *  2.4. inaccurate if doctype is missing\n */\nexport function tuiGetViewportWidth({document, innerWidth}: Window): number {\n    return Math.max(document.documentElement.clientWidth || 0, innerWidth || 0);\n}\n","import {CHAR_NO_BREAK_SPACE, CHAR_ZERO_WIDTH_SPACE, svgNodeFilter} from '@taiga-ui/cdk';\n\n/**\n * Creates a cloned range with its boundaries set at word boundaries\n *\n * @param currentRange a range to clone\n * @return modified range\n */\n// eslint-disable-next-line max-statements\nexport function tuiGetWordRange(currentRange: Range): Range {\n    const range = currentRange.cloneRange();\n    const {startContainer, startOffset, endContainer, endOffset} = range;\n    const {ownerDocument} = startContainer;\n\n    if (!ownerDocument) {\n        return range;\n    }\n\n    const treeWalker = ownerDocument.createTreeWalker(\n        ownerDocument.body,\n        NodeFilter.SHOW_TEXT,\n        svgNodeFilter,\n    );\n\n    treeWalker.currentNode = startContainer;\n\n    do {\n        const container = treeWalker.currentNode;\n        const textContent = container.textContent || ``;\n        const content =\n            container === startContainer\n                ? textContent.slice(0, Math.max(0, startOffset + 1))\n                : textContent;\n        const offset =\n            Math.max(\n                content.lastIndexOf(` `),\n                content.lastIndexOf(CHAR_NO_BREAK_SPACE),\n                content.lastIndexOf(CHAR_ZERO_WIDTH_SPACE),\n            ) + 1;\n\n        range.setStart(container, 0);\n\n        if (offset) {\n            range.setStart(container, offset);\n            break;\n        }\n    } while (treeWalker.previousNode());\n\n    treeWalker.currentNode = endContainer;\n\n    do {\n        const container = treeWalker.currentNode;\n        const textContent = container.textContent || ``;\n        const content =\n            container === endContainer ? textContent.slice(endOffset + 1) : textContent;\n        const offset = [\n            content.indexOf(` `),\n            content.indexOf(CHAR_NO_BREAK_SPACE),\n            content.indexOf(CHAR_ZERO_WIDTH_SPACE),\n        ].reduce(\n            (result, item) =>\n                result === -1 || item === -1\n                    ? Math.max(result, item)\n                    : Math.min(result, item),\n            -1,\n        );\n\n        range.setEnd(container, textContent.length);\n\n        if (offset !== -1) {\n            range.setEnd(container, offset + textContent.length - content.length);\n            break;\n        }\n    } while (treeWalker.nextNode());\n\n    return range;\n}\n","const WIDTH_SEARCH = `width=\"`;\nconst HEIGHT_SEARCH = `height=\"`;\nconst START = `<svg`;\n\nexport function tuiProcessIcon(source: string, name: string): string {\n    if (source.includes(`id=\"${name}\"`)) {\n        return source;\n    }\n\n    const src = source.slice(Math.max(0, source.indexOf(START)));\n    const attributes = src.slice(0, Math.max(0, src.indexOf(`>`)));\n\n    if (!attributes?.includes(WIDTH_SEARCH) || !attributes.includes(HEIGHT_SEARCH)) {\n        return `${src.replace(\n            START,\n            `<svg xmlns=\"http://www.w3.org/2000/svg\"><g id=\"${name}\" xmlns=\"http://www.w3.org/2000/svg\"><svg`,\n        )}</g></svg>`;\n    }\n\n    const indexOfWidth = attributes.indexOf(WIDTH_SEARCH);\n    const indexOfHeight = attributes.indexOf(HEIGHT_SEARCH);\n    const widthOffset = indexOfWidth + WIDTH_SEARCH.length;\n    const heightOffset = indexOfHeight + HEIGHT_SEARCH.length;\n    const widthString = attributes.slice(\n        widthOffset,\n        attributes.indexOf(`\"`, widthOffset),\n    );\n    const heightString = attributes.slice(\n        heightOffset,\n        attributes.indexOf(`\"`, heightOffset),\n    );\n\n    if (\n        !heightString ||\n        !widthString ||\n        widthString.includes(`%`) ||\n        heightString.includes(`%`) ||\n        widthString.includes(`em`) ||\n        heightString.includes(`em`)\n    ) {\n        return src.replace(START, `<svg id=\"${name}\"`);\n    }\n\n    const width = parseInt(widthString, 10);\n    const height = parseInt(heightString, 10);\n\n    return `<g id=\"${name}\" xmlns=\"http://www.w3.org/2000/svg\"><svg  x=\"50%\" y=\"50%\" width=\"${\n        width / 16\n    }em\" height=\"${\n        height / 16\n    }em\" overflow=\"visible\" viewBox=\"0 0 ${width} ${height}\"><svg x=\"${-width / 2}\" y=\"${\n        -height / 2\n    }\">${src}</svg></svg></g>`;\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["svgNodeFilter","CHAR_NO_BREAK_SPACE","CHAR_ZERO_WIDTH_SPACE"],"mappings":"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"}