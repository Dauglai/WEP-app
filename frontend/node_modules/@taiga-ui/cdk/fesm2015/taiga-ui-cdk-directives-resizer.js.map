{"version":3,"file":"taiga-ui-cdk-directives-resizer.js","sources":["../../../projects/cdk/directives/resizer/resizeable.directive.ts","../../../projects/cdk/directives/resizer/resizer.directive.ts","../../../projects/cdk/directives/resizer/resizer.module.ts","../../../projects/cdk/directives/resizer/taiga-ui-cdk-directives-resizer.ts"],"sourcesContent":["import {Directive} from '@angular/core';\nimport {TuiElementDirective} from '@taiga-ui/cdk/directives/element';\n\n@Directive({\n    selector: '[tuiResizeable]',\n})\nexport class TuiResizeableDirective extends TuiElementDirective {}\n","import {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    Output,\n} from '@angular/core';\nimport {tuiDefaultProp} from '@taiga-ui/cdk/decorators';\nimport {tuiPx} from '@taiga-ui/cdk/utils/format';\n\nimport {TuiResizeableDirective} from './resizeable.directive';\n\n// TODO: Migrate to PointerEvent in 4.0\n@Directive({\n    selector: '[tuiResizer]',\n    host: {'[style.touchAction]': '\"none\"'},\n})\nexport class TuiResizerDirective {\n    @Input()\n    @tuiDefaultProp()\n    tuiResizer: readonly [x: number, y: number] = [0, 0];\n\n    @Output()\n    readonly tuiSizeChange = new EventEmitter<readonly [x: number, y: number]>();\n\n    x = NaN;\n    y = NaN;\n    width = 0;\n    height = 0;\n\n    constructor(\n        @Inject(TuiResizeableDirective)\n        private readonly resizeable: ElementRef<HTMLElement>,\n    ) {}\n\n    @HostBinding('style.cursor')\n    get cursor(): string {\n        if (!this.tuiResizer[0]) {\n            return 'ns-resize';\n        }\n\n        if (!this.tuiResizer[1]) {\n            return 'ew-resize';\n        }\n\n        if (this.tuiResizer[0] * this.tuiResizer[1] > 0) {\n            return 'nwse-resize';\n        }\n\n        return 'nesw-resize';\n    }\n\n    @HostListener('touchstart.silent.passive', ['$event'])\n    onTouchStart({touches}: TouchEvent): void {\n        this.onMouseDown(touches[0].clientX, touches[0].clientY);\n    }\n\n    @HostListener('mousedown.silent.prevent', ['$event.x', '$event.y'])\n    onMouseDown(x: number, y: number): void {\n        this.x = x;\n        this.y = y;\n        this.width = this.resizeable.nativeElement.clientWidth;\n        this.height = this.resizeable.nativeElement.clientHeight;\n    }\n\n    @HostListener('document:mousemove.silent', ['$event'])\n    onMouseMove({x, y, buttons}: MouseEvent): void {\n        if (!buttons) {\n            this.onMouseUp();\n        } else {\n            this.onMove(x, y);\n        }\n    }\n\n    @HostListener('document:touchmove.silent', ['$event'])\n    onTouchMove({touches}: TouchEvent): void {\n        this.onMove(touches[0].clientX, touches[0].clientY);\n    }\n\n    @HostListener('document:mouseup.silent')\n    @HostListener('document:touchend.silent')\n    onMouseUp(): void {\n        this.x = NaN;\n    }\n\n    onMove(x: number, y: number): void {\n        if (Number.isNaN(this.x)) {\n            return;\n        }\n\n        const {style} = this.resizeable.nativeElement;\n        const size = [\n            this.width + this.tuiResizer[0] * (x - this.x),\n            this.height + this.tuiResizer[1] * (y - this.y),\n        ] as const;\n\n        if (this.tuiResizer[0]) {\n            style.width = tuiPx(size[0]);\n        }\n\n        if (this.tuiResizer[1]) {\n            style.height = tuiPx(size[1]);\n        }\n\n        this.tuiSizeChange.emit(size);\n    }\n}\n","import {NgModule} from '@angular/core';\n\nimport {TuiResizeableDirective} from './resizeable.directive';\nimport {TuiResizerDirective} from './resizer.directive';\n\n@NgModule({\n    declarations: [TuiResizeableDirective, TuiResizerDirective],\n    exports: [TuiResizeableDirective, TuiResizerDirective],\n})\nexport class TuiResizerModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}