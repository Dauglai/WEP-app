{"version":3,"file":"taiga-ui-cdk-directives-obscured.js","sources":["../../../projects/cdk/directives/obscured/obscured.directive.ts","../../../projects/cdk/directives/obscured/obscured.module.ts","../../../projects/cdk/directives/obscured/taiga-ui-cdk-directives-obscured.ts"],"sourcesContent":["import {Directive, Inject, Input, Optional, Output, Self} from '@angular/core';\nimport {tuiRequiredSetter} from '@taiga-ui/cdk/decorators';\nimport {TuiActiveZoneDirective} from '@taiga-ui/cdk/directives/active-zone';\nimport {tuiIfMap} from '@taiga-ui/cdk/observables';\nimport {\n    TuiDestroyService,\n    TuiObscuredService,\n    TuiParentsScrollService,\n} from '@taiga-ui/cdk/services';\nimport {Observable, Subject} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n/**\n * Directive that monitors element visibility\n */\n@Directive({\n    selector: '[tuiObscured]',\n    providers: [TuiObscuredService, TuiParentsScrollService, TuiDestroyService],\n})\nexport class TuiObscuredDirective {\n    private readonly enabled$ = new Subject<boolean>();\n\n    @Input()\n    @tuiRequiredSetter()\n    set tuiObscuredEnabled(enabled: boolean) {\n        this.enabled$.next(enabled);\n    }\n\n    @Output()\n    readonly tuiObscured: Observable<boolean>;\n\n    constructor(\n        @Optional()\n        @Inject(TuiActiveZoneDirective)\n        activeZone: TuiActiveZoneDirective | null,\n        @Self()\n        @Inject(TuiObscuredService)\n        obscured$: TuiObscuredService,\n    ) {\n        const mapped$ = obscured$.pipe(\n            map(\n                obscuredBy =>\n                    !!obscuredBy &&\n                    (!activeZone ||\n                        !obscuredBy.length ||\n                        obscuredBy.every(element => !activeZone.contains(element))),\n            ),\n        );\n\n        this.tuiObscured = this.enabled$.pipe(tuiIfMap(() => mapped$));\n    }\n}\n","import {NgModule} from '@angular/core';\n\nimport {TuiObscuredDirective} from './obscured.directive';\n\n@NgModule({\n    declarations: [TuiObscuredDirective],\n    exports: [TuiObscuredDirective],\n})\nexport class TuiObscuredModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;;;;;;AAYA;;AAEG;MAKU,oBAAoB,CAAA;IAY7B,WAGI,CAAA,UAAyC,EAGzC,SAA6B,EAAA;AAjBhB,QAAA,IAAA,CAAA,QAAQ,GAAG,IAAI,OAAO,EAAW,CAAC;AAmB/C,QAAA,MAAM,OAAO,GAAG,SAAS,CAAC,IAAI,CAC1B,GAAG,CACC,UAAU,IACN,CAAC,CAAC,UAAU;AACZ,aAAC,CAAC,UAAU;gBACR,CAAC,UAAU,CAAC,MAAM;AAClB,gBAAA,UAAU,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CACtE,CACJ,CAAC;AAEF,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,OAAO,CAAC,CAAC,CAAC;KAClE;IA1BD,IAAI,kBAAkB,CAAC,OAAgB,EAAA;AACnC,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC/B;;kHAPQ,oBAAoB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAcjB,sBAAsB,EAAA,QAAA,EAAA,IAAA,EAAA,EAAA,EAAA,KAAA,EAGtB,kBAAkB,EAAA,IAAA,EAAA,IAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAjBrB,oBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,oBAAoB,uIAFlB,CAAC,kBAAkB,EAAE,uBAAuB,EAAE,iBAAiB,CAAC,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;AAO3E,UAAA,CAAA;AADC,IAAA,iBAAiB,EAAE;AAGnB,CAAA,EAAA,oBAAA,CAAA,SAAA,EAAA,oBAAA,EAAA,IAAA,CAAA,CAAA;4FAPQ,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBAJhC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,eAAe;AACzB,oBAAA,SAAS,EAAE,CAAC,kBAAkB,EAAE,uBAAuB,EAAE,iBAAiB,CAAC;AAC9E,iBAAA,CAAA;;0BAcQ,QAAQ;;0BACR,MAAM;2BAAC,sBAAsB,CAAA;;0BAE7B,IAAI;;0BACJ,MAAM;2BAAC,kBAAkB,CAAA;4CAZ1B,kBAAkB,EAAA,CAAA;sBAFrB,KAAK;gBAOG,WAAW,EAAA,CAAA;sBADnB,MAAM;;;MCpBE,iBAAiB,CAAA;;+GAAjB,iBAAiB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;gHAAjB,iBAAiB,EAAA,YAAA,EAAA,CAHX,oBAAoB,CAAA,EAAA,OAAA,EAAA,CACzB,oBAAoB,CAAA,EAAA,CAAA,CAAA;gHAErB,iBAAiB,EAAA,CAAA,CAAA;4FAAjB,iBAAiB,EAAA,UAAA,EAAA,CAAA;kBAJ7B,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;oBACN,YAAY,EAAE,CAAC,oBAAoB,CAAC;oBACpC,OAAO,EAAE,CAAC,oBAAoB,CAAC;AAClC,iBAAA,CAAA;;;ACPD;;AAEG;;;;"}