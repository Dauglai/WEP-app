import { svgNodeFilter } from '@taiga-ui/cdk/constants';
import { tuiIsHTMLElement } from '@taiga-ui/cdk/utils/dom';
import { tuiIsNativeKeyboardFocusable } from './is-native-keyboard-focusable';
import { tuiIsNativeMouseFocusable } from './is-native-mouse-focusable';
/**
 * @description:
 * Finds the closest element that can be focused with a keyboard or mouse in theory
 */
export function tuiGetClosestFocusable({ initial, root, previous = false, keyboard = true, }) {
    if (!root.ownerDocument) {
        return null;
    }
    const check = keyboard ? tuiIsNativeKeyboardFocusable : tuiIsNativeMouseFocusable;
    const treeWalker = root.ownerDocument.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, svgNodeFilter);
    treeWalker.currentNode = initial;
    while (previous ? treeWalker.previousNode() : treeWalker.nextNode()) {
        if (tuiIsHTMLElement(treeWalker.currentNode)) {
            initial = treeWalker.currentNode;
        }
        if (tuiIsHTMLElement(initial) && check(initial)) {
            return initial;
        }
    }
    return null;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWNsb3Nlc3QtZm9jdXNhYmxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY2RrL3V0aWxzL2ZvY3VzL2dldC1jbG9zZXN0LWZvY3VzYWJsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFDdEQsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFFekQsT0FBTyxFQUFDLDRCQUE0QixFQUFDLE1BQU0sZ0NBQWdDLENBQUM7QUFDNUUsT0FBTyxFQUFDLHlCQUF5QixFQUFDLE1BQU0sNkJBQTZCLENBQUM7QUE0QnRFOzs7R0FHRztBQUNILE1BQU0sVUFBVSxzQkFBc0IsQ0FBQyxFQUNuQyxPQUFPLEVBQ1AsSUFBSSxFQUNKLFFBQVEsR0FBRyxLQUFLLEVBQ2hCLFFBQVEsR0FBRyxJQUFJLEdBQ2E7SUFDNUIsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUU7UUFDckIsT0FBTyxJQUFJLENBQUM7S0FDZjtJQUVELE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsNEJBQTRCLENBQUMsQ0FBQyxDQUFDLHlCQUF5QixDQUFDO0lBQ2xGLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQ2xELElBQUksRUFDSixVQUFVLENBQUMsWUFBWSxFQUN2QixhQUFhLENBQ2hCLENBQUM7SUFFRixVQUFVLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQztJQUVqQyxPQUFPLFFBQVEsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLEVBQUU7UUFDakUsSUFBSSxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDMUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxXQUFXLENBQUM7U0FDcEM7UUFFRCxJQUFJLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUM3QyxPQUFPLE9BQU8sQ0FBQztTQUNsQjtLQUNKO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7c3ZnTm9kZUZpbHRlcn0gZnJvbSAnQHRhaWdhLXVpL2Nkay9jb25zdGFudHMnO1xuaW1wb3J0IHt0dWlJc0hUTUxFbGVtZW50fSBmcm9tICdAdGFpZ2EtdWkvY2RrL3V0aWxzL2RvbSc7XG5cbmltcG9ydCB7dHVpSXNOYXRpdmVLZXlib2FyZEZvY3VzYWJsZX0gZnJvbSAnLi9pcy1uYXRpdmUta2V5Ym9hcmQtZm9jdXNhYmxlJztcbmltcG9ydCB7dHVpSXNOYXRpdmVNb3VzZUZvY3VzYWJsZX0gZnJvbSAnLi9pcy1uYXRpdmUtbW91c2UtZm9jdXNhYmxlJztcblxuZXhwb3J0IGludGVyZmFjZSBUdWlHZXRDbG9zZXN0Rm9jdXNhYmxlT3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uOlxuICAgICAqIGN1cnJlbnQgSFRNTCBlbGVtZW50XG4gICAgICovXG4gICAgaW5pdGlhbDogRWxlbWVudDtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbjpcbiAgICAgKiB0b3AgTm9kZSBsaW1pdGluZyB0aGUgc2VhcmNoIGFyZWFcbiAgICAgKi9cbiAgICByb290OiBOb2RlO1xuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uOlxuICAgICAqIHNob3VsZCBpdCBsb29rIGJhY2t3YXJkcyBpbnN0ZWFkIChmaW5kIGl0ZW0gdGhhdCB3aWxsIGJlIGZvY3VzZWQgd2l0aCBTaGlmdCArIFRhYilcbiAgICAgKi9cbiAgICBwcmV2aW91cz86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb246XG4gICAgICogZGV0ZXJtaW5lIGlmIG9ubHkga2V5Ym9hcmQgZm9jdXMgaXMgb2YgaW50ZXJlc3RcbiAgICAgKi9cbiAgICBrZXlib2FyZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uOlxuICogRmluZHMgdGhlIGNsb3Nlc3QgZWxlbWVudCB0aGF0IGNhbiBiZSBmb2N1c2VkIHdpdGggYSBrZXlib2FyZCBvciBtb3VzZSBpbiB0aGVvcnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1aUdldENsb3Nlc3RGb2N1c2FibGUoe1xuICAgIGluaXRpYWwsXG4gICAgcm9vdCxcbiAgICBwcmV2aW91cyA9IGZhbHNlLFxuICAgIGtleWJvYXJkID0gdHJ1ZSxcbn06IFR1aUdldENsb3Nlc3RGb2N1c2FibGVPcHRpb25zKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcbiAgICBpZiAoIXJvb3Qub3duZXJEb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IGtleWJvYXJkID8gdHVpSXNOYXRpdmVLZXlib2FyZEZvY3VzYWJsZSA6IHR1aUlzTmF0aXZlTW91c2VGb2N1c2FibGU7XG4gICAgY29uc3QgdHJlZVdhbGtlciA9IHJvb3Qub3duZXJEb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgICAgICByb290LFxuICAgICAgICBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCxcbiAgICAgICAgc3ZnTm9kZUZpbHRlcixcbiAgICApO1xuXG4gICAgdHJlZVdhbGtlci5jdXJyZW50Tm9kZSA9IGluaXRpYWw7XG5cbiAgICB3aGlsZSAocHJldmlvdXMgPyB0cmVlV2Fsa2VyLnByZXZpb3VzTm9kZSgpIDogdHJlZVdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgICAgIGlmICh0dWlJc0hUTUxFbGVtZW50KHRyZWVXYWxrZXIuY3VycmVudE5vZGUpKSB7XG4gICAgICAgICAgICBpbml0aWFsID0gdHJlZVdhbGtlci5jdXJyZW50Tm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0dWlJc0hUTUxFbGVtZW50KGluaXRpYWwpICYmIGNoZWNrKGluaXRpYWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuIl19