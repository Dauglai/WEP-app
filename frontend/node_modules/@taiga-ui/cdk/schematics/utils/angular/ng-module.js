"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.findNgModule = exports.getNgModules = void 0;
const ng_morph_1 = require("ng-morph");
const constants_1 = require("../../constants");
function getNgModules(pattern, query) {
    return ng_morph_1.getClasses(pattern, query).filter(declaration => !!declaration.getDecorator(`NgModule`));
}
exports.getNgModules = getNgModules;
/**
 * Find NgModule where the component was declared.
 */
function findNgModule(ngComponent) {
    const allNgModules = getNgModules(constants_1.ALL_TS_FILES);
    return (allNgModules.find(module => {
        const moduleFile = module.getSourceFile();
        const imports = ng_morph_1.getImports(moduleFile.getFilePath(), {
            namedImports: ngComponent.getName(),
        });
        return imports.some(i => i.getModuleSpecifierSourceFile() === ngComponent.getSourceFile());
    }) || null);
}
exports.findNgModule = findNgModule;
