{"version":3,"file":"ng-web-apis-resize-observer.js","sources":["../../../projects/resize-observer/src/tokens/resize-option-box.ts","../../../projects/resize-observer/src/tokens/support.ts","../../../projects/resize-observer/src/services/resize-observer.service.ts","../../../projects/resize-observer/src/directives/resize-observer.directive.ts","../../../projects/resize-observer/src/module.ts","../../../projects/resize-observer/src/public-api.ts","../../../projects/resize-observer/src/ng-web-apis-resize-observer.ts"],"sourcesContent":["import {InjectionToken} from '@angular/core';\r\n\r\nexport const RESIZE_OPTION_BOX_DEFAULT = 'content-box';\r\n\r\nexport const RESIZE_OPTION_BOX = new InjectionToken<ResizeObserverBoxOptions>(\r\n    'Box model to observe changes',\r\n    {\r\n        providedIn: 'root',\r\n        factory: () => RESIZE_OPTION_BOX_DEFAULT,\r\n    },\r\n);\r\n","import {inject, InjectionToken} from '@angular/core';\r\nimport {WINDOW} from '@ng-web-apis/common';\r\n\r\nexport const RESIZE_OBSERVER_SUPPORT = new InjectionToken<boolean>(\r\n    'Resize Observer API support',\r\n    {\r\n        providedIn: 'root',\r\n        factory: () => !!(inject(WINDOW) as any).ResizeObserver,\r\n    },\r\n);\r\n","import {ElementRef, Inject, Injectable, NgZone} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\nimport {share} from 'rxjs/operators';\r\n\r\nimport {RESIZE_OPTION_BOX} from '../tokens/resize-option-box';\r\nimport {RESIZE_OBSERVER_SUPPORT} from '../tokens/support';\r\n\r\n@Injectable()\r\nexport class ResizeObserverService extends Observable<readonly ResizeObserverEntry[]> {\r\n    constructor(\r\n        @Inject(ElementRef) {nativeElement}: ElementRef<Element>,\r\n        @Inject(NgZone) ngZone: NgZone,\r\n        @Inject(RESIZE_OBSERVER_SUPPORT) support: boolean,\r\n        @Inject(RESIZE_OPTION_BOX) box: ResizeObserverBoxOptions,\r\n    ) {\r\n        let observer: ResizeObserver;\r\n\r\n        super(subscriber => {\r\n            if (!support) {\r\n                subscriber.error('ResizeObserver is not supported in your browser');\r\n\r\n                return;\r\n            }\r\n\r\n            observer = new ResizeObserver(entries => {\r\n                ngZone.run(() => {\r\n                    subscriber.next(entries);\r\n                });\r\n            });\r\n            observer.observe(nativeElement, {box});\r\n\r\n            return () => {\r\n                observer.disconnect();\r\n            };\r\n        });\r\n\r\n        return this.pipe(share());\r\n    }\r\n}\r\n","import {Attribute, Directive, ElementRef, Inject, Output} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\n\r\nimport {ResizeObserverService} from '../services/resize-observer.service';\r\nimport {RESIZE_OPTION_BOX, RESIZE_OPTION_BOX_DEFAULT} from '../tokens/resize-option-box';\r\n\r\n// TODO switch to Attribute once https://github.com/angular/angular/issues/36479 is fixed\r\nexport function boxExtractor({\r\n    nativeElement,\r\n}: ElementRef<Element>): ResizeObserverBoxOptions {\r\n    const attribute = nativeElement.getAttribute(\r\n        'waResizeBox',\r\n    ) as ResizeObserverBoxOptions;\r\n\r\n    return boxFactory(attribute);\r\n}\r\n\r\nexport function boxFactory(\r\n    box: ResizeObserverBoxOptions | null,\r\n): ResizeObserverBoxOptions {\r\n    return box || RESIZE_OPTION_BOX_DEFAULT;\r\n}\r\n\r\n@Directive({\r\n    selector: '[waResizeObserver]',\r\n    providers: [\r\n        ResizeObserverService,\r\n        {\r\n            provide: RESIZE_OPTION_BOX,\r\n            deps: [ElementRef],\r\n            useFactory: boxExtractor,\r\n        },\r\n    ],\r\n})\r\nexport class ResizeObserverDirective {\r\n    @Output()\r\n    readonly waResizeObserver: Observable<ResizeObserverEntry[]>;\r\n\r\n    constructor(\r\n        @Inject(ResizeObserverService)\r\n        entries$: Observable<ResizeObserverEntry[]>,\r\n        @Attribute('waResizeBox') _box: ResizeObserverBoxOptions,\r\n    ) {\r\n        this.waResizeObserver = entries$;\r\n    }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {ResizeObserverDirective} from './directives/resize-observer.directive';\r\n\r\n@NgModule({\r\n    declarations: [ResizeObserverDirective],\r\n    exports: [ResizeObserverDirective],\r\n})\r\nexport class ResizeObserverModule {}\r\n","/**\r\n * Public API Surface of @ng-web-apis/resize-observer\r\n */\r\n\r\n/* Directives */\r\nexport * from './directives/resize-observer.directive';\r\n\r\n/* Modules */\r\nexport * from './module';\r\n\r\n/* Services */\r\nexport * from './services/resize-observer.service';\r\n\r\n/* Tokens */\r\nexport * from './tokens/resize-option-box';\r\nexport * from './tokens/support';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;;;AAEO,MAAM,yBAAyB,GAAG,cAAc;MAE1C,iBAAiB,GAAG,IAAI,cAAc,CAC/C,8BAA8B,EAC9B;AACI,IAAA,UAAU,EAAE,MAAM;AAClB,IAAA,OAAO,EAAE,MAAM,yBAAyB;AAC3C,CAAA;;MCNQ,uBAAuB,GAAG,IAAI,cAAc,CACrD,6BAA6B,EAC7B;AACI,IAAA,UAAU,EAAE,MAAM;IAClB,OAAO,EAAE,MAAM,CAAC,CAAE,MAAM,CAAC,MAAM,CAAS,CAAC,cAAc;AAC1D,CAAA;;ACAC,MAAO,qBAAsB,SAAQ,UAA0C,CAAA;IACjF,WACwB,CAAA,EAAC,aAAa,EAAsB,EACxC,MAAc,EACG,OAAgB,EACtB,GAA6B,EAAA;AAExD,QAAA,IAAI,QAAwB,CAAC;QAE7B,KAAK,CAAC,UAAU,IAAG;YACf,IAAI,CAAC,OAAO,EAAE;AACV,gBAAA,UAAU,CAAC,KAAK,CAAC,iDAAiD,CAAC,CAAC;gBAEpE,OAAO;AACV,aAAA;AAED,YAAA,QAAQ,GAAG,IAAI,cAAc,CAAC,OAAO,IAAG;AACpC,gBAAA,MAAM,CAAC,GAAG,CAAC,MAAK;AACZ,oBAAA,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAC7B,iBAAC,CAAC,CAAC;AACP,aAAC,CAAC,CAAC;YACH,QAAQ,CAAC,OAAO,CAAC,aAAa,EAAE,EAAC,GAAG,EAAC,CAAC,CAAC;AAEvC,YAAA,OAAO,MAAK;gBACR,QAAQ,CAAC,UAAU,EAAE,CAAC;AAC1B,aAAC,CAAC;AACN,SAAC,CAAC,CAAC;AAEH,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;KAC7B;;AA7BQ,mBAAA,qBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,qBAAqB,kBAElB,UAAU,EAAA,EAAA,EAAA,KAAA,EACV,MAAM,EACN,EAAA,EAAA,KAAA,EAAA,uBAAuB,aACvB,iBAAiB,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA;0IALpB,qBAAqB,EAAA,CAAA,CAAA;4FAArB,qBAAqB,EAAA,UAAA,EAAA,CAAA;kBADjC,UAAU;;0BAGF,MAAM;2BAAC,UAAU,CAAA;;0BACjB,MAAM;2BAAC,MAAM,CAAA;;0BACb,MAAM;2BAAC,uBAAuB,CAAA;;0BAC9B,MAAM;2BAAC,iBAAiB,CAAA;;;ACPjC;AACgB,SAAA,YAAY,CAAC,EACzB,aAAa,GACK,EAAA;IAClB,MAAM,SAAS,GAAG,aAAa,CAAC,YAAY,CACxC,aAAa,CACY,CAAC;AAE9B,IAAA,OAAO,UAAU,CAAC,SAAS,CAAC,CAAC;AACjC,CAAC;AAEK,SAAU,UAAU,CACtB,GAAoC,EAAA;IAEpC,OAAO,GAAG,IAAI,yBAAyB,CAAC;AAC5C,CAAC;MAaY,uBAAuB,CAAA;IAIhC,WAEI,CAAA,QAA2C,EACjB,IAA8B,EAAA;AAExD,QAAA,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC;KACpC;;wIAVQ,uBAAuB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAKpB,qBAAqB,EAAA,EAAA,EAAA,KAAA,EAElB,aAAa,EAAA,SAAA,EAAA,IAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAPnB,mBAAA,uBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,uBAAuB,EATrB,QAAA,EAAA,oBAAA,EAAA,OAAA,EAAA,EAAA,gBAAA,EAAA,kBAAA,EAAA,EAAA,SAAA,EAAA;QACP,qBAAqB;AACrB,QAAA;AACI,YAAA,OAAO,EAAE,iBAAiB;YAC1B,IAAI,EAAE,CAAC,UAAU,CAAC;AAClB,YAAA,UAAU,EAAE,YAAY;AAC3B,SAAA;AACJ,KAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;4FAEQ,uBAAuB,EAAA,UAAA,EAAA,CAAA;kBAXnC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,oBAAoB;AAC9B,oBAAA,SAAS,EAAE;wBACP,qBAAqB;AACrB,wBAAA;AACI,4BAAA,OAAO,EAAE,iBAAiB;4BAC1B,IAAI,EAAE,CAAC,UAAU,CAAC;AAClB,4BAAA,UAAU,EAAE,YAAY;AAC3B,yBAAA;AACJ,qBAAA;AACJ,iBAAA,CAAA;;0BAMQ,MAAM;2BAAC,qBAAqB,CAAA;;0BAE5B,SAAS;2BAAC,aAAa,CAAA;4CALnB,gBAAgB,EAAA,CAAA;sBADxB,MAAM;;;MC5BE,oBAAoB,CAAA;;qIAApB,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;sIAApB,oBAAoB,EAAA,YAAA,EAAA,CAHd,uBAAuB,CAAA,EAAA,OAAA,EAAA,CAC5B,uBAAuB,CAAA,EAAA,CAAA,CAAA;sIAExB,oBAAoB,EAAA,CAAA,CAAA;4FAApB,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBAJhC,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;oBACN,YAAY,EAAE,CAAC,uBAAuB,CAAC;oBACvC,OAAO,EAAE,CAAC,uBAAuB,CAAC;AACrC,iBAAA,CAAA;;;ACND;;AAEG;;ACFH;;AAEG;;;;"}