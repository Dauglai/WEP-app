{"version":3,"file":"ng-web-apis-mutation-observer.js","sources":["../../../projects/mutation-observer/src/tokens/mutation-observer-init.ts","../../../projects/mutation-observer/src/utils/boolean-attribute.ts","../../../projects/mutation-observer/src/utils/mutation-observer-init-factory.ts","../../../projects/mutation-observer/src/directives/mutation-observer.directive.ts","../../../projects/mutation-observer/src/services/mutation-observer.service.ts","../../../projects/mutation-observer/src/module.ts","../../../projects/mutation-observer/src/public-api.ts","../../../projects/mutation-observer/src/ng-web-apis-mutation-observer.ts"],"sourcesContent":["import {InjectionToken} from '@angular/core';\r\n\r\nexport const MUTATION_OBSERVER_INIT = new InjectionToken<MutationObserverInit>(\r\n    'MutationObserver config',\r\n);\r\n","export function booleanAttribute(element: Element, attribute: string): true | undefined {\r\n    return element.getAttribute(attribute) !== null || undefined;\r\n}\r\n","import {ElementRef} from '@angular/core';\r\nimport {booleanAttribute} from './boolean-attribute';\r\n\r\nexport function mutationObserverInitFactory({\r\n    nativeElement,\r\n}: ElementRef<Element>): MutationObserverInit {\r\n    const attributeFilterAttr = nativeElement.getAttribute('attributeFilter');\r\n    const attributeFilter = attributeFilterAttr\r\n        ? attributeFilterAttr.split(',').map(attr => attr.trim())\r\n        : undefined;\r\n\r\n    return {\r\n        attributeFilter,\r\n        attributeOldValue: booleanAttribute(nativeElement, 'attributeOldValue'),\r\n        attributes: booleanAttribute(nativeElement, 'attributes'),\r\n        characterData: booleanAttribute(nativeElement, 'characterData'),\r\n        characterDataOldValue: booleanAttribute(nativeElement, 'characterDataOldValue'),\r\n        childList: booleanAttribute(nativeElement, 'childList'),\r\n        subtree: booleanAttribute(nativeElement, 'subtree'),\r\n    };\r\n}\r\n","import {\r\n    Attribute,\r\n    Directive,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Inject,\r\n    OnDestroy,\r\n    Output,\r\n} from '@angular/core';\r\n\r\nimport {MUTATION_OBSERVER_INIT} from '../tokens/mutation-observer-init';\r\nimport {mutationObserverInitFactory} from '../utils/mutation-observer-init-factory';\r\n\r\n@Directive({\r\n    selector: '[waMutationObserver]',\r\n    exportAs: 'MutationObserver',\r\n    providers: [\r\n        {\r\n            provide: MUTATION_OBSERVER_INIT,\r\n            deps: [ElementRef],\r\n            useFactory: mutationObserverInitFactory,\r\n        },\r\n    ],\r\n})\r\nexport class MutationObserverDirective extends MutationObserver implements OnDestroy {\r\n    @Output()\r\n    readonly waMutationObserver = new EventEmitter<MutationRecord[]>();\r\n\r\n    constructor(\r\n        @Inject(ElementRef) {nativeElement}: ElementRef<Node>,\r\n        @Inject(MUTATION_OBSERVER_INIT) config: MutationObserverInit,\r\n        @Attribute('attributeFilter') _1: unknown,\r\n        @Attribute('attributeOldValue') _2: unknown,\r\n        @Attribute('attributes') _3: unknown,\r\n        @Attribute('characterData') _4: unknown,\r\n        @Attribute('characterDataOldValue') _5: unknown,\r\n        @Attribute('childList') _6: unknown,\r\n        @Attribute('subtree') _7: unknown,\r\n    ) {\r\n        super(records => {\r\n            this.waMutationObserver.emit(records);\r\n        });\r\n\r\n        this.observe(nativeElement, config);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.disconnect();\r\n    }\r\n}\r\n","import {ElementRef, Inject, Injectable} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\n\r\nimport {MUTATION_OBSERVER_INIT} from '../tokens/mutation-observer-init';\r\n\r\n@Injectable()\r\nexport class MutationObserverService extends Observable<readonly MutationRecord[]> {\r\n    constructor(\r\n        @Inject(ElementRef) {nativeElement}: ElementRef<Node>,\r\n        @Inject(MUTATION_OBSERVER_INIT) config: MutationObserverInit,\r\n    ) {\r\n        super(subscriber => {\r\n            const observer = new MutationObserver(records => {\r\n                subscriber.next(records);\r\n            });\r\n\r\n            observer.observe(nativeElement, config);\r\n\r\n            return () => {\r\n                observer.disconnect();\r\n            };\r\n        });\r\n    }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {MutationObserverDirective} from './directives/mutation-observer.directive';\r\n\r\n@NgModule({\r\n    declarations: [MutationObserverDirective],\r\n    exports: [MutationObserverDirective],\r\n})\r\nexport class MutationObserverModule {}\r\n","/**\r\n * Public API Surface of @ng-web-apis/mutation-observer\r\n */\r\n\r\nexport * from './directives/mutation-observer.directive';\r\nexport * from './services/mutation-observer.service';\r\nexport * from './tokens/mutation-observer-init';\r\nexport * from './module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}