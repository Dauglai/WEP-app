{"ast":null,"code":"import { __decorate } from 'tslib';\nimport { DOCUMENT } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { ElementRef, Renderer2, Directive, Inject, Input, NgModule } from '@angular/core';\nimport { svgNodeFilter, tuiPx, TuiResizeService, TuiDestroyService, tuiDefaultProp } from '@taiga-ui/cdk';\nimport * as i1 from 'rxjs';\nclass TuiHighlightDirective {\n  constructor(doc, el, renderer, resize$) {\n    this.doc = doc;\n    this.el = el;\n    this.renderer = renderer;\n    this.highlight = this.setUpHighlight();\n    this.treeWalker = this.doc.createTreeWalker(this.el.nativeElement, NodeFilter.SHOW_TEXT, svgNodeFilter);\n    this.tuiHighlight = '';\n    this.tuiHighlightColor = 'var(--tui-selection)';\n    resize$.subscribe(() => {\n      this.updateStyles();\n    });\n  }\n  get match() {\n    return this.indexOf(this.el.nativeElement.textContent) !== -1;\n  }\n  ngOnChanges() {\n    this.updateStyles();\n  }\n  updateStyles() {\n    this.highlight.style.display = 'none';\n    if (!this.match) {\n      return;\n    }\n    this.treeWalker.currentNode = this.el.nativeElement;\n    do {\n      const index = this.indexOf(this.treeWalker.currentNode.nodeValue);\n      if (index === -1) {\n        continue;\n      }\n      const range = this.doc.createRange();\n      range.setStart(this.treeWalker.currentNode, index);\n      range.setEnd(this.treeWalker.currentNode, index + this.tuiHighlight.length);\n      const hostRect = this.el.nativeElement.getBoundingClientRect();\n      const {\n        left,\n        top,\n        width,\n        height\n      } = range.getBoundingClientRect();\n      const {\n        style\n      } = this.highlight;\n      style.background = this.tuiHighlightColor;\n      style.left = tuiPx(left - hostRect.left);\n      style.top = tuiPx(top - hostRect.top);\n      style.width = tuiPx(width);\n      style.height = tuiPx(height);\n      style.display = 'block';\n      return;\n    } while (this.treeWalker.nextNode());\n  }\n  indexOf(source) {\n    return !source || !this.tuiHighlight ? -1 : source.toLowerCase().indexOf(this.tuiHighlight.toLowerCase());\n  }\n  setUpHighlight() {\n    const highlight = this.renderer.createElement('div');\n    const {\n      style\n    } = highlight;\n    style.background = this.tuiHighlightColor;\n    style.zIndex = '-1';\n    style.position = 'absolute';\n    this.renderer.appendChild(this.el.nativeElement, highlight);\n    return highlight;\n  }\n}\nTuiHighlightDirective.ɵfac = function TuiHighlightDirective_Factory(t) {\n  return new (t || TuiHighlightDirective)(i0.ɵɵdirectiveInject(DOCUMENT), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(Renderer2), i0.ɵɵdirectiveInject(TuiResizeService));\n};\nTuiHighlightDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiHighlightDirective,\n  selectors: [[\"\", \"tuiHighlight\", \"\"]],\n  hostVars: 4,\n  hostBindings: function TuiHighlightDirective_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"position\", \"relative\")(\"z-index\", 0);\n    }\n  },\n  inputs: {\n    tuiHighlight: \"tuiHighlight\",\n    tuiHighlightColor: \"tuiHighlightColor\"\n  },\n  features: [i0.ɵɵProvidersFeature([TuiDestroyService, TuiResizeService]), i0.ɵɵNgOnChangesFeature]\n});\n__decorate([tuiDefaultProp()], TuiHighlightDirective.prototype, \"tuiHighlight\", void 0);\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiHighlightDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiHighlight]',\n      host: {\n        '[style.position]': '\"relative\"',\n        '[style.zIndex]': '0'\n      },\n      providers: [TuiDestroyService, TuiResizeService]\n    }]\n  }], function () {\n    return [{\n      type: Document,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: i0.ElementRef,\n      decorators: [{\n        type: Inject,\n        args: [ElementRef]\n      }]\n    }, {\n      type: i0.Renderer2,\n      decorators: [{\n        type: Inject,\n        args: [Renderer2]\n      }]\n    }, {\n      type: i1.Observable,\n      decorators: [{\n        type: Inject,\n        args: [TuiResizeService]\n      }]\n    }];\n  }, {\n    tuiHighlight: [{\n      type: Input\n    }],\n    tuiHighlightColor: [{\n      type: Input\n    }]\n  });\n})();\nclass TuiHighlightModule {}\nTuiHighlightModule.ɵfac = function TuiHighlightModule_Factory(t) {\n  return new (t || TuiHighlightModule)();\n};\nTuiHighlightModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: TuiHighlightModule\n});\nTuiHighlightModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiHighlightModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [TuiHighlightDirective],\n      exports: [TuiHighlightDirective]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiHighlightDirective, TuiHighlightModule };","map":{"version":3,"names":["__decorate","DOCUMENT","i0","ElementRef","Renderer2","Directive","Inject","Input","NgModule","svgNodeFilter","tuiPx","TuiResizeService","TuiDestroyService","tuiDefaultProp","i1","TuiHighlightDirective","constructor","doc","el","renderer","resize$","highlight","setUpHighlight","treeWalker","createTreeWalker","nativeElement","NodeFilter","SHOW_TEXT","tuiHighlight","tuiHighlightColor","subscribe","updateStyles","match","indexOf","textContent","ngOnChanges","style","display","currentNode","index","nodeValue","range","createRange","setStart","setEnd","length","hostRect","getBoundingClientRect","left","top","width","height","background","nextNode","source","toLowerCase","createElement","zIndex","position","appendChild","ɵfac","ɵdir","prototype","type","args","selector","host","providers","Document","decorators","Observable","TuiHighlightModule","ɵmod","ɵinj","declarations","exports"],"sources":["C:/Users/denis/PycharmProjects/example_project/frontend/node_modules/@taiga-ui/kit/fesm2015/taiga-ui-kit-directives-highlight.js"],"sourcesContent":["import { __decorate } from 'tslib';\nimport { DOCUMENT } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { ElementRef, Renderer2, Directive, Inject, Input, NgModule } from '@angular/core';\nimport { svgNodeFilter, tuiPx, TuiResizeService, TuiDestroyService, tuiDefaultProp } from '@taiga-ui/cdk';\nimport * as i1 from 'rxjs';\n\nclass TuiHighlightDirective {\n    constructor(doc, el, renderer, resize$) {\n        this.doc = doc;\n        this.el = el;\n        this.renderer = renderer;\n        this.highlight = this.setUpHighlight();\n        this.treeWalker = this.doc.createTreeWalker(this.el.nativeElement, NodeFilter.SHOW_TEXT, svgNodeFilter);\n        this.tuiHighlight = '';\n        this.tuiHighlightColor = 'var(--tui-selection)';\n        resize$.subscribe(() => {\n            this.updateStyles();\n        });\n    }\n    get match() {\n        return this.indexOf(this.el.nativeElement.textContent) !== -1;\n    }\n    ngOnChanges() {\n        this.updateStyles();\n    }\n    updateStyles() {\n        this.highlight.style.display = 'none';\n        if (!this.match) {\n            return;\n        }\n        this.treeWalker.currentNode = this.el.nativeElement;\n        do {\n            const index = this.indexOf(this.treeWalker.currentNode.nodeValue);\n            if (index === -1) {\n                continue;\n            }\n            const range = this.doc.createRange();\n            range.setStart(this.treeWalker.currentNode, index);\n            range.setEnd(this.treeWalker.currentNode, index + this.tuiHighlight.length);\n            const hostRect = this.el.nativeElement.getBoundingClientRect();\n            const { left, top, width, height } = range.getBoundingClientRect();\n            const { style } = this.highlight;\n            style.background = this.tuiHighlightColor;\n            style.left = tuiPx(left - hostRect.left);\n            style.top = tuiPx(top - hostRect.top);\n            style.width = tuiPx(width);\n            style.height = tuiPx(height);\n            style.display = 'block';\n            return;\n        } while (this.treeWalker.nextNode());\n    }\n    indexOf(source) {\n        return !source || !this.tuiHighlight\n            ? -1\n            : source.toLowerCase().indexOf(this.tuiHighlight.toLowerCase());\n    }\n    setUpHighlight() {\n        const highlight = this.renderer.createElement('div');\n        const { style } = highlight;\n        style.background = this.tuiHighlightColor;\n        style.zIndex = '-1';\n        style.position = 'absolute';\n        this.renderer.appendChild(this.el.nativeElement, highlight);\n        return highlight;\n    }\n}\nTuiHighlightDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiHighlightDirective, deps: [{ token: DOCUMENT }, { token: ElementRef }, { token: Renderer2 }, { token: TuiResizeService }], target: i0.ɵɵFactoryTarget.Directive });\nTuiHighlightDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiHighlightDirective, selector: \"[tuiHighlight]\", inputs: { tuiHighlight: \"tuiHighlight\", tuiHighlightColor: \"tuiHighlightColor\" }, host: { properties: { \"style.position\": \"\\\"relative\\\"\", \"style.zIndex\": \"0\" } }, providers: [TuiDestroyService, TuiResizeService], usesOnChanges: true, ngImport: i0 });\n__decorate([\n    tuiDefaultProp()\n], TuiHighlightDirective.prototype, \"tuiHighlight\", void 0);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiHighlightDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiHighlight]',\n                    host: {\n                        '[style.position]': '\"relative\"',\n                        '[style.zIndex]': '0',\n                    },\n                    providers: [TuiDestroyService, TuiResizeService],\n                }]\n        }], ctorParameters: function () { return [{ type: Document, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: i0.ElementRef, decorators: [{\n                    type: Inject,\n                    args: [ElementRef]\n                }] }, { type: i0.Renderer2, decorators: [{\n                    type: Inject,\n                    args: [Renderer2]\n                }] }, { type: i1.Observable, decorators: [{\n                    type: Inject,\n                    args: [TuiResizeService]\n                }] }]; }, propDecorators: { tuiHighlight: [{\n                type: Input\n            }], tuiHighlightColor: [{\n                type: Input\n            }] } });\n\nclass TuiHighlightModule {\n}\nTuiHighlightModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiHighlightModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nTuiHighlightModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiHighlightModule, declarations: [TuiHighlightDirective], exports: [TuiHighlightDirective] });\nTuiHighlightModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiHighlightModule });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiHighlightModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [TuiHighlightDirective],\n                    exports: [TuiHighlightDirective],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiHighlightDirective, TuiHighlightModule };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}