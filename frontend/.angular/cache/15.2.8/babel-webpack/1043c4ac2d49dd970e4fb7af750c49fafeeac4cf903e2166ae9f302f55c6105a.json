{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { ElementRef, Directive, Inject, Output, HostListener, NgModule } from '@angular/core';\nimport { USER_AGENT } from '@ng-web-apis/common';\nimport { tuiIsFirefox } from '@taiga-ui/cdk';\nimport { BehaviorSubject } from 'rxjs';\nimport { distinctUntilChanged, skip } from 'rxjs/operators';\nclass TuiPresentDirective {\n  constructor({\n    nativeElement\n  }, userAgent) {\n    this.visibility$ = new BehaviorSubject(false);\n    this.tuiPresentChange = this.visibility$.pipe(distinctUntilChanged(), skip(1));\n    if (tuiIsFirefox(userAgent)) {\n      return;\n    }\n    const observer = new MutationObserver(() => {\n      if (!nativeElement.offsetParent && nativeElement.offsetWidth === 0 && nativeElement.offsetHeight === 0) {\n        this.visibility$.next(false);\n      }\n    });\n    observer.observe(nativeElement, {\n      attributes: true,\n      attributeFilter: ['style', 'class']\n    });\n  }\n  /**\n   * Someday animationcancel would work and mutation observer would not be needed:\n   * https://drafts.csswg.org/css-animations/#eventdef-animationevent-animationcancel\n   * It would also trigger on CSS like display: none on parent nodes which is awesome\n   * but currently only works in Firefox\n   * ___\n   * TODO: remove MutationObserver when we bump versions of supported browsers:\n   *** Safari 12+\n   *** Chrome 83+\n   * See: {@link https://caniuse.com/mdn-api_window_animationcancel_event}\n   */\n  onAnimation(visibility) {\n    this.visibility$.next(visibility);\n  }\n  ngOnDestroy() {\n    this.visibility$.next(false);\n  }\n}\nTuiPresentDirective.ɵfac = function TuiPresentDirective_Factory(t) {\n  return new (t || TuiPresentDirective)(i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(USER_AGENT));\n};\nTuiPresentDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiPresentDirective,\n  selectors: [[\"\", \"tuiPresentChange\", \"\"]],\n  hostVars: 2,\n  hostBindings: function TuiPresentDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"animationcancel.self\", function TuiPresentDirective_animationcancel_self_HostBindingHandler() {\n        return ctx.onAnimation(false);\n      })(\"animationstart.self\", function TuiPresentDirective_animationstart_self_HostBindingHandler() {\n        return ctx.onAnimation(true);\n      });\n    }\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"animation\", \"tuiPresent 1s infinite\");\n    }\n  },\n  outputs: {\n    tuiPresentChange: \"tuiPresentChange\"\n  }\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiPresentDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiPresentChange]',\n      host: {\n        '[style.animation]': '\"tuiPresent 1s infinite\"'\n      }\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef,\n      decorators: [{\n        type: Inject,\n        args: [ElementRef]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [USER_AGENT]\n      }]\n    }];\n  }, {\n    tuiPresentChange: [{\n      type: Output\n    }],\n    onAnimation: [{\n      type: HostListener,\n      args: ['animationcancel.self', ['false']]\n    }, {\n      type: HostListener,\n      args: ['animationstart.self', ['true']]\n    }]\n  });\n})();\nclass TuiPresentModule {}\nTuiPresentModule.ɵfac = function TuiPresentModule_Factory(t) {\n  return new (t || TuiPresentModule)();\n};\nTuiPresentModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: TuiPresentModule\n});\nTuiPresentModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiPresentModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [TuiPresentDirective],\n      exports: [TuiPresentDirective]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiPresentDirective, TuiPresentModule };","map":{"version":3,"names":["i0","ElementRef","Directive","Inject","Output","HostListener","NgModule","USER_AGENT","tuiIsFirefox","BehaviorSubject","distinctUntilChanged","skip","TuiPresentDirective","constructor","nativeElement","userAgent","visibility$","tuiPresentChange","pipe","observer","MutationObserver","offsetParent","offsetWidth","offsetHeight","next","observe","attributes","attributeFilter","onAnimation","visibility","ngOnDestroy","ɵfac","ɵdir","type","args","selector","host","decorators","undefined","TuiPresentModule","ɵmod","ɵinj","declarations","exports"],"sources":["C:/Users/denis/PycharmProjects/example_project/frontend/node_modules/@taiga-ui/kit/fesm2015/taiga-ui-kit-directives-present.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { ElementRef, Directive, Inject, Output, HostListener, NgModule } from '@angular/core';\nimport { USER_AGENT } from '@ng-web-apis/common';\nimport { tuiIsFirefox } from '@taiga-ui/cdk';\nimport { BehaviorSubject } from 'rxjs';\nimport { distinctUntilChanged, skip } from 'rxjs/operators';\n\nclass TuiPresentDirective {\n    constructor({ nativeElement }, userAgent) {\n        this.visibility$ = new BehaviorSubject(false);\n        this.tuiPresentChange = this.visibility$.pipe(distinctUntilChanged(), skip(1));\n        if (tuiIsFirefox(userAgent)) {\n            return;\n        }\n        const observer = new MutationObserver(() => {\n            if (!nativeElement.offsetParent &&\n                nativeElement.offsetWidth === 0 &&\n                nativeElement.offsetHeight === 0) {\n                this.visibility$.next(false);\n            }\n        });\n        observer.observe(nativeElement, {\n            attributes: true,\n            attributeFilter: ['style', 'class'],\n        });\n    }\n    /**\n     * Someday animationcancel would work and mutation observer would not be needed:\n     * https://drafts.csswg.org/css-animations/#eventdef-animationevent-animationcancel\n     * It would also trigger on CSS like display: none on parent nodes which is awesome\n     * but currently only works in Firefox\n     * ___\n     * TODO: remove MutationObserver when we bump versions of supported browsers:\n     *** Safari 12+\n     *** Chrome 83+\n     * See: {@link https://caniuse.com/mdn-api_window_animationcancel_event}\n     */\n    onAnimation(visibility) {\n        this.visibility$.next(visibility);\n    }\n    ngOnDestroy() {\n        this.visibility$.next(false);\n    }\n}\nTuiPresentDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiPresentDirective, deps: [{ token: ElementRef }, { token: USER_AGENT }], target: i0.ɵɵFactoryTarget.Directive });\nTuiPresentDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiPresentDirective, selector: \"[tuiPresentChange]\", outputs: { tuiPresentChange: \"tuiPresentChange\" }, host: { listeners: { \"animationcancel.self\": \"onAnimation(false)\", \"animationstart.self\": \"onAnimation(true)\" }, properties: { \"style.animation\": \"\\\"tuiPresent 1s infinite\\\"\" } }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiPresentDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiPresentChange]',\n                    host: {\n                        '[style.animation]': '\"tuiPresent 1s infinite\"',\n                    },\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef, decorators: [{\n                    type: Inject,\n                    args: [ElementRef]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [USER_AGENT]\n                }] }]; }, propDecorators: { tuiPresentChange: [{\n                type: Output\n            }], onAnimation: [{\n                type: HostListener,\n                args: ['animationcancel.self', ['false']]\n            }, {\n                type: HostListener,\n                args: ['animationstart.self', ['true']]\n            }] } });\n\nclass TuiPresentModule {\n}\nTuiPresentModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiPresentModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nTuiPresentModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiPresentModule, declarations: [TuiPresentDirective], exports: [TuiPresentDirective] });\nTuiPresentModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiPresentModule });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiPresentModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [TuiPresentDirective],\n                    exports: [TuiPresentDirective],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiPresentDirective, TuiPresentModule };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}