{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { ViewContainerRef, TemplateRef, Directive, Inject, Input, NgModule } from '@angular/core';\nimport { Subject, from, of } from 'rxjs';\nimport { concatMap, delay, takeUntil } from 'rxjs/operators';\nclass TuiForAsyncDirective {\n  constructor(view, template) {\n    this.view = view;\n    this.template = template;\n    this.destroy$ = new Subject();\n    this.tuiForAsyncTimeout = 10;\n  }\n  ngOnChanges() {\n    this.clearViewForOldNodes();\n    this.createAsyncViewForNewNodes();\n  }\n  ngOnDestroy() {\n    this.clearViewForOldNodes();\n    this.destroy$.complete();\n  }\n  createAsyncViewForNewNodes() {\n    from(this.iterableValues).pipe(concatMap(entry => this.tuiForAsyncTimeout > 0 ? of(entry).pipe(delay(this.tuiForAsyncTimeout)) : of(entry)), takeUntil(this.destroy$)).subscribe(([index, item]) => this.createEmbeddedView(item, index));\n  }\n  get iterableValues() {\n    var _a;\n    return ((_a = this.tuiForAsyncOf) !== null && _a !== void 0 ? _a : []).entries();\n  }\n  createEmbeddedView(item, index) {\n    this.view.createEmbeddedView(this.template, {\n      $implicit: item,\n      index\n    }, index).detectChanges();\n  }\n  clearViewForOldNodes() {\n    this.destroy$.next();\n    this.view.clear();\n  }\n}\nTuiForAsyncDirective.ɵfac = function TuiForAsyncDirective_Factory(t) {\n  return new (t || TuiForAsyncDirective)(i0.ɵɵdirectiveInject(ViewContainerRef), i0.ɵɵdirectiveInject(TemplateRef));\n};\nTuiForAsyncDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiForAsyncDirective,\n  selectors: [[\"\", \"tuiForAsync\", \"\", \"tuiForAsyncOf\", \"\"]],\n  inputs: {\n    tuiForAsyncOf: \"tuiForAsyncOf\",\n    tuiForAsyncTimeout: \"tuiForAsyncTimeout\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiForAsyncDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiForAsync][tuiForAsyncOf]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ViewContainerRef,\n      decorators: [{\n        type: Inject,\n        args: [ViewContainerRef]\n      }]\n    }, {\n      type: i0.TemplateRef,\n      decorators: [{\n        type: Inject,\n        args: [TemplateRef]\n      }]\n    }];\n  }, {\n    tuiForAsyncOf: [{\n      type: Input\n    }],\n    tuiForAsyncTimeout: [{\n      type: Input\n    }]\n  });\n})();\n\n/**\n * @experimental\n */\nclass TuiForAsyncModule {}\nTuiForAsyncModule.ɵfac = function TuiForAsyncModule_Factory(t) {\n  return new (t || TuiForAsyncModule)();\n};\nTuiForAsyncModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: TuiForAsyncModule\n});\nTuiForAsyncModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiForAsyncModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [TuiForAsyncDirective],\n      exports: [TuiForAsyncDirective]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiForAsyncDirective, TuiForAsyncModule };","map":{"version":3,"names":["i0","ViewContainerRef","TemplateRef","Directive","Inject","Input","NgModule","Subject","from","of","concatMap","delay","takeUntil","TuiForAsyncDirective","constructor","view","template","destroy$","tuiForAsyncTimeout","ngOnChanges","clearViewForOldNodes","createAsyncViewForNewNodes","ngOnDestroy","complete","iterableValues","pipe","entry","subscribe","index","item","createEmbeddedView","_a","tuiForAsyncOf","entries","$implicit","detectChanges","next","clear","ɵfac","ɵdir","type","args","selector","decorators","TuiForAsyncModule","ɵmod","ɵinj","declarations","exports"],"sources":["C:/Users/denis/PycharmProjects/example_project/frontend/node_modules/@taiga-ui/cdk/fesm2015/taiga-ui-cdk-directives-for-async.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { ViewContainerRef, TemplateRef, Directive, Inject, Input, NgModule } from '@angular/core';\nimport { Subject, from, of } from 'rxjs';\nimport { concatMap, delay, takeUntil } from 'rxjs/operators';\n\nclass TuiForAsyncDirective {\n    constructor(view, template) {\n        this.view = view;\n        this.template = template;\n        this.destroy$ = new Subject();\n        this.tuiForAsyncTimeout = 10;\n    }\n    ngOnChanges() {\n        this.clearViewForOldNodes();\n        this.createAsyncViewForNewNodes();\n    }\n    ngOnDestroy() {\n        this.clearViewForOldNodes();\n        this.destroy$.complete();\n    }\n    createAsyncViewForNewNodes() {\n        from(this.iterableValues)\n            .pipe(concatMap(entry => this.tuiForAsyncTimeout > 0\n            ? of(entry).pipe(delay(this.tuiForAsyncTimeout))\n            : of(entry)), takeUntil(this.destroy$))\n            .subscribe(([index, item]) => this.createEmbeddedView(item, index));\n    }\n    get iterableValues() {\n        var _a;\n        return ((_a = this.tuiForAsyncOf) !== null && _a !== void 0 ? _a : []).entries();\n    }\n    createEmbeddedView(item, index) {\n        this.view\n            .createEmbeddedView(this.template, { $implicit: item, index }, index)\n            .detectChanges();\n    }\n    clearViewForOldNodes() {\n        this.destroy$.next();\n        this.view.clear();\n    }\n}\nTuiForAsyncDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiForAsyncDirective, deps: [{ token: ViewContainerRef }, { token: TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });\nTuiForAsyncDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiForAsyncDirective, selector: \"[tuiForAsync][tuiForAsyncOf]\", inputs: { tuiForAsyncOf: \"tuiForAsyncOf\", tuiForAsyncTimeout: \"tuiForAsyncTimeout\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiForAsyncDirective, decorators: [{\n            type: Directive,\n            args: [{ selector: '[tuiForAsync][tuiForAsyncOf]' }]\n        }], ctorParameters: function () { return [{ type: i0.ViewContainerRef, decorators: [{\n                    type: Inject,\n                    args: [ViewContainerRef]\n                }] }, { type: i0.TemplateRef, decorators: [{\n                    type: Inject,\n                    args: [TemplateRef]\n                }] }]; }, propDecorators: { tuiForAsyncOf: [{\n                type: Input\n            }], tuiForAsyncTimeout: [{\n                type: Input\n            }] } });\n\n/**\n * @experimental\n */\nclass TuiForAsyncModule {\n}\nTuiForAsyncModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiForAsyncModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nTuiForAsyncModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiForAsyncModule, declarations: [TuiForAsyncDirective], exports: [TuiForAsyncDirective] });\nTuiForAsyncModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiForAsyncModule });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiForAsyncModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [TuiForAsyncDirective],\n                    exports: [TuiForAsyncDirective],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiForAsyncDirective, TuiForAsyncModule };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}