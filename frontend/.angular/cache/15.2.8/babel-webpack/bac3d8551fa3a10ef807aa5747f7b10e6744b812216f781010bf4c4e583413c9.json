{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { InjectionToken, ElementRef, INJECTOR, Directive, Inject, Input, Optional, SkipSelf, forwardRef, Component, ChangeDetectionStrategy, Self, HostBinding, HostListener, ViewContainerRef, NgModule } from '@angular/core';\nimport { WINDOW } from '@ng-web-apis/common';\nimport * as i2 from '@taiga-ui/cdk';\nimport { TuiDropdownPortalService, tuiPure, TuiHoveredService, tuiDefaultProp, tuiPx, tuiGetClosestFocusable, TuiDestroyService, AbstractTuiPortalHostComponent, EMPTY_CLIENT_RECT, tuiPointToClientRect, TuiActiveZoneDirective, ALWAYS_TRUE_HANDLER, tuiIsTextNode, tuiIsString, tuiIsElement, tuiGetNativeFocused, tuiIsTextfield, CHAR_ZERO_WIDTH_SPACE, CHAR_NO_BREAK_SPACE, TUI_RANGE, TuiActiveZoneModule, TuiOverscrollModule, TuiHoveredModule } from '@taiga-ui/cdk';\nimport * as i1$2 from '@taiga-ui/core/abstract';\nimport { tuiAsRectAccessor, tuiAsVehicle, TuiDriver, tuiAsDriver, TuiRectAccessor, tuiPositionAccessorFor, tuiRectAccessorFor, AbstractTuiDriverDirective, TuiVehicle, TuiPositionAccessor, tuiFallbackRectAccessor, tuiAsPositionAccessor } from '@taiga-ui/core/abstract';\nimport { tuiDropdownAnimation } from '@taiga-ui/core/animations';\nimport * as i9 from '@taiga-ui/core/services';\nimport { TuiPositionService, TuiVisualViewportService } from '@taiga-ui/core/services';\nimport { TUI_ANIMATION_OPTIONS, TUI_VIEWPORT, TUI_SELECTION_STREAM } from '@taiga-ui/core/tokens';\nimport { switchMap, delay, tap, share, map, takeUntil, distinctUntilChanged } from 'rxjs/operators';\nimport { __decorate } from 'tslib';\nimport { tuiCheckFixedPosition, tuiOverrideOptions, tuiGetWordRange } from '@taiga-ui/core/utils';\nimport * as i4 from '@tinkoff/ng-polymorpheus';\nimport { PolymorpheusComponent, PolymorpheusModule } from '@tinkoff/ng-polymorpheus';\nimport * as i1 from 'rxjs';\nimport { Subject, merge, of, BehaviorSubject, combineLatest } from 'rxjs';\nimport * as i1$1 from '@taiga-ui/core/components/scrollbar';\nimport { TuiScrollbarModule } from '@taiga-ui/core/components/scrollbar';\nimport * as i3 from '@taiga-ui/core/directives/mode';\nimport { TuiModeModule } from '@taiga-ui/core/directives/mode';\nimport { shouldCall } from '@tinkoff/ng-event-plugins';\nimport { DOCUMENT } from '@angular/common';\n\n/**\n * A component to display a dropdown\n */\nfunction TuiDropdownComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const text_r2 = ctx.polymorpheusOutlet;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", text_r2, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    $implicit: a0\n  };\n};\nconst TUI_DROPDOWN_COMPONENT = new InjectionToken(`[TUI_DROPDOWN_COMPONENT]`, {\n  factory: () => TuiDropdownComponent\n});\nclass TuiDropdownDirective {\n  constructor(el, hapica, injector, dropdownService) {\n    this.el = el;\n    this.hapica = hapica;\n    this.injector = injector;\n    this.dropdownService = dropdownService;\n    this.dropdownBoxRef = null;\n    this.type = 'dropdown';\n    this.component = new PolymorpheusComponent(this.hapica, this.injector);\n  }\n  get position() {\n    return tuiCheckFixedPosition(this.el.nativeElement) ? 'fixed' : 'absolute';\n  }\n  ngAfterViewChecked() {\n    var _a, _b;\n    (_a = this.dropdownBoxRef) === null || _a === void 0 ? void 0 : _a.changeDetectorRef.detectChanges();\n    (_b = this.dropdownBoxRef) === null || _b === void 0 ? void 0 : _b.changeDetectorRef.markForCheck();\n  }\n  ngOnChanges() {\n    if (!this.content) {\n      this.toggle(false);\n    }\n  }\n  ngOnDestroy() {\n    this.toggle(false);\n  }\n  getClientRect() {\n    return this.el.nativeElement.getBoundingClientRect();\n  }\n  toggle(show) {\n    if (show && this.content && !this.dropdownBoxRef) {\n      this.dropdownBoxRef = this.dropdownService.add(this.component);\n    } else if (!show && this.dropdownBoxRef) {\n      this.dropdownService.remove(this.dropdownBoxRef);\n      this.dropdownBoxRef = null;\n    }\n  }\n}\nTuiDropdownDirective.ɵfac = function TuiDropdownDirective_Factory(t) {\n  return new (t || TuiDropdownDirective)(i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(TUI_DROPDOWN_COMPONENT), i0.ɵɵdirectiveInject(INJECTOR), i0.ɵɵdirectiveInject(TuiDropdownPortalService));\n};\nTuiDropdownDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownDirective,\n  selectors: [[\"\", \"tuiDropdown\", \"\", 5, \"ng-container\"]],\n  inputs: {\n    content: [\"tuiDropdown\", \"content\"]\n  },\n  exportAs: [\"tuiDropdown\"],\n  features: [i0.ɵɵProvidersFeature([tuiAsRectAccessor(TuiDropdownDirective), tuiAsVehicle(TuiDropdownDirective)]), i0.ɵɵNgOnChangesFeature]\n});\n__decorate([tuiPure], TuiDropdownDirective.prototype, \"position\", null);\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdown]:not(ng-container)',\n      exportAs: 'tuiDropdown',\n      providers: [tuiAsRectAccessor(TuiDropdownDirective), tuiAsVehicle(TuiDropdownDirective)]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef,\n      decorators: [{\n        type: Inject,\n        args: [ElementRef]\n      }]\n    }, {\n      type: i0.Type,\n      decorators: [{\n        type: Inject,\n        args: [TUI_DROPDOWN_COMPONENT]\n      }]\n    }, {\n      type: i0.Injector,\n      decorators: [{\n        type: Inject,\n        args: [INJECTOR]\n      }]\n    }, {\n      type: i2.TuiDropdownPortalService,\n      decorators: [{\n        type: Inject,\n        args: [TuiDropdownPortalService]\n      }]\n    }];\n  }, {\n    content: [{\n      type: Input,\n      args: ['tuiDropdown']\n    }],\n    position: []\n  });\n})();\n\n/** Default values for hint options */\nconst TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS = {\n  showDelay: 200,\n  hideDelay: 500\n};\n/**\n * Default parameters for dropdown hover directive\n */\nconst TUI_DROPDOWN_HOVER_OPTIONS = new InjectionToken('[TUI_DROPDOWN_HOVER_OPTIONS]', {\n  factory: () => TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS\n});\nconst tuiDropdownHoverOptionsProvider = options => ({\n  provide: TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS,\n  useValue: Object.assign(Object.assign({}, TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS), options)\n});\nclass TuiDropdownHoverDirective extends TuiDriver {\n  constructor(hovered$, options) {\n    super(subscriber => this.stream$.subscribe(subscriber));\n    this.hovered$ = hovered$;\n    this.options = options;\n    this.toggle$ = new Subject();\n    this.stream$ = merge(this.toggle$, this.hovered$).pipe(switchMap(visible => of(visible).pipe(delay(visible ? this.showDelay : this.hideDelay))), tap(visible => {\n      this.hovered = visible;\n    }), share());\n    this.showDelay = this.options.showDelay;\n    this.hideDelay = this.options.hideDelay;\n    this.hovered = false;\n    this.type = 'dropdown';\n  }\n  toggle(visible) {\n    this.toggle$.next(visible);\n  }\n}\nTuiDropdownHoverDirective.ɵfac = function TuiDropdownHoverDirective_Factory(t) {\n  return new (t || TuiDropdownHoverDirective)(i0.ɵɵdirectiveInject(TuiHoveredService), i0.ɵɵdirectiveInject(TUI_DROPDOWN_HOVER_OPTIONS));\n};\nTuiDropdownHoverDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownHoverDirective,\n  selectors: [[\"\", \"tuiDropdownHover\", \"\", 5, \"ng-container\"]],\n  inputs: {\n    showDelay: [\"tuiDropdownShowDelay\", \"showDelay\"],\n    hideDelay: [\"tuiDropdownHideDelay\", \"hideDelay\"]\n  },\n  features: [i0.ɵɵProvidersFeature([tuiAsDriver(TuiDropdownHoverDirective), TuiHoveredService]), i0.ɵɵInheritDefinitionFeature]\n});\n__decorate([tuiDefaultProp()], TuiDropdownHoverDirective.prototype, \"showDelay\", void 0);\n__decorate([tuiDefaultProp()], TuiDropdownHoverDirective.prototype, \"hideDelay\", void 0);\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownHoverDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdownHover]:not(ng-container)',\n      providers: [tuiAsDriver(TuiDropdownHoverDirective), TuiHoveredService]\n    }]\n  }], function () {\n    return [{\n      type: i1.Observable,\n      decorators: [{\n        type: Inject,\n        args: [TuiHoveredService]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [TUI_DROPDOWN_HOVER_OPTIONS]\n      }]\n    }];\n  }, {\n    showDelay: [{\n      type: Input,\n      args: ['tuiDropdownShowDelay']\n    }],\n    hideDelay: [{\n      type: Input,\n      args: ['tuiDropdownHideDelay']\n    }]\n  });\n})();\n\n/** Default values for dropdown options */\nconst TUI_DROPDOWN_DEFAULT_OPTIONS = {\n  align: 'left',\n  direction: null,\n  limitWidth: 'auto',\n  maxHeight: 400,\n  minHeight: 80,\n  offset: 4\n};\n/**\n * Default parameters for dropdown directive\n */\nconst TUI_DROPDOWN_OPTIONS = new InjectionToken('[TUI_DROPDOWN_OPTIONS]', {\n  factory: () => TUI_DROPDOWN_DEFAULT_OPTIONS\n});\nconst tuiDropdownOptionsProvider = override => ({\n  provide: TUI_DROPDOWN_OPTIONS,\n  deps: [[new Optional(), TuiDropdownOptionsDirective], [new SkipSelf(), TUI_DROPDOWN_OPTIONS]],\n  useFactory: tuiOverrideOptions(override)\n});\nclass TuiDropdownOptionsDirective {\n  constructor(options) {\n    this.options = options;\n    this.align = this.options.align;\n    this.direction = this.options.direction;\n    this.limitWidth = this.options.limitWidth;\n    this.minHeight = this.options.minHeight;\n    this.maxHeight = this.options.maxHeight;\n    this.offset = this.options.offset;\n  }\n}\nTuiDropdownOptionsDirective.ɵfac = function TuiDropdownOptionsDirective_Factory(t) {\n  return new (t || TuiDropdownOptionsDirective)(i0.ɵɵdirectiveInject(TUI_DROPDOWN_OPTIONS, 4));\n};\nTuiDropdownOptionsDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownOptionsDirective,\n  selectors: [[\"\", \"tuiDropdownAlign\", \"\"], [\"\", \"tuiDropdownDirection\", \"\"], [\"\", \"tuiDropdownLimitWidth\", \"\"], [\"\", \"tuiDropdownMinHeight\", \"\"], [\"\", \"tuiDropdownMaxHeight\", \"\"], [\"\", \"tuiDropdownOffset\", \"\"]],\n  inputs: {\n    align: [\"tuiDropdownAlign\", \"align\"],\n    direction: [\"tuiDropdownDirection\", \"direction\"],\n    limitWidth: [\"tuiDropdownLimitWidth\", \"limitWidth\"],\n    minHeight: [\"tuiDropdownMinHeight\", \"minHeight\"],\n    maxHeight: [\"tuiDropdownMaxHeight\", \"maxHeight\"],\n    offset: [\"tuiDropdownOffset\", \"offset\"]\n  },\n  features: [i0.ɵɵProvidersFeature([{\n    provide: TUI_DROPDOWN_OPTIONS,\n    useExisting: forwardRef(() => TuiDropdownOptionsDirective)\n  }])]\n});\n__decorate([tuiDefaultProp()], TuiDropdownOptionsDirective.prototype, \"align\", void 0);\n__decorate([tuiDefaultProp()], TuiDropdownOptionsDirective.prototype, \"direction\", void 0);\n__decorate([tuiDefaultProp()], TuiDropdownOptionsDirective.prototype, \"limitWidth\", void 0);\n__decorate([tuiDefaultProp()], TuiDropdownOptionsDirective.prototype, \"minHeight\", void 0);\n__decorate([tuiDefaultProp()], TuiDropdownOptionsDirective.prototype, \"maxHeight\", void 0);\n__decorate([tuiDefaultProp()], TuiDropdownOptionsDirective.prototype, \"offset\", void 0);\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownOptionsDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdownAlign], [tuiDropdownDirection], [tuiDropdownLimitWidth], [tuiDropdownMinHeight], [tuiDropdownMaxHeight], [tuiDropdownOffset]',\n      providers: [{\n        provide: TUI_DROPDOWN_OPTIONS,\n        useExisting: forwardRef(() => TuiDropdownOptionsDirective)\n      }]\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: SkipSelf\n      }, {\n        type: Inject,\n        args: [TUI_DROPDOWN_OPTIONS]\n      }]\n    }];\n  }, {\n    align: [{\n      type: Input,\n      args: ['tuiDropdownAlign']\n    }],\n    direction: [{\n      type: Input,\n      args: ['tuiDropdownDirection']\n    }],\n    limitWidth: [{\n      type: Input,\n      args: ['tuiDropdownLimitWidth']\n    }],\n    minHeight: [{\n      type: Input,\n      args: ['tuiDropdownMinHeight']\n    }],\n    maxHeight: [{\n      type: Input,\n      args: ['tuiDropdownMaxHeight']\n    }],\n    offset: [{\n      type: Input,\n      args: ['tuiDropdownOffset']\n    }]\n  });\n})();\n\n/**\n * @description:\n * This component is used to show template in a portal\n * using default style of white rounded box with a shadow\n */\nclass TuiDropdownComponent {\n  constructor(position$, destroy$, directive, el, host, accessor, win, animationOptions, options, hoverDirective, visualViewportService) {\n    this.directive = directive;\n    this.el = el;\n    this.host = host;\n    this.accessor = accessor;\n    this.win = win;\n    this.animationOptions = animationOptions;\n    this.options = options;\n    this.hoverDirective = hoverDirective;\n    this.dropdownAnimation = Object.assign({\n      value: \"fadeInTop\" /* FadeInTop */\n    }, this.animationOptions);\n    position$.pipe(map(point => this.directive.position === 'fixed' ? visualViewportService.correct(point) : point), takeUntil(destroy$)).subscribe(([top, left]) => {\n      this.update(top, left);\n    });\n    this.updateWidth(this.accessor.getClientRect().width);\n  }\n  ngOnDestroy() {\n    this.onHoveredChange(false);\n  }\n  onHoveredChange(hovered) {\n    if (this.hoverDirective) {\n      this.hoverDirective.toggle(hovered);\n    }\n  }\n  onTopFocus() {\n    this.moveFocusOutside(true);\n  }\n  onBottomFocus() {\n    this.moveFocusOutside(false);\n  }\n  update(top, left) {\n    const {\n      style\n    } = this.el.nativeElement;\n    const {\n      right\n    } = this.el.nativeElement.getBoundingClientRect();\n    const {\n      maxHeight,\n      offset\n    } = this.options;\n    const {\n      innerHeight\n    } = this.win;\n    const {\n      clientRect\n    } = this.host;\n    const {\n      position\n    } = this.directive;\n    const rect = this.accessor.getClientRect();\n    const offsetX = position === 'fixed' ? 0 : -clientRect.left;\n    const offsetY = position === 'fixed' ? 0 : -clientRect.top;\n    top += offsetY;\n    left += offsetX;\n    const isIntersecting = left < rect.right && right > rect.left && top < offsetY + 2 * offset;\n    const available = isIntersecting ? rect.top - 2 * offset : offsetY + innerHeight - top - offset;\n    style.position = position;\n    style.top = tuiPx(Math.max(top, offsetY + offset));\n    style.left = tuiPx(left);\n    style.maxHeight = tuiPx(Math.min(maxHeight, available));\n    style.width = '';\n    style.minWidth = '';\n    this.updateWidth(rect.width);\n  }\n  updateWidth(width) {\n    const {\n      style\n    } = this.el.nativeElement;\n    switch (this.options.limitWidth) {\n      case 'min':\n        style.minWidth = tuiPx(width);\n        break;\n      case 'fixed':\n        style.width = tuiPx(width);\n        break;\n      case 'auto':\n        break;\n    }\n  }\n  moveFocusOutside(previous) {\n    const {\n      nativeElement\n    } = this.directive.el;\n    const {\n      ownerDocument\n    } = nativeElement;\n    const root = ownerDocument ? ownerDocument.body : nativeElement;\n    let focusable = tuiGetClosestFocusable({\n      initial: nativeElement,\n      root,\n      previous\n    });\n    while (focusable !== null && nativeElement.contains(focusable)) {\n      focusable = tuiGetClosestFocusable({\n        initial: focusable,\n        root,\n        previous\n      });\n    }\n    focusable === null || focusable === void 0 ? void 0 : focusable.focus();\n  }\n}\nTuiDropdownComponent.ɵfac = function TuiDropdownComponent_Factory(t) {\n  return new (t || TuiDropdownComponent)(i0.ɵɵdirectiveInject(TuiPositionService), i0.ɵɵdirectiveInject(TuiDestroyService, 2), i0.ɵɵdirectiveInject(TuiDropdownDirective), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(AbstractTuiPortalHostComponent), i0.ɵɵdirectiveInject(TuiRectAccessor), i0.ɵɵdirectiveInject(WINDOW), i0.ɵɵdirectiveInject(TUI_ANIMATION_OPTIONS), i0.ɵɵdirectiveInject(TUI_DROPDOWN_OPTIONS), i0.ɵɵdirectiveInject(TuiDropdownHoverDirective, 8), i0.ɵɵdirectiveInject(TuiVisualViewportService));\n};\nTuiDropdownComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: TuiDropdownComponent,\n  selectors: [[\"tui-dropdown\"]],\n  hostVars: 1,\n  hostBindings: function TuiDropdownComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵsyntheticHostProperty(\"@tuiDropdownAnimation\", ctx.dropdownAnimation);\n    }\n  },\n  features: [i0.ɵɵProvidersFeature([TuiDestroyService, TuiPositionService, tuiPositionAccessorFor('dropdown'), tuiRectAccessorFor('dropdown', TuiDropdownDirective)])],\n  decls: 6,\n  vars: 5,\n  consts: [[\"tuiActiveZone\", \"\", \"tuiOverscroll\", \"all\", 1, \"t-wrapper\", 3, \"tuiMode\", \"tuiHoveredChange\"], [\"activeZone\", \"tuiActiveZone\"], [1, \"t-scroll\"], [\"tabindex\", \"0\", 3, \"focus\"], [\"class\", \"t-primitive\", 4, \"polymorpheusOutlet\", \"polymorpheusOutletContext\"], [1, \"t-primitive\"]],\n  template: function TuiDropdownComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵlistener(\"tuiHoveredChange\", function TuiDropdownComponent_Template_div_tuiHoveredChange_0_listener($event) {\n        return ctx.onHoveredChange($event);\n      });\n      i0.ɵɵelementStart(2, \"tui-scrollbar\", 2)(3, \"div\", 3);\n      i0.ɵɵlistener(\"focus\", function TuiDropdownComponent_Template_div_focus_3_listener() {\n        return ctx.onTopFocus();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, TuiDropdownComponent_div_4_Template, 2, 1, \"div\", 4);\n      i0.ɵɵelementStart(5, \"div\", 3);\n      i0.ɵɵlistener(\"focus\", function TuiDropdownComponent_Template_div_focus_5_listener() {\n        return ctx.onBottomFocus();\n      });\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n      i0.ɵɵproperty(\"tuiMode\", null);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"polymorpheusOutlet\", ctx.directive.content)(\"polymorpheusOutletContext\", i0.ɵɵpureFunction1(3, _c0, _r0));\n    }\n  },\n  dependencies: [i1$1.TuiScrollbarComponent, i2.TuiActiveZoneDirective, i2.TuiOverscrollDirective, i3.TuiModeDirective, i2.TuiHoveredDirective, i4.PolymorpheusOutletDirective],\n  styles: [\"[_nghost-%COMP%]{position:relative;z-index:0;box-shadow:0 1.5rem 1rem #00000008,0 .75rem .75rem #0000000a,0 .25rem .375rem #0000000d;position:absolute;display:flex;background-color:var(--tui-elevation-01);border-radius:var(--tui-radius-m);overflow:hidden;border:1px solid var(--tui-base-04);box-sizing:border-box;max-width:calc(100% - 8px)}.ng-animating[_nghost-%COMP%]{pointer-events:none}[_nghost-%COMP%]:not([style*=\\\"top\\\"]){visibility:hidden}.t-wrapper[_ngcontent-%COMP%]{flex-grow:1;max-width:100%;max-height:inherit;overflow:visible}.t-scroll[_ngcontent-%COMP%]{height:100%}.t-primitive[_ngcontent-%COMP%]{padding:1rem}\"],\n  data: {\n    animation: [tuiDropdownAnimation]\n  }\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownComponent, [{\n    type: Component,\n    args: [{\n      selector: 'tui-dropdown',\n      templateUrl: './dropdown.template.html',\n      styleUrls: ['./dropdown.style.less'],\n      providers: [TuiDestroyService, TuiPositionService, tuiPositionAccessorFor('dropdown'), tuiRectAccessorFor('dropdown', TuiDropdownDirective)],\n      animations: [tuiDropdownAnimation],\n      // @bad TODO: OnPush\n      // eslint-disable-next-line @angular-eslint/prefer-on-push-component-change-detection\n      changeDetection: ChangeDetectionStrategy.Default\n    }]\n  }], function () {\n    return [{\n      type: i1.Observable,\n      decorators: [{\n        type: Inject,\n        args: [TuiPositionService]\n      }]\n    }, {\n      type: i1.Observable,\n      decorators: [{\n        type: Self\n      }, {\n        type: Inject,\n        args: [TuiDestroyService]\n      }]\n    }, {\n      type: TuiDropdownDirective,\n      decorators: [{\n        type: Inject,\n        args: [TuiDropdownDirective]\n      }]\n    }, {\n      type: i0.ElementRef,\n      decorators: [{\n        type: Inject,\n        args: [ElementRef]\n      }]\n    }, {\n      type: i2.AbstractTuiPortalHostComponent,\n      decorators: [{\n        type: Inject,\n        args: [AbstractTuiPortalHostComponent]\n      }]\n    }, {\n      type: i1$2.TuiRectAccessor,\n      decorators: [{\n        type: Inject,\n        args: [TuiRectAccessor]\n      }]\n    }, {\n      type: Window,\n      decorators: [{\n        type: Inject,\n        args: [WINDOW]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [TUI_ANIMATION_OPTIONS]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [TUI_DROPDOWN_OPTIONS]\n      }]\n    }, {\n      type: TuiDropdownHoverDirective,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [TuiDropdownHoverDirective]\n      }]\n    }, {\n      type: i9.TuiVisualViewportService,\n      decorators: [{\n        type: Inject,\n        args: [TuiVisualViewportService]\n      }]\n    }];\n  }, {\n    dropdownAnimation: [{\n      type: HostBinding,\n      args: ['@tuiDropdownAnimation']\n    }]\n  });\n})();\nfunction activeZoneFilter(target) {\n  return !this.activeZone.contains(target);\n}\nclass TuiDropdownContextDirective extends TuiDriver {\n  constructor(activeZone) {\n    super(subscriber => this.stream$.subscribe(subscriber));\n    this.activeZone = activeZone;\n    this.stream$ = new Subject();\n    this.currentRect = EMPTY_CLIENT_RECT;\n    this.type = 'dropdown';\n  }\n  onContextMenu(x, y) {\n    this.currentRect = tuiPointToClientRect(x, y);\n    this.stream$.next(true);\n  }\n  closeDropdown() {\n    this.stream$.next(false);\n  }\n  getClientRect() {\n    return this.currentRect;\n  }\n}\nTuiDropdownContextDirective.ɵfac = function TuiDropdownContextDirective_Factory(t) {\n  return new (t || TuiDropdownContextDirective)(i0.ɵɵdirectiveInject(TuiActiveZoneDirective));\n};\nTuiDropdownContextDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownContextDirective,\n  selectors: [[\"\", \"tuiDropdown\", \"\", \"tuiDropdownContext\", \"\"]],\n  hostBindings: function TuiDropdownContextDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"contextmenu.prevent.stop\", function TuiDropdownContextDirective_contextmenu_prevent_stop_HostBindingHandler($event) {\n        return ctx.onContextMenu($event.clientX, $event.clientY);\n      })(\"click.silent\", function TuiDropdownContextDirective_click_silent_HostBindingHandler($event) {\n        return ctx.closeDropdown($event.target);\n      }, false, i0.ɵɵresolveDocument)(\"contextmenu.capture.silent\", function TuiDropdownContextDirective_contextmenu_capture_silent_HostBindingHandler($event) {\n        return ctx.closeDropdown($event.target);\n      }, false, i0.ɵɵresolveDocument)(\"keydown.esc\", function TuiDropdownContextDirective_keydown_esc_HostBindingHandler($event) {\n        return ctx.closeDropdown($event.currentTarget);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  features: [i0.ɵɵProvidersFeature([TuiActiveZoneDirective, tuiAsDriver(TuiDropdownContextDirective), tuiAsRectAccessor(TuiDropdownContextDirective)]), i0.ɵɵInheritDefinitionFeature]\n});\n__decorate([shouldCall(activeZoneFilter)], TuiDropdownContextDirective.prototype, \"closeDropdown\", null);\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownContextDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdown][tuiDropdownContext]',\n      providers: [TuiActiveZoneDirective, tuiAsDriver(TuiDropdownContextDirective), tuiAsRectAccessor(TuiDropdownContextDirective)]\n    }]\n  }], function () {\n    return [{\n      type: i2.TuiActiveZoneDirective,\n      decorators: [{\n        type: Inject,\n        args: [TuiActiveZoneDirective]\n      }]\n    }];\n  }, {\n    onContextMenu: [{\n      type: HostListener,\n      args: ['contextmenu.prevent.stop', ['$event.clientX', '$event.clientY']]\n    }],\n    closeDropdown: [{\n      type: HostListener,\n      args: ['document:click.silent', ['$event.target']]\n    }, {\n      type: HostListener,\n      args: ['document:contextmenu.capture.silent', ['$event.target']]\n    }, {\n      type: HostListener,\n      args: ['document:keydown.esc', ['$event.currentTarget']]\n    }]\n  });\n})();\nclass TuiDropdownDriverDirective extends AbstractTuiDriverDirective {\n  // TODO: Figure out why this is necessary under nx test runner\n  constructor(destroy$, drivers, vehicles) {\n    super(destroy$, drivers, vehicles);\n    this.type = 'dropdown';\n  }\n}\nTuiDropdownDriverDirective.ɵfac = function TuiDropdownDriverDirective_Factory(t) {\n  return new (t || TuiDropdownDriverDirective)(i0.ɵɵdirectiveInject(TuiDestroyService, 2), i0.ɵɵdirectiveInject(TuiDriver), i0.ɵɵdirectiveInject(TuiVehicle));\n};\nTuiDropdownDriverDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownDriverDirective,\n  selectors: [[\"\", \"tuiDropdown\", \"\"]],\n  features: [i0.ɵɵProvidersFeature([TuiDestroyService]), i0.ɵɵInheritDefinitionFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownDriverDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdown]',\n      providers: [TuiDestroyService]\n    }]\n  }], function () {\n    return [{\n      type: i1.Observable,\n      decorators: [{\n        type: Self\n      }, {\n        type: Inject,\n        args: [TuiDestroyService]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [TuiDriver]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [TuiVehicle]\n      }]\n    }];\n  }, null);\n})();\nclass TuiDropdownHostDirective extends TuiRectAccessor {\n  constructor() {\n    super(...arguments);\n    this.type = 'dropdown';\n  }\n  getClientRect() {\n    var _a;\n    return ((_a = this.tuiDropdownHost) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect()) || EMPTY_CLIENT_RECT;\n  }\n}\nTuiDropdownHostDirective.ɵfac = /* @__PURE__ */function () {\n  let ɵTuiDropdownHostDirective_BaseFactory;\n  return function TuiDropdownHostDirective_Factory(t) {\n    return (ɵTuiDropdownHostDirective_BaseFactory || (ɵTuiDropdownHostDirective_BaseFactory = i0.ɵɵgetInheritedFactory(TuiDropdownHostDirective)))(t || TuiDropdownHostDirective);\n  };\n}();\nTuiDropdownHostDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownHostDirective,\n  selectors: [[\"\", \"tuiDropdown\", \"\", \"tuiDropdownHost\", \"\"]],\n  inputs: {\n    tuiDropdownHost: \"tuiDropdownHost\"\n  },\n  features: [i0.ɵɵProvidersFeature([tuiAsRectAccessor(TuiDropdownHostDirective)]), i0.ɵɵInheritDefinitionFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownHostDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdown][tuiDropdownHost]',\n      providers: [tuiAsRectAccessor(TuiDropdownHostDirective)]\n    }]\n  }], null, {\n    tuiDropdownHost: [{\n      type: Input\n    }]\n  });\n})();\nclass TuiDropdownManualDirective extends TuiDriver {\n  constructor() {\n    super(subscriber => this.stream$.subscribe(subscriber));\n    this.stream$ = new BehaviorSubject(false);\n    this.tuiDropdownManual = false;\n    this.type = 'dropdown';\n  }\n  ngOnChanges() {\n    this.stream$.next(this.tuiDropdownManual);\n  }\n}\nTuiDropdownManualDirective.ɵfac = function TuiDropdownManualDirective_Factory(t) {\n  return new (t || TuiDropdownManualDirective)();\n};\nTuiDropdownManualDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownManualDirective,\n  selectors: [[\"\", \"tuiDropdown\", \"\", \"tuiDropdownManual\", \"\"]],\n  inputs: {\n    tuiDropdownManual: \"tuiDropdownManual\"\n  },\n  features: [i0.ɵɵProvidersFeature([tuiAsDriver(TuiDropdownManualDirective)]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownManualDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdown][tuiDropdownManual]',\n      providers: [tuiAsDriver(TuiDropdownManualDirective)]\n    }]\n  }], function () {\n    return [];\n  }, {\n    tuiDropdownManual: [{\n      type: Input\n    }]\n  });\n})();\nclass TuiDropdownPositionDirective extends TuiPositionAccessor {\n  constructor(options, viewport, accessors, directive) {\n    super();\n    this.options = options;\n    this.viewport = viewport;\n    this.accessors = accessors;\n    this.directive = directive;\n    this.type = 'dropdown';\n  }\n  getPosition({\n    width,\n    height\n  }) {\n    var _a, _b;\n    const hostRect = (_b = (_a = this.accessor) === null || _a === void 0 ? void 0 : _a.getClientRect()) !== null && _b !== void 0 ? _b : EMPTY_CLIENT_RECT;\n    const viewport = this.viewport.getClientRect();\n    const {\n      minHeight,\n      align,\n      direction,\n      offset\n    } = this.options;\n    const previous = this.previous || direction || 'bottom';\n    const right = Math.max(hostRect.right - width, offset);\n    const available = {\n      top: hostRect.top - 2 * offset - viewport.top,\n      bottom: viewport.bottom - hostRect.bottom - 2 * offset\n    };\n    const position = {\n      top: hostRect.top - offset - height,\n      bottom: hostRect.bottom + offset,\n      right,\n      center: hostRect.left + hostRect.width / 2 + width / 2 < viewport.right - offset ? hostRect.left + hostRect.width / 2 - width / 2 : right,\n      left: hostRect.left + width < viewport.right - offset ? hostRect.left : right\n    };\n    const better = available.top > available.bottom ? 'top' : 'bottom';\n    if (available[previous] > minHeight && direction || available[previous] > height) {\n      return [position[previous], position[align]];\n    }\n    this.previous = better;\n    return [position[better], position[align]];\n  }\n  get accessor() {\n    return tuiFallbackRectAccessor('dropdown')(this.accessors, this.directive);\n  }\n}\nTuiDropdownPositionDirective.ɵfac = function TuiDropdownPositionDirective_Factory(t) {\n  return new (t || TuiDropdownPositionDirective)(i0.ɵɵdirectiveInject(TUI_DROPDOWN_OPTIONS), i0.ɵɵdirectiveInject(TUI_VIEWPORT), i0.ɵɵdirectiveInject(TuiRectAccessor), i0.ɵɵdirectiveInject(TuiDropdownDirective));\n};\nTuiDropdownPositionDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownPositionDirective,\n  selectors: [[\"\", \"tuiDropdown\", \"\", 3, \"tuiDropdownCustomPosition\", \"\", 3, \"tuiDropdownSided\", \"\"]],\n  features: [i0.ɵɵProvidersFeature([tuiAsPositionAccessor(TuiDropdownPositionDirective)]), i0.ɵɵInheritDefinitionFeature]\n});\n__decorate([tuiPure], TuiDropdownPositionDirective.prototype, \"accessor\", null);\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownPositionDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdown]:not([tuiDropdownCustomPosition]):not([tuiDropdownSided])',\n      providers: [tuiAsPositionAccessor(TuiDropdownPositionDirective)]\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [TUI_DROPDOWN_OPTIONS]\n      }]\n    }, {\n      type: i1$2.TuiRectAccessor,\n      decorators: [{\n        type: Inject,\n        args: [TUI_VIEWPORT]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [TuiRectAccessor]\n      }]\n    }, {\n      type: TuiDropdownDirective,\n      decorators: [{\n        type: Inject,\n        args: [TuiDropdownDirective]\n      }]\n    }];\n  }, {\n    accessor: []\n  });\n})();\nclass TuiDropdownPositionSidedDirective extends TuiPositionAccessor {\n  constructor(options, viewport, vertical) {\n    super();\n    this.options = options;\n    this.viewport = viewport;\n    this.vertical = vertical;\n    this.previous = this.options.direction || 'bottom';\n    this.tuiDropdownSided = '';\n    this.tuiDropdownSidedOffset = 4;\n    this.type = 'dropdown';\n  }\n  getPosition(rect) {\n    var _a, _b;\n    if (this.tuiDropdownSided === false) {\n      return this.vertical.getPosition(rect);\n    }\n    const {\n      height,\n      width\n    } = rect;\n    const hostRect = (_b = (_a = this.vertical.accessor) === null || _a === void 0 ? void 0 : _a.getClientRect()) !== null && _b !== void 0 ? _b : EMPTY_CLIENT_RECT;\n    const viewport = this.viewport.getClientRect();\n    const {\n      direction,\n      minHeight,\n      offset\n    } = this.options;\n    const align = this.options.align === 'center' ? 'left' : this.options.align;\n    const available = {\n      top: hostRect.bottom - viewport.top,\n      left: hostRect.left - offset - viewport.left,\n      right: viewport.right - hostRect.right - offset,\n      bottom: viewport.bottom - hostRect.top\n    };\n    const position = {\n      top: hostRect.bottom - height + this.tuiDropdownSidedOffset + 1,\n      left: hostRect.left - width - offset,\n      right: hostRect.right + offset,\n      bottom: hostRect.top - this.tuiDropdownSidedOffset - 1 // 1 for border\n    };\n\n    const better = available.top > available.bottom ? 'top' : 'bottom';\n    const maxLeft = available.left > available.right ? position.left : position.right;\n    const left = available[align] > width ? position[align] : maxLeft;\n    if (available[this.previous] > minHeight && direction || this.previous === better) {\n      return [position[this.previous], left];\n    }\n    this.previous = better;\n    return [position[better], left];\n  }\n}\nTuiDropdownPositionSidedDirective.ɵfac = function TuiDropdownPositionSidedDirective_Factory(t) {\n  return new (t || TuiDropdownPositionSidedDirective)(i0.ɵɵdirectiveInject(TUI_DROPDOWN_OPTIONS), i0.ɵɵdirectiveInject(TUI_VIEWPORT), i0.ɵɵdirectiveInject(TuiDropdownPositionDirective));\n};\nTuiDropdownPositionSidedDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownPositionSidedDirective,\n  selectors: [[\"\", \"tuiDropdownSided\", \"\"]],\n  inputs: {\n    tuiDropdownSided: \"tuiDropdownSided\",\n    tuiDropdownSidedOffset: \"tuiDropdownSidedOffset\"\n  },\n  features: [i0.ɵɵProvidersFeature([TuiDropdownPositionDirective, tuiAsPositionAccessor(TuiDropdownPositionSidedDirective)]), i0.ɵɵInheritDefinitionFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownPositionSidedDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdownSided]',\n      providers: [TuiDropdownPositionDirective, tuiAsPositionAccessor(TuiDropdownPositionSidedDirective)]\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [TUI_DROPDOWN_OPTIONS]\n      }]\n    }, {\n      type: i1$2.TuiRectAccessor,\n      decorators: [{\n        type: Inject,\n        args: [TUI_VIEWPORT]\n      }]\n    }, {\n      type: TuiDropdownPositionDirective,\n      decorators: [{\n        type: Inject,\n        args: [TuiDropdownPositionDirective]\n      }]\n    }];\n  }, {\n    tuiDropdownSided: [{\n      type: Input\n    }],\n    tuiDropdownSidedOffset: [{\n      type: Input\n    }]\n  });\n})();\nclass TuiDropdownSelectionDirective extends TuiDriver {\n  constructor(range, doc, selection$, el, vcr, dropdown) {\n    super(subscriber => this.stream$.subscribe(subscriber));\n    this.range = range;\n    this.doc = doc;\n    this.selection$ = selection$;\n    this.el = el;\n    this.vcr = vcr;\n    this.dropdown = dropdown;\n    this.handler$ = new BehaviorSubject(ALWAYS_TRUE_HANDLER);\n    this.stream$ = combineLatest([this.handler$, this.selection$.pipe(map(() => this.getRange()), distinctUntilChanged())]).pipe(map(([handler, range]) => {\n      const contained = this.el.nativeElement.contains(range.commonAncestorContainer);\n      this.range = contained && tuiIsTextNode(range.commonAncestorContainer) ? range : this.range;\n      return contained && handler(this.range) || this.inDropdown(range);\n    }));\n    this.position = 'selection';\n    this.type = 'dropdown';\n  }\n  set tuiDropdownSelection(visible) {\n    if (!tuiIsString(visible)) {\n      this.handler$.next(visible);\n    }\n  }\n  getClientRect() {\n    switch (this.position) {\n      case 'tag':\n        {\n          const {\n            commonAncestorContainer\n          } = this.range;\n          const element = tuiIsElement(commonAncestorContainer) ? commonAncestorContainer : commonAncestorContainer.parentNode;\n          return element && tuiIsElement(element) ? element.getBoundingClientRect() : EMPTY_CLIENT_RECT;\n        }\n      case 'word':\n        return tuiGetWordRange(this.range).getBoundingClientRect();\n      default:\n        return this.range.getBoundingClientRect();\n    }\n  }\n  ngOnDestroy() {\n    if (this.ghost) {\n      this.vcr.element.nativeElement.removeChild(this.ghost);\n    }\n  }\n  getRange() {\n    const active = tuiGetNativeFocused(this.doc);\n    const selection = this.doc.getSelection();\n    if (active && tuiIsTextfield(active) && this.el.nativeElement.contains(active)) {\n      return this.veryVerySadInputFix(active);\n    }\n    return (selection === null || selection === void 0 ? void 0 : selection.rangeCount) ? selection.getRangeAt(0) : this.range;\n  }\n  /**\n   * Check if Node is inside dropdown\n   */\n  boxContains(node) {\n    var _a;\n    return !!((_a = this.dropdown.dropdownBoxRef) === null || _a === void 0 ? void 0 : _a.location.nativeElement.contains(node));\n  }\n  /**\n   * Check if given range is at least partially inside dropdown\n   */\n  inDropdown(range) {\n    const {\n      startContainer,\n      endContainer\n    } = range;\n    const {\n      nativeElement\n    } = this.el;\n    const inDropdown = this.boxContains(range.commonAncestorContainer);\n    const hostToDropdown = this.boxContains(endContainer) && nativeElement.contains(startContainer);\n    const dropdownToHost = this.boxContains(startContainer) && nativeElement.contains(endContainer);\n    return inDropdown || hostToDropdown || dropdownToHost;\n  }\n  veryVerySadInputFix(element) {\n    const {\n      ghost = this.initGhost(element)\n    } = this;\n    const {\n      top,\n      left,\n      width,\n      height\n    } = element.getBoundingClientRect();\n    const {\n      selectionStart,\n      selectionEnd,\n      value\n    } = element;\n    const range = this.doc.createRange();\n    const hostRect = this.el.nativeElement.getBoundingClientRect();\n    ghost.style.top = tuiPx(top - hostRect.top);\n    ghost.style.left = tuiPx(left - hostRect.left);\n    ghost.style.width = tuiPx(width);\n    ghost.style.height = tuiPx(height);\n    ghost.textContent = CHAR_ZERO_WIDTH_SPACE + value + CHAR_NO_BREAK_SPACE;\n    range.setStart(ghost.firstChild, selectionStart || 0);\n    range.setEnd(ghost.firstChild, selectionEnd || 0);\n    return range;\n  }\n  /**\n   * Create an invisible DIV styled exactly like input/textarea element inside directive\n   */\n  initGhost(element) {\n    const ghost = this.doc.createElement('div');\n    const {\n      font,\n      letterSpacing,\n      textTransform,\n      padding\n    } = getComputedStyle(element);\n    ghost.style.position = 'absolute';\n    ghost.style.pointerEvents = 'none';\n    ghost.style.opacity = '0';\n    ghost.style.whiteSpace = 'pre-wrap';\n    ghost.style.font = font;\n    ghost.style.letterSpacing = letterSpacing;\n    ghost.style.textTransform = textTransform;\n    ghost.style.padding = padding;\n    this.vcr.element.nativeElement.appendChild(ghost);\n    this.ghost = ghost;\n    return ghost;\n  }\n}\nTuiDropdownSelectionDirective.ɵfac = function TuiDropdownSelectionDirective_Factory(t) {\n  return new (t || TuiDropdownSelectionDirective)(i0.ɵɵdirectiveInject(TUI_RANGE), i0.ɵɵdirectiveInject(DOCUMENT), i0.ɵɵdirectiveInject(TUI_SELECTION_STREAM), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(ViewContainerRef), i0.ɵɵdirectiveInject(TuiDropdownDirective));\n};\nTuiDropdownSelectionDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiDropdownSelectionDirective,\n  selectors: [[\"\", \"tuiDropdown\", \"\", \"tuiDropdownSelection\", \"\"]],\n  inputs: {\n    position: [\"tuiDropdownSelectionPosition\", \"position\"],\n    tuiDropdownSelection: \"tuiDropdownSelection\"\n  },\n  features: [i0.ɵɵProvidersFeature([tuiAsDriver(TuiDropdownSelectionDirective), tuiAsRectAccessor(TuiDropdownSelectionDirective)]), i0.ɵɵInheritDefinitionFeature]\n});\n__decorate([tuiDefaultProp()], TuiDropdownSelectionDirective.prototype, \"position\", void 0);\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownSelectionDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[tuiDropdown][tuiDropdownSelection]',\n      providers: [tuiAsDriver(TuiDropdownSelectionDirective), tuiAsRectAccessor(TuiDropdownSelectionDirective)]\n    }]\n  }], function () {\n    return [{\n      type: Range,\n      decorators: [{\n        type: Inject,\n        args: [TUI_RANGE]\n      }]\n    }, {\n      type: Document,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: i1.Observable,\n      decorators: [{\n        type: Inject,\n        args: [TUI_SELECTION_STREAM]\n      }]\n    }, {\n      type: i0.ElementRef,\n      decorators: [{\n        type: Inject,\n        args: [ElementRef]\n      }]\n    }, {\n      type: i0.ViewContainerRef,\n      decorators: [{\n        type: Inject,\n        args: [ViewContainerRef]\n      }]\n    }, {\n      type: TuiDropdownDirective,\n      decorators: [{\n        type: Inject,\n        args: [TuiDropdownDirective]\n      }]\n    }];\n  }, {\n    position: [{\n      type: Input,\n      args: ['tuiDropdownSelectionPosition']\n    }],\n    tuiDropdownSelection: [{\n      type: Input\n    }]\n  });\n})();\nclass TuiDropdownModule {}\nTuiDropdownModule.ɵfac = function TuiDropdownModule_Factory(t) {\n  return new (t || TuiDropdownModule)();\n};\nTuiDropdownModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: TuiDropdownModule\n});\nTuiDropdownModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[PolymorpheusModule, TuiActiveZoneModule, TuiOverscrollModule, TuiScrollbarModule, TuiModeModule, TuiHoveredModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiDropdownModule, [{\n    type: NgModule,\n    args: [{\n      imports: [PolymorpheusModule, TuiActiveZoneModule, TuiOverscrollModule, TuiScrollbarModule, TuiModeModule, TuiHoveredModule],\n      declarations: [TuiDropdownDirective, TuiDropdownComponent, TuiDropdownOptionsDirective, TuiDropdownHostDirective, TuiDropdownDriverDirective, TuiDropdownManualDirective, TuiDropdownHoverDirective, TuiDropdownContextDirective, TuiDropdownPositionDirective, TuiDropdownPositionSidedDirective, TuiDropdownSelectionDirective],\n      exports: [TuiDropdownDirective, TuiDropdownComponent, TuiDropdownOptionsDirective, TuiDropdownHostDirective, TuiDropdownDriverDirective, TuiDropdownManualDirective, TuiDropdownHoverDirective, TuiDropdownContextDirective, TuiDropdownPositionDirective, TuiDropdownPositionSidedDirective, TuiDropdownSelectionDirective]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TUI_DROPDOWN_COMPONENT, TUI_DROPDOWN_DEFAULT_OPTIONS, TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS, TUI_DROPDOWN_HOVER_OPTIONS, TUI_DROPDOWN_OPTIONS, TuiDropdownComponent, TuiDropdownContextDirective, TuiDropdownDirective, TuiDropdownDriverDirective, TuiDropdownHostDirective, TuiDropdownHoverDirective, TuiDropdownManualDirective, TuiDropdownModule, TuiDropdownOptionsDirective, TuiDropdownPositionDirective, TuiDropdownPositionSidedDirective, TuiDropdownSelectionDirective, tuiDropdownHoverOptionsProvider, tuiDropdownOptionsProvider };","map":{"version":3,"names":["i0","InjectionToken","ElementRef","INJECTOR","Directive","Inject","Input","Optional","SkipSelf","forwardRef","Component","ChangeDetectionStrategy","Self","HostBinding","HostListener","ViewContainerRef","NgModule","WINDOW","i2","TuiDropdownPortalService","tuiPure","TuiHoveredService","tuiDefaultProp","tuiPx","tuiGetClosestFocusable","TuiDestroyService","AbstractTuiPortalHostComponent","EMPTY_CLIENT_RECT","tuiPointToClientRect","TuiActiveZoneDirective","ALWAYS_TRUE_HANDLER","tuiIsTextNode","tuiIsString","tuiIsElement","tuiGetNativeFocused","tuiIsTextfield","CHAR_ZERO_WIDTH_SPACE","CHAR_NO_BREAK_SPACE","TUI_RANGE","TuiActiveZoneModule","TuiOverscrollModule","TuiHoveredModule","i1$2","tuiAsRectAccessor","tuiAsVehicle","TuiDriver","tuiAsDriver","TuiRectAccessor","tuiPositionAccessorFor","tuiRectAccessorFor","AbstractTuiDriverDirective","TuiVehicle","TuiPositionAccessor","tuiFallbackRectAccessor","tuiAsPositionAccessor","tuiDropdownAnimation","i9","TuiPositionService","TuiVisualViewportService","TUI_ANIMATION_OPTIONS","TUI_VIEWPORT","TUI_SELECTION_STREAM","switchMap","delay","tap","share","map","takeUntil","distinctUntilChanged","__decorate","tuiCheckFixedPosition","tuiOverrideOptions","tuiGetWordRange","i4","PolymorpheusComponent","PolymorpheusModule","i1","Subject","merge","of","BehaviorSubject","combineLatest","i1$1","TuiScrollbarModule","i3","TuiModeModule","shouldCall","DOCUMENT","TUI_DROPDOWN_COMPONENT","factory","TuiDropdownComponent","TuiDropdownDirective","constructor","el","hapica","injector","dropdownService","dropdownBoxRef","type","component","position","nativeElement","ngAfterViewChecked","_a","_b","changeDetectorRef","detectChanges","markForCheck","ngOnChanges","content","toggle","ngOnDestroy","getClientRect","getBoundingClientRect","show","add","remove","ɵfac","ɵdir","prototype","args","selector","exportAs","providers","decorators","Type","Injector","TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS","showDelay","hideDelay","TUI_DROPDOWN_HOVER_OPTIONS","tuiDropdownHoverOptionsProvider","options","provide","useValue","Object","assign","TuiDropdownHoverDirective","hovered$","subscriber","stream$","subscribe","toggle$","pipe","visible","hovered","next","Observable","undefined","TUI_DROPDOWN_DEFAULT_OPTIONS","align","direction","limitWidth","maxHeight","minHeight","offset","TUI_DROPDOWN_OPTIONS","tuiDropdownOptionsProvider","override","deps","TuiDropdownOptionsDirective","useFactory","useExisting","position$","destroy$","directive","host","accessor","win","animationOptions","hoverDirective","visualViewportService","dropdownAnimation","value","point","correct","top","left","update","updateWidth","width","onHoveredChange","onTopFocus","moveFocusOutside","onBottomFocus","style","right","innerHeight","clientRect","rect","offsetX","offsetY","isIntersecting","available","Math","max","min","minWidth","previous","ownerDocument","root","body","focusable","initial","contains","focus","ɵcmp","TuiScrollbarComponent","TuiOverscrollDirective","TuiModeDirective","TuiHoveredDirective","PolymorpheusOutletDirective","templateUrl","styleUrls","animations","changeDetection","Default","Window","activeZoneFilter","target","activeZone","TuiDropdownContextDirective","currentRect","onContextMenu","x","y","closeDropdown","TuiDropdownDriverDirective","drivers","vehicles","TuiDropdownHostDirective","arguments","tuiDropdownHost","TuiDropdownManualDirective","tuiDropdownManual","TuiDropdownPositionDirective","viewport","accessors","getPosition","height","hostRect","bottom","center","better","TuiDropdownPositionSidedDirective","vertical","tuiDropdownSided","tuiDropdownSidedOffset","maxLeft","TuiDropdownSelectionDirective","range","doc","selection$","vcr","dropdown","handler$","getRange","handler","contained","commonAncestorContainer","inDropdown","tuiDropdownSelection","element","parentNode","ghost","removeChild","active","selection","getSelection","veryVerySadInputFix","rangeCount","getRangeAt","boxContains","node","location","startContainer","endContainer","hostToDropdown","dropdownToHost","initGhost","selectionStart","selectionEnd","createRange","textContent","setStart","firstChild","setEnd","createElement","font","letterSpacing","textTransform","padding","getComputedStyle","pointerEvents","opacity","whiteSpace","appendChild","Range","Document","TuiDropdownModule","ɵmod","ɵinj","imports","declarations","exports"],"sources":["C:/Users/denis/PycharmProjects/example_project/frontend/node_modules/@taiga-ui/core/fesm2015/taiga-ui-core-directives-dropdown.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { InjectionToken, ElementRef, INJECTOR, Directive, Inject, Input, Optional, SkipSelf, forwardRef, Component, ChangeDetectionStrategy, Self, HostBinding, HostListener, ViewContainerRef, NgModule } from '@angular/core';\nimport { WINDOW } from '@ng-web-apis/common';\nimport * as i2 from '@taiga-ui/cdk';\nimport { TuiDropdownPortalService, tuiPure, TuiHoveredService, tuiDefaultProp, tuiPx, tuiGetClosestFocusable, TuiDestroyService, AbstractTuiPortalHostComponent, EMPTY_CLIENT_RECT, tuiPointToClientRect, TuiActiveZoneDirective, ALWAYS_TRUE_HANDLER, tuiIsTextNode, tuiIsString, tuiIsElement, tuiGetNativeFocused, tuiIsTextfield, CHAR_ZERO_WIDTH_SPACE, CHAR_NO_BREAK_SPACE, TUI_RANGE, TuiActiveZoneModule, TuiOverscrollModule, TuiHoveredModule } from '@taiga-ui/cdk';\nimport * as i1$2 from '@taiga-ui/core/abstract';\nimport { tuiAsRectAccessor, tuiAsVehicle, TuiDriver, tuiAsDriver, TuiRectAccessor, tuiPositionAccessorFor, tuiRectAccessorFor, AbstractTuiDriverDirective, TuiVehicle, TuiPositionAccessor, tuiFallbackRectAccessor, tuiAsPositionAccessor } from '@taiga-ui/core/abstract';\nimport { tuiDropdownAnimation } from '@taiga-ui/core/animations';\nimport * as i9 from '@taiga-ui/core/services';\nimport { TuiPositionService, TuiVisualViewportService } from '@taiga-ui/core/services';\nimport { TUI_ANIMATION_OPTIONS, TUI_VIEWPORT, TUI_SELECTION_STREAM } from '@taiga-ui/core/tokens';\nimport { switchMap, delay, tap, share, map, takeUntil, distinctUntilChanged } from 'rxjs/operators';\nimport { __decorate } from 'tslib';\nimport { tuiCheckFixedPosition, tuiOverrideOptions, tuiGetWordRange } from '@taiga-ui/core/utils';\nimport * as i4 from '@tinkoff/ng-polymorpheus';\nimport { PolymorpheusComponent, PolymorpheusModule } from '@tinkoff/ng-polymorpheus';\nimport * as i1 from 'rxjs';\nimport { Subject, merge, of, BehaviorSubject, combineLatest } from 'rxjs';\nimport * as i1$1 from '@taiga-ui/core/components/scrollbar';\nimport { TuiScrollbarModule } from '@taiga-ui/core/components/scrollbar';\nimport * as i3 from '@taiga-ui/core/directives/mode';\nimport { TuiModeModule } from '@taiga-ui/core/directives/mode';\nimport { shouldCall } from '@tinkoff/ng-event-plugins';\nimport { DOCUMENT } from '@angular/common';\n\n/**\n * A component to display a dropdown\n */\nconst TUI_DROPDOWN_COMPONENT = new InjectionToken(`[TUI_DROPDOWN_COMPONENT]`, {\n    factory: () => TuiDropdownComponent,\n});\n\nclass TuiDropdownDirective {\n    constructor(el, hapica, injector, dropdownService) {\n        this.el = el;\n        this.hapica = hapica;\n        this.injector = injector;\n        this.dropdownService = dropdownService;\n        this.dropdownBoxRef = null;\n        this.type = 'dropdown';\n        this.component = new PolymorpheusComponent(this.hapica, this.injector);\n    }\n    get position() {\n        return tuiCheckFixedPosition(this.el.nativeElement) ? 'fixed' : 'absolute';\n    }\n    ngAfterViewChecked() {\n        var _a, _b;\n        (_a = this.dropdownBoxRef) === null || _a === void 0 ? void 0 : _a.changeDetectorRef.detectChanges();\n        (_b = this.dropdownBoxRef) === null || _b === void 0 ? void 0 : _b.changeDetectorRef.markForCheck();\n    }\n    ngOnChanges() {\n        if (!this.content) {\n            this.toggle(false);\n        }\n    }\n    ngOnDestroy() {\n        this.toggle(false);\n    }\n    getClientRect() {\n        return this.el.nativeElement.getBoundingClientRect();\n    }\n    toggle(show) {\n        if (show && this.content && !this.dropdownBoxRef) {\n            this.dropdownBoxRef = this.dropdownService.add(this.component);\n        }\n        else if (!show && this.dropdownBoxRef) {\n            this.dropdownService.remove(this.dropdownBoxRef);\n            this.dropdownBoxRef = null;\n        }\n    }\n}\nTuiDropdownDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownDirective, deps: [{ token: ElementRef }, { token: TUI_DROPDOWN_COMPONENT }, { token: INJECTOR }, { token: TuiDropdownPortalService }], target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownDirective, selector: \"[tuiDropdown]:not(ng-container)\", inputs: { content: [\"tuiDropdown\", \"content\"] }, providers: [\n        tuiAsRectAccessor(TuiDropdownDirective),\n        tuiAsVehicle(TuiDropdownDirective),\n    ], exportAs: [\"tuiDropdown\"], usesOnChanges: true, ngImport: i0 });\n__decorate([\n    tuiPure\n], TuiDropdownDirective.prototype, \"position\", null);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdown]:not(ng-container)',\n                    exportAs: 'tuiDropdown',\n                    providers: [\n                        tuiAsRectAccessor(TuiDropdownDirective),\n                        tuiAsVehicle(TuiDropdownDirective),\n                    ],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef, decorators: [{\n                    type: Inject,\n                    args: [ElementRef]\n                }] }, { type: i0.Type, decorators: [{\n                    type: Inject,\n                    args: [TUI_DROPDOWN_COMPONENT]\n                }] }, { type: i0.Injector, decorators: [{\n                    type: Inject,\n                    args: [INJECTOR]\n                }] }, { type: i2.TuiDropdownPortalService, decorators: [{\n                    type: Inject,\n                    args: [TuiDropdownPortalService]\n                }] }]; }, propDecorators: { content: [{\n                type: Input,\n                args: ['tuiDropdown']\n            }], position: [] } });\n\n/** Default values for hint options */\nconst TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS = {\n    showDelay: 200,\n    hideDelay: 500,\n};\n/**\n * Default parameters for dropdown hover directive\n */\nconst TUI_DROPDOWN_HOVER_OPTIONS = new InjectionToken('[TUI_DROPDOWN_HOVER_OPTIONS]', {\n    factory: () => TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS,\n});\nconst tuiDropdownHoverOptionsProvider = (options) => ({\n    provide: TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS,\n    useValue: Object.assign(Object.assign({}, TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS), options),\n});\n\nclass TuiDropdownHoverDirective extends TuiDriver {\n    constructor(hovered$, options) {\n        super(subscriber => this.stream$.subscribe(subscriber));\n        this.hovered$ = hovered$;\n        this.options = options;\n        this.toggle$ = new Subject();\n        this.stream$ = merge(this.toggle$, this.hovered$).pipe(switchMap(visible => of(visible).pipe(delay(visible ? this.showDelay : this.hideDelay))), tap(visible => {\n            this.hovered = visible;\n        }), share());\n        this.showDelay = this.options.showDelay;\n        this.hideDelay = this.options.hideDelay;\n        this.hovered = false;\n        this.type = 'dropdown';\n    }\n    toggle(visible) {\n        this.toggle$.next(visible);\n    }\n}\nTuiDropdownHoverDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownHoverDirective, deps: [{ token: TuiHoveredService }, { token: TUI_DROPDOWN_HOVER_OPTIONS }], target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownHoverDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownHoverDirective, selector: \"[tuiDropdownHover]:not(ng-container)\", inputs: { showDelay: [\"tuiDropdownShowDelay\", \"showDelay\"], hideDelay: [\"tuiDropdownHideDelay\", \"hideDelay\"] }, providers: [tuiAsDriver(TuiDropdownHoverDirective), TuiHoveredService], usesInheritance: true, ngImport: i0 });\n__decorate([\n    tuiDefaultProp()\n], TuiDropdownHoverDirective.prototype, \"showDelay\", void 0);\n__decorate([\n    tuiDefaultProp()\n], TuiDropdownHoverDirective.prototype, \"hideDelay\", void 0);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownHoverDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdownHover]:not(ng-container)',\n                    providers: [tuiAsDriver(TuiDropdownHoverDirective), TuiHoveredService],\n                }]\n        }], ctorParameters: function () { return [{ type: i1.Observable, decorators: [{\n                    type: Inject,\n                    args: [TuiHoveredService]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [TUI_DROPDOWN_HOVER_OPTIONS]\n                }] }]; }, propDecorators: { showDelay: [{\n                type: Input,\n                args: ['tuiDropdownShowDelay']\n            }], hideDelay: [{\n                type: Input,\n                args: ['tuiDropdownHideDelay']\n            }] } });\n\n/** Default values for dropdown options */\nconst TUI_DROPDOWN_DEFAULT_OPTIONS = {\n    align: 'left',\n    direction: null,\n    limitWidth: 'auto',\n    maxHeight: 400,\n    minHeight: 80,\n    offset: 4,\n};\n/**\n * Default parameters for dropdown directive\n */\nconst TUI_DROPDOWN_OPTIONS = new InjectionToken('[TUI_DROPDOWN_OPTIONS]', {\n    factory: () => TUI_DROPDOWN_DEFAULT_OPTIONS,\n});\nconst tuiDropdownOptionsProvider = (override) => ({\n    provide: TUI_DROPDOWN_OPTIONS,\n    deps: [\n        [new Optional(), TuiDropdownOptionsDirective],\n        [new SkipSelf(), TUI_DROPDOWN_OPTIONS],\n    ],\n    useFactory: tuiOverrideOptions(override),\n});\nclass TuiDropdownOptionsDirective {\n    constructor(options) {\n        this.options = options;\n        this.align = this.options.align;\n        this.direction = this.options.direction;\n        this.limitWidth = this.options.limitWidth;\n        this.minHeight = this.options.minHeight;\n        this.maxHeight = this.options.maxHeight;\n        this.offset = this.options.offset;\n    }\n}\nTuiDropdownOptionsDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownOptionsDirective, deps: [{ token: TUI_DROPDOWN_OPTIONS, skipSelf: true }], target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownOptionsDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownOptionsDirective, selector: \"[tuiDropdownAlign], [tuiDropdownDirection], [tuiDropdownLimitWidth], [tuiDropdownMinHeight], [tuiDropdownMaxHeight], [tuiDropdownOffset]\", inputs: { align: [\"tuiDropdownAlign\", \"align\"], direction: [\"tuiDropdownDirection\", \"direction\"], limitWidth: [\"tuiDropdownLimitWidth\", \"limitWidth\"], minHeight: [\"tuiDropdownMinHeight\", \"minHeight\"], maxHeight: [\"tuiDropdownMaxHeight\", \"maxHeight\"], offset: [\"tuiDropdownOffset\", \"offset\"] }, providers: [\n        {\n            provide: TUI_DROPDOWN_OPTIONS,\n            useExisting: forwardRef(() => TuiDropdownOptionsDirective),\n        },\n    ], ngImport: i0 });\n__decorate([\n    tuiDefaultProp()\n], TuiDropdownOptionsDirective.prototype, \"align\", void 0);\n__decorate([\n    tuiDefaultProp()\n], TuiDropdownOptionsDirective.prototype, \"direction\", void 0);\n__decorate([\n    tuiDefaultProp()\n], TuiDropdownOptionsDirective.prototype, \"limitWidth\", void 0);\n__decorate([\n    tuiDefaultProp()\n], TuiDropdownOptionsDirective.prototype, \"minHeight\", void 0);\n__decorate([\n    tuiDefaultProp()\n], TuiDropdownOptionsDirective.prototype, \"maxHeight\", void 0);\n__decorate([\n    tuiDefaultProp()\n], TuiDropdownOptionsDirective.prototype, \"offset\", void 0);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownOptionsDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdownAlign], [tuiDropdownDirection], [tuiDropdownLimitWidth], [tuiDropdownMinHeight], [tuiDropdownMaxHeight], [tuiDropdownOffset]',\n                    providers: [\n                        {\n                            provide: TUI_DROPDOWN_OPTIONS,\n                            useExisting: forwardRef(() => TuiDropdownOptionsDirective),\n                        },\n                    ],\n                }]\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\n                    type: SkipSelf\n                }, {\n                    type: Inject,\n                    args: [TUI_DROPDOWN_OPTIONS]\n                }] }]; }, propDecorators: { align: [{\n                type: Input,\n                args: ['tuiDropdownAlign']\n            }], direction: [{\n                type: Input,\n                args: ['tuiDropdownDirection']\n            }], limitWidth: [{\n                type: Input,\n                args: ['tuiDropdownLimitWidth']\n            }], minHeight: [{\n                type: Input,\n                args: ['tuiDropdownMinHeight']\n            }], maxHeight: [{\n                type: Input,\n                args: ['tuiDropdownMaxHeight']\n            }], offset: [{\n                type: Input,\n                args: ['tuiDropdownOffset']\n            }] } });\n\n/**\n * @description:\n * This component is used to show template in a portal\n * using default style of white rounded box with a shadow\n */\nclass TuiDropdownComponent {\n    constructor(position$, destroy$, directive, el, host, accessor, win, animationOptions, options, hoverDirective, visualViewportService) {\n        this.directive = directive;\n        this.el = el;\n        this.host = host;\n        this.accessor = accessor;\n        this.win = win;\n        this.animationOptions = animationOptions;\n        this.options = options;\n        this.hoverDirective = hoverDirective;\n        this.dropdownAnimation = Object.assign({ value: \"fadeInTop\" /* FadeInTop */ }, this.animationOptions);\n        position$\n            .pipe(map(point => this.directive.position === 'fixed'\n            ? visualViewportService.correct(point)\n            : point), takeUntil(destroy$))\n            .subscribe(([top, left]) => {\n            this.update(top, left);\n        });\n        this.updateWidth(this.accessor.getClientRect().width);\n    }\n    ngOnDestroy() {\n        this.onHoveredChange(false);\n    }\n    onHoveredChange(hovered) {\n        if (this.hoverDirective) {\n            this.hoverDirective.toggle(hovered);\n        }\n    }\n    onTopFocus() {\n        this.moveFocusOutside(true);\n    }\n    onBottomFocus() {\n        this.moveFocusOutside(false);\n    }\n    update(top, left) {\n        const { style } = this.el.nativeElement;\n        const { right } = this.el.nativeElement.getBoundingClientRect();\n        const { maxHeight, offset } = this.options;\n        const { innerHeight } = this.win;\n        const { clientRect } = this.host;\n        const { position } = this.directive;\n        const rect = this.accessor.getClientRect();\n        const offsetX = position === 'fixed' ? 0 : -clientRect.left;\n        const offsetY = position === 'fixed' ? 0 : -clientRect.top;\n        top += offsetY;\n        left += offsetX;\n        const isIntersecting = left < rect.right && right > rect.left && top < offsetY + 2 * offset;\n        const available = isIntersecting\n            ? rect.top - 2 * offset\n            : offsetY + innerHeight - top - offset;\n        style.position = position;\n        style.top = tuiPx(Math.max(top, offsetY + offset));\n        style.left = tuiPx(left);\n        style.maxHeight = tuiPx(Math.min(maxHeight, available));\n        style.width = '';\n        style.minWidth = '';\n        this.updateWidth(rect.width);\n    }\n    updateWidth(width) {\n        const { style } = this.el.nativeElement;\n        switch (this.options.limitWidth) {\n            case 'min':\n                style.minWidth = tuiPx(width);\n                break;\n            case 'fixed':\n                style.width = tuiPx(width);\n                break;\n            case 'auto':\n                break;\n        }\n    }\n    moveFocusOutside(previous) {\n        const { nativeElement } = this.directive.el;\n        const { ownerDocument } = nativeElement;\n        const root = ownerDocument ? ownerDocument.body : nativeElement;\n        let focusable = tuiGetClosestFocusable({ initial: nativeElement, root, previous });\n        while (focusable !== null && nativeElement.contains(focusable)) {\n            focusable = tuiGetClosestFocusable({ initial: focusable, root, previous });\n        }\n        focusable === null || focusable === void 0 ? void 0 : focusable.focus();\n    }\n}\nTuiDropdownComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownComponent, deps: [{ token: TuiPositionService }, { token: TuiDestroyService, self: true }, { token: TuiDropdownDirective }, { token: ElementRef }, { token: AbstractTuiPortalHostComponent }, { token: TuiRectAccessor }, { token: WINDOW }, { token: TUI_ANIMATION_OPTIONS }, { token: TUI_DROPDOWN_OPTIONS }, { token: TuiDropdownHoverDirective, optional: true }, { token: TuiVisualViewportService }], target: i0.ɵɵFactoryTarget.Component });\nTuiDropdownComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownComponent, selector: \"tui-dropdown\", host: { properties: { \"@tuiDropdownAnimation\": \"this.dropdownAnimation\" } }, providers: [\n        TuiDestroyService,\n        TuiPositionService,\n        tuiPositionAccessorFor('dropdown'),\n        tuiRectAccessorFor('dropdown', TuiDropdownDirective),\n    ], ngImport: i0, template: \"<div\\n    #activeZone=\\\"tuiActiveZone\\\"\\n    tuiActiveZone\\n    tuiOverscroll=\\\"all\\\"\\n    class=\\\"t-wrapper\\\"\\n    [tuiMode]=\\\"null\\\"\\n    (tuiHoveredChange)=\\\"onHoveredChange($event)\\\"\\n>\\n    <tui-scrollbar class=\\\"t-scroll\\\">\\n        <div\\n            tabindex=\\\"0\\\"\\n            (focus)=\\\"onTopFocus()\\\"\\n        ></div>\\n        <div\\n            *polymorpheusOutlet=\\\"directive.content as text; context: {$implicit: activeZone}\\\"\\n            class=\\\"t-primitive\\\"\\n        >\\n            {{ text }}\\n        </div>\\n        <div\\n            tabindex=\\\"0\\\"\\n            (focus)=\\\"onBottomFocus()\\\"\\n        ></div>\\n    </tui-scrollbar>\\n</div>\\n\", styles: [\":host{position:relative;z-index:0;box-shadow:0 1.5rem 1rem #00000008,0 .75rem .75rem #0000000a,0 .25rem .375rem #0000000d;position:absolute;display:flex;background-color:var(--tui-elevation-01);border-radius:var(--tui-radius-m);overflow:hidden;border:1px solid var(--tui-base-04);box-sizing:border-box;max-width:calc(100% - 8px)}:host.ng-animating{pointer-events:none}:host:not([style*=\\\"top\\\"]){visibility:hidden}.t-wrapper{flex-grow:1;max-width:100%;max-height:inherit;overflow:visible}.t-scroll{height:100%}.t-primitive{padding:1rem}\\n\"], components: [{ type: i1$1.TuiScrollbarComponent, selector: \"tui-scrollbar\", inputs: [\"hidden\"] }], directives: [{ type: i2.TuiActiveZoneDirective, selector: \"[tuiActiveZone]:not(ng-container), [tuiActiveZoneChange]:not(ng-container), [tuiActiveZoneParent]:not(ng-container)\", inputs: [\"tuiActiveZoneParent\"], outputs: [\"tuiActiveZoneChange\"], exportAs: [\"tuiActiveZone\"] }, { type: i2.TuiOverscrollDirective, selector: \"[tuiOverscroll]\", inputs: [\"tuiOverscroll\"] }, { type: i3.TuiModeDirective, selector: \"[tuiMode]\", inputs: [\"tuiMode\"] }, { type: i2.TuiHoveredDirective, selector: \"[tuiHoveredChange]\", outputs: [\"tuiHoveredChange\"] }, { type: i4.PolymorpheusOutletDirective, selector: \"[polymorpheusOutlet]\", inputs: [\"polymorpheusOutlet\", \"polymorpheusOutletContext\"] }], animations: [tuiDropdownAnimation], changeDetection: i0.ChangeDetectionStrategy.Default });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'tui-dropdown',\n                    templateUrl: './dropdown.template.html',\n                    styleUrls: ['./dropdown.style.less'],\n                    providers: [\n                        TuiDestroyService,\n                        TuiPositionService,\n                        tuiPositionAccessorFor('dropdown'),\n                        tuiRectAccessorFor('dropdown', TuiDropdownDirective),\n                    ],\n                    animations: [tuiDropdownAnimation],\n                    // @bad TODO: OnPush\n                    // eslint-disable-next-line @angular-eslint/prefer-on-push-component-change-detection\n                    changeDetection: ChangeDetectionStrategy.Default,\n                }]\n        }], ctorParameters: function () { return [{ type: i1.Observable, decorators: [{\n                    type: Inject,\n                    args: [TuiPositionService]\n                }] }, { type: i1.Observable, decorators: [{\n                    type: Self\n                }, {\n                    type: Inject,\n                    args: [TuiDestroyService]\n                }] }, { type: TuiDropdownDirective, decorators: [{\n                    type: Inject,\n                    args: [TuiDropdownDirective]\n                }] }, { type: i0.ElementRef, decorators: [{\n                    type: Inject,\n                    args: [ElementRef]\n                }] }, { type: i2.AbstractTuiPortalHostComponent, decorators: [{\n                    type: Inject,\n                    args: [AbstractTuiPortalHostComponent]\n                }] }, { type: i1$2.TuiRectAccessor, decorators: [{\n                    type: Inject,\n                    args: [TuiRectAccessor]\n                }] }, { type: Window, decorators: [{\n                    type: Inject,\n                    args: [WINDOW]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [TUI_ANIMATION_OPTIONS]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [TUI_DROPDOWN_OPTIONS]\n                }] }, { type: TuiDropdownHoverDirective, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [TuiDropdownHoverDirective]\n                }] }, { type: i9.TuiVisualViewportService, decorators: [{\n                    type: Inject,\n                    args: [TuiVisualViewportService]\n                }] }]; }, propDecorators: { dropdownAnimation: [{\n                type: HostBinding,\n                args: ['@tuiDropdownAnimation']\n            }] } });\n\nfunction activeZoneFilter(target) {\n    return !this.activeZone.contains(target);\n}\nclass TuiDropdownContextDirective extends TuiDriver {\n    constructor(activeZone) {\n        super(subscriber => this.stream$.subscribe(subscriber));\n        this.activeZone = activeZone;\n        this.stream$ = new Subject();\n        this.currentRect = EMPTY_CLIENT_RECT;\n        this.type = 'dropdown';\n    }\n    onContextMenu(x, y) {\n        this.currentRect = tuiPointToClientRect(x, y);\n        this.stream$.next(true);\n    }\n    closeDropdown() {\n        this.stream$.next(false);\n    }\n    getClientRect() {\n        return this.currentRect;\n    }\n}\nTuiDropdownContextDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownContextDirective, deps: [{ token: TuiActiveZoneDirective }], target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownContextDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownContextDirective, selector: \"[tuiDropdown][tuiDropdownContext]\", host: { listeners: { \"contextmenu.prevent.stop\": \"onContextMenu($event.clientX,$event.clientY)\", \"document:click.silent\": \"closeDropdown($event.target)\", \"document:contextmenu.capture.silent\": \"closeDropdown($event.target)\", \"document:keydown.esc\": \"closeDropdown($event.currentTarget)\" } }, providers: [\n        TuiActiveZoneDirective,\n        tuiAsDriver(TuiDropdownContextDirective),\n        tuiAsRectAccessor(TuiDropdownContextDirective),\n    ], usesInheritance: true, ngImport: i0 });\n__decorate([\n    shouldCall(activeZoneFilter)\n], TuiDropdownContextDirective.prototype, \"closeDropdown\", null);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownContextDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdown][tuiDropdownContext]',\n                    providers: [\n                        TuiActiveZoneDirective,\n                        tuiAsDriver(TuiDropdownContextDirective),\n                        tuiAsRectAccessor(TuiDropdownContextDirective),\n                    ],\n                }]\n        }], ctorParameters: function () { return [{ type: i2.TuiActiveZoneDirective, decorators: [{\n                    type: Inject,\n                    args: [TuiActiveZoneDirective]\n                }] }]; }, propDecorators: { onContextMenu: [{\n                type: HostListener,\n                args: ['contextmenu.prevent.stop', ['$event.clientX', '$event.clientY']]\n            }], closeDropdown: [{\n                type: HostListener,\n                args: ['document:click.silent', ['$event.target']]\n            }, {\n                type: HostListener,\n                args: ['document:contextmenu.capture.silent', ['$event.target']]\n            }, {\n                type: HostListener,\n                args: ['document:keydown.esc', ['$event.currentTarget']]\n            }] } });\n\nclass TuiDropdownDriverDirective extends AbstractTuiDriverDirective {\n    // TODO: Figure out why this is necessary under nx test runner\n    constructor(destroy$, drivers, vehicles) {\n        super(destroy$, drivers, vehicles);\n        this.type = 'dropdown';\n    }\n}\nTuiDropdownDriverDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownDriverDirective, deps: [{ token: TuiDestroyService, self: true }, { token: TuiDriver }, { token: TuiVehicle }], target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownDriverDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownDriverDirective, selector: \"[tuiDropdown]\", providers: [TuiDestroyService], usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownDriverDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdown]',\n                    providers: [TuiDestroyService],\n                }]\n        }], ctorParameters: function () { return [{ type: i1.Observable, decorators: [{\n                    type: Self\n                }, {\n                    type: Inject,\n                    args: [TuiDestroyService]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [TuiDriver]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [TuiVehicle]\n                }] }]; } });\n\nclass TuiDropdownHostDirective extends TuiRectAccessor {\n    constructor() {\n        super(...arguments);\n        this.type = 'dropdown';\n    }\n    getClientRect() {\n        var _a;\n        return ((_a = this.tuiDropdownHost) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect()) || EMPTY_CLIENT_RECT;\n    }\n}\nTuiDropdownHostDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownHostDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownHostDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownHostDirective, selector: \"[tuiDropdown][tuiDropdownHost]\", inputs: { tuiDropdownHost: \"tuiDropdownHost\" }, providers: [tuiAsRectAccessor(TuiDropdownHostDirective)], usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownHostDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdown][tuiDropdownHost]',\n                    providers: [tuiAsRectAccessor(TuiDropdownHostDirective)],\n                }]\n        }], propDecorators: { tuiDropdownHost: [{\n                type: Input\n            }] } });\n\nclass TuiDropdownManualDirective extends TuiDriver {\n    constructor() {\n        super(subscriber => this.stream$.subscribe(subscriber));\n        this.stream$ = new BehaviorSubject(false);\n        this.tuiDropdownManual = false;\n        this.type = 'dropdown';\n    }\n    ngOnChanges() {\n        this.stream$.next(this.tuiDropdownManual);\n    }\n}\nTuiDropdownManualDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownManualDirective, deps: [], target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownManualDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownManualDirective, selector: \"[tuiDropdown][tuiDropdownManual]\", inputs: { tuiDropdownManual: \"tuiDropdownManual\" }, providers: [tuiAsDriver(TuiDropdownManualDirective)], usesInheritance: true, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownManualDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdown][tuiDropdownManual]',\n                    providers: [tuiAsDriver(TuiDropdownManualDirective)],\n                }]\n        }], ctorParameters: function () { return []; }, propDecorators: { tuiDropdownManual: [{\n                type: Input\n            }] } });\n\nclass TuiDropdownPositionDirective extends TuiPositionAccessor {\n    constructor(options, viewport, accessors, directive) {\n        super();\n        this.options = options;\n        this.viewport = viewport;\n        this.accessors = accessors;\n        this.directive = directive;\n        this.type = 'dropdown';\n    }\n    getPosition({ width, height }) {\n        var _a, _b;\n        const hostRect = (_b = (_a = this.accessor) === null || _a === void 0 ? void 0 : _a.getClientRect()) !== null && _b !== void 0 ? _b : EMPTY_CLIENT_RECT;\n        const viewport = this.viewport.getClientRect();\n        const { minHeight, align, direction, offset } = this.options;\n        const previous = this.previous || direction || 'bottom';\n        const right = Math.max(hostRect.right - width, offset);\n        const available = {\n            top: hostRect.top - 2 * offset - viewport.top,\n            bottom: viewport.bottom - hostRect.bottom - 2 * offset,\n        };\n        const position = {\n            top: hostRect.top - offset - height,\n            bottom: hostRect.bottom + offset,\n            right,\n            center: hostRect.left + hostRect.width / 2 + width / 2 < viewport.right - offset\n                ? hostRect.left + hostRect.width / 2 - width / 2\n                : right,\n            left: hostRect.left + width < viewport.right - offset ? hostRect.left : right,\n        };\n        const better = available.top > available.bottom ? 'top' : 'bottom';\n        if ((available[previous] > minHeight && direction) ||\n            available[previous] > height) {\n            return [position[previous], position[align]];\n        }\n        this.previous = better;\n        return [position[better], position[align]];\n    }\n    get accessor() {\n        return tuiFallbackRectAccessor('dropdown')(this.accessors, this.directive);\n    }\n}\nTuiDropdownPositionDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownPositionDirective, deps: [{ token: TUI_DROPDOWN_OPTIONS }, { token: TUI_VIEWPORT }, { token: TuiRectAccessor }, { token: TuiDropdownDirective }], target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownPositionDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownPositionDirective, selector: \"[tuiDropdown]:not([tuiDropdownCustomPosition]):not([tuiDropdownSided])\", providers: [tuiAsPositionAccessor(TuiDropdownPositionDirective)], usesInheritance: true, ngImport: i0 });\n__decorate([\n    tuiPure\n], TuiDropdownPositionDirective.prototype, \"accessor\", null);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownPositionDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdown]:not([tuiDropdownCustomPosition]):not([tuiDropdownSided])',\n                    providers: [tuiAsPositionAccessor(TuiDropdownPositionDirective)],\n                }]\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\n                    type: Inject,\n                    args: [TUI_DROPDOWN_OPTIONS]\n                }] }, { type: i1$2.TuiRectAccessor, decorators: [{\n                    type: Inject,\n                    args: [TUI_VIEWPORT]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [TuiRectAccessor]\n                }] }, { type: TuiDropdownDirective, decorators: [{\n                    type: Inject,\n                    args: [TuiDropdownDirective]\n                }] }]; }, propDecorators: { accessor: [] } });\n\nclass TuiDropdownPositionSidedDirective extends TuiPositionAccessor {\n    constructor(options, viewport, vertical) {\n        super();\n        this.options = options;\n        this.viewport = viewport;\n        this.vertical = vertical;\n        this.previous = this.options.direction || 'bottom';\n        this.tuiDropdownSided = '';\n        this.tuiDropdownSidedOffset = 4;\n        this.type = 'dropdown';\n    }\n    getPosition(rect) {\n        var _a, _b;\n        if (this.tuiDropdownSided === false) {\n            return this.vertical.getPosition(rect);\n        }\n        const { height, width } = rect;\n        const hostRect = (_b = (_a = this.vertical.accessor) === null || _a === void 0 ? void 0 : _a.getClientRect()) !== null && _b !== void 0 ? _b : EMPTY_CLIENT_RECT;\n        const viewport = this.viewport.getClientRect();\n        const { direction, minHeight, offset } = this.options;\n        const align = this.options.align === 'center' ? 'left' : this.options.align;\n        const available = {\n            top: hostRect.bottom - viewport.top,\n            left: hostRect.left - offset - viewport.left,\n            right: viewport.right - hostRect.right - offset,\n            bottom: viewport.bottom - hostRect.top,\n        };\n        const position = {\n            top: hostRect.bottom - height + this.tuiDropdownSidedOffset + 1,\n            left: hostRect.left - width - offset,\n            right: hostRect.right + offset,\n            bottom: hostRect.top - this.tuiDropdownSidedOffset - 1, // 1 for border\n        };\n        const better = available.top > available.bottom ? 'top' : 'bottom';\n        const maxLeft = available.left > available.right ? position.left : position.right;\n        const left = available[align] > width ? position[align] : maxLeft;\n        if ((available[this.previous] > minHeight && direction) ||\n            this.previous === better) {\n            return [position[this.previous], left];\n        }\n        this.previous = better;\n        return [position[better], left];\n    }\n}\nTuiDropdownPositionSidedDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownPositionSidedDirective, deps: [{ token: TUI_DROPDOWN_OPTIONS }, { token: TUI_VIEWPORT }, { token: TuiDropdownPositionDirective }], target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownPositionSidedDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownPositionSidedDirective, selector: \"[tuiDropdownSided]\", inputs: { tuiDropdownSided: \"tuiDropdownSided\", tuiDropdownSidedOffset: \"tuiDropdownSidedOffset\" }, providers: [\n        TuiDropdownPositionDirective,\n        tuiAsPositionAccessor(TuiDropdownPositionSidedDirective),\n    ], usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownPositionSidedDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdownSided]',\n                    providers: [\n                        TuiDropdownPositionDirective,\n                        tuiAsPositionAccessor(TuiDropdownPositionSidedDirective),\n                    ],\n                }]\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\n                    type: Inject,\n                    args: [TUI_DROPDOWN_OPTIONS]\n                }] }, { type: i1$2.TuiRectAccessor, decorators: [{\n                    type: Inject,\n                    args: [TUI_VIEWPORT]\n                }] }, { type: TuiDropdownPositionDirective, decorators: [{\n                    type: Inject,\n                    args: [TuiDropdownPositionDirective]\n                }] }]; }, propDecorators: { tuiDropdownSided: [{\n                type: Input\n            }], tuiDropdownSidedOffset: [{\n                type: Input\n            }] } });\n\nclass TuiDropdownSelectionDirective extends TuiDriver {\n    constructor(range, doc, selection$, el, vcr, dropdown) {\n        super(subscriber => this.stream$.subscribe(subscriber));\n        this.range = range;\n        this.doc = doc;\n        this.selection$ = selection$;\n        this.el = el;\n        this.vcr = vcr;\n        this.dropdown = dropdown;\n        this.handler$ = new BehaviorSubject(ALWAYS_TRUE_HANDLER);\n        this.stream$ = combineLatest([\n            this.handler$,\n            this.selection$.pipe(map(() => this.getRange()), distinctUntilChanged()),\n        ]).pipe(map(([handler, range]) => {\n            const contained = this.el.nativeElement.contains(range.commonAncestorContainer);\n            this.range =\n                contained && tuiIsTextNode(range.commonAncestorContainer)\n                    ? range\n                    : this.range;\n            return (contained && handler(this.range)) || this.inDropdown(range);\n        }));\n        this.position = 'selection';\n        this.type = 'dropdown';\n    }\n    set tuiDropdownSelection(visible) {\n        if (!tuiIsString(visible)) {\n            this.handler$.next(visible);\n        }\n    }\n    getClientRect() {\n        switch (this.position) {\n            case 'tag': {\n                const { commonAncestorContainer } = this.range;\n                const element = tuiIsElement(commonAncestorContainer)\n                    ? commonAncestorContainer\n                    : commonAncestorContainer.parentNode;\n                return element && tuiIsElement(element)\n                    ? element.getBoundingClientRect()\n                    : EMPTY_CLIENT_RECT;\n            }\n            case 'word':\n                return tuiGetWordRange(this.range).getBoundingClientRect();\n            default:\n                return this.range.getBoundingClientRect();\n        }\n    }\n    ngOnDestroy() {\n        if (this.ghost) {\n            this.vcr.element.nativeElement.removeChild(this.ghost);\n        }\n    }\n    getRange() {\n        const active = tuiGetNativeFocused(this.doc);\n        const selection = this.doc.getSelection();\n        if (active && tuiIsTextfield(active) && this.el.nativeElement.contains(active)) {\n            return this.veryVerySadInputFix(active);\n        }\n        return (selection === null || selection === void 0 ? void 0 : selection.rangeCount) ? selection.getRangeAt(0) : this.range;\n    }\n    /**\n     * Check if Node is inside dropdown\n     */\n    boxContains(node) {\n        var _a;\n        return !!((_a = this.dropdown.dropdownBoxRef) === null || _a === void 0 ? void 0 : _a.location.nativeElement.contains(node));\n    }\n    /**\n     * Check if given range is at least partially inside dropdown\n     */\n    inDropdown(range) {\n        const { startContainer, endContainer } = range;\n        const { nativeElement } = this.el;\n        const inDropdown = this.boxContains(range.commonAncestorContainer);\n        const hostToDropdown = this.boxContains(endContainer) && nativeElement.contains(startContainer);\n        const dropdownToHost = this.boxContains(startContainer) && nativeElement.contains(endContainer);\n        return inDropdown || hostToDropdown || dropdownToHost;\n    }\n    veryVerySadInputFix(element) {\n        const { ghost = this.initGhost(element) } = this;\n        const { top, left, width, height } = element.getBoundingClientRect();\n        const { selectionStart, selectionEnd, value } = element;\n        const range = this.doc.createRange();\n        const hostRect = this.el.nativeElement.getBoundingClientRect();\n        ghost.style.top = tuiPx(top - hostRect.top);\n        ghost.style.left = tuiPx(left - hostRect.left);\n        ghost.style.width = tuiPx(width);\n        ghost.style.height = tuiPx(height);\n        ghost.textContent = CHAR_ZERO_WIDTH_SPACE + value + CHAR_NO_BREAK_SPACE;\n        range.setStart(ghost.firstChild, selectionStart || 0);\n        range.setEnd(ghost.firstChild, selectionEnd || 0);\n        return range;\n    }\n    /**\n     * Create an invisible DIV styled exactly like input/textarea element inside directive\n     */\n    initGhost(element) {\n        const ghost = this.doc.createElement('div');\n        const { font, letterSpacing, textTransform, padding } = getComputedStyle(element);\n        ghost.style.position = 'absolute';\n        ghost.style.pointerEvents = 'none';\n        ghost.style.opacity = '0';\n        ghost.style.whiteSpace = 'pre-wrap';\n        ghost.style.font = font;\n        ghost.style.letterSpacing = letterSpacing;\n        ghost.style.textTransform = textTransform;\n        ghost.style.padding = padding;\n        this.vcr.element.nativeElement.appendChild(ghost);\n        this.ghost = ghost;\n        return ghost;\n    }\n}\nTuiDropdownSelectionDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownSelectionDirective, deps: [{ token: TUI_RANGE }, { token: DOCUMENT }, { token: TUI_SELECTION_STREAM }, { token: ElementRef }, { token: ViewContainerRef }, { token: TuiDropdownDirective }], target: i0.ɵɵFactoryTarget.Directive });\nTuiDropdownSelectionDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiDropdownSelectionDirective, selector: \"[tuiDropdown][tuiDropdownSelection]\", inputs: { position: [\"tuiDropdownSelectionPosition\", \"position\"], tuiDropdownSelection: \"tuiDropdownSelection\" }, providers: [\n        tuiAsDriver(TuiDropdownSelectionDirective),\n        tuiAsRectAccessor(TuiDropdownSelectionDirective),\n    ], usesInheritance: true, ngImport: i0 });\n__decorate([\n    tuiDefaultProp()\n], TuiDropdownSelectionDirective.prototype, \"position\", void 0);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownSelectionDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[tuiDropdown][tuiDropdownSelection]',\n                    providers: [\n                        tuiAsDriver(TuiDropdownSelectionDirective),\n                        tuiAsRectAccessor(TuiDropdownSelectionDirective),\n                    ],\n                }]\n        }], ctorParameters: function () { return [{ type: Range, decorators: [{\n                    type: Inject,\n                    args: [TUI_RANGE]\n                }] }, { type: Document, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: i1.Observable, decorators: [{\n                    type: Inject,\n                    args: [TUI_SELECTION_STREAM]\n                }] }, { type: i0.ElementRef, decorators: [{\n                    type: Inject,\n                    args: [ElementRef]\n                }] }, { type: i0.ViewContainerRef, decorators: [{\n                    type: Inject,\n                    args: [ViewContainerRef]\n                }] }, { type: TuiDropdownDirective, decorators: [{\n                    type: Inject,\n                    args: [TuiDropdownDirective]\n                }] }]; }, propDecorators: { position: [{\n                type: Input,\n                args: ['tuiDropdownSelectionPosition']\n            }], tuiDropdownSelection: [{\n                type: Input\n            }] } });\n\nclass TuiDropdownModule {\n}\nTuiDropdownModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nTuiDropdownModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownModule, declarations: [TuiDropdownDirective,\n        TuiDropdownComponent,\n        TuiDropdownOptionsDirective,\n        TuiDropdownHostDirective,\n        TuiDropdownDriverDirective,\n        TuiDropdownManualDirective,\n        TuiDropdownHoverDirective,\n        TuiDropdownContextDirective,\n        TuiDropdownPositionDirective,\n        TuiDropdownPositionSidedDirective,\n        TuiDropdownSelectionDirective], imports: [PolymorpheusModule,\n        TuiActiveZoneModule,\n        TuiOverscrollModule,\n        TuiScrollbarModule,\n        TuiModeModule,\n        TuiHoveredModule], exports: [TuiDropdownDirective,\n        TuiDropdownComponent,\n        TuiDropdownOptionsDirective,\n        TuiDropdownHostDirective,\n        TuiDropdownDriverDirective,\n        TuiDropdownManualDirective,\n        TuiDropdownHoverDirective,\n        TuiDropdownContextDirective,\n        TuiDropdownPositionDirective,\n        TuiDropdownPositionSidedDirective,\n        TuiDropdownSelectionDirective] });\nTuiDropdownModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownModule, imports: [[\n            PolymorpheusModule,\n            TuiActiveZoneModule,\n            TuiOverscrollModule,\n            TuiScrollbarModule,\n            TuiModeModule,\n            TuiHoveredModule,\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiDropdownModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        PolymorpheusModule,\n                        TuiActiveZoneModule,\n                        TuiOverscrollModule,\n                        TuiScrollbarModule,\n                        TuiModeModule,\n                        TuiHoveredModule,\n                    ],\n                    declarations: [\n                        TuiDropdownDirective,\n                        TuiDropdownComponent,\n                        TuiDropdownOptionsDirective,\n                        TuiDropdownHostDirective,\n                        TuiDropdownDriverDirective,\n                        TuiDropdownManualDirective,\n                        TuiDropdownHoverDirective,\n                        TuiDropdownContextDirective,\n                        TuiDropdownPositionDirective,\n                        TuiDropdownPositionSidedDirective,\n                        TuiDropdownSelectionDirective,\n                    ],\n                    exports: [\n                        TuiDropdownDirective,\n                        TuiDropdownComponent,\n                        TuiDropdownOptionsDirective,\n                        TuiDropdownHostDirective,\n                        TuiDropdownDriverDirective,\n                        TuiDropdownManualDirective,\n                        TuiDropdownHoverDirective,\n                        TuiDropdownContextDirective,\n                        TuiDropdownPositionDirective,\n                        TuiDropdownPositionSidedDirective,\n                        TuiDropdownSelectionDirective,\n                    ],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TUI_DROPDOWN_COMPONENT, TUI_DROPDOWN_DEFAULT_OPTIONS, TUI_DROPDOWN_HOVER_DEFAULT_OPTIONS, TUI_DROPDOWN_HOVER_OPTIONS, TUI_DROPDOWN_OPTIONS, TuiDropdownComponent, TuiDropdownContextDirective, TuiDropdownDirective, TuiDropdownDriverDirective, TuiDropdownHostDirective, TuiDropdownHoverDirective, TuiDropdownManualDirective, TuiDropdownModule, TuiDropdownOptionsDirective, TuiDropdownPositionDirective, TuiDropdownPositionSidedDirective, TuiDropdownSelectionDirective, tuiDropdownHoverOptionsProvider, tuiDropdownOptionsProvider };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}