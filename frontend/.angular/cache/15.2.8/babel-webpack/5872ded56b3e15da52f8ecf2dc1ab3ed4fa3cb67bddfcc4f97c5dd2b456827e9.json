{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { ChangeDetectorRef, Injectable, Inject, Self, ElementRef, Directive, Input, HostBinding, HostListener, NgModule } from '@angular/core';\nimport { IntersectionObserverService } from '@ng-web-apis/intersection-observer';\nimport { tuiWatch, TuiDestroyService } from '@taiga-ui/cdk';\nimport * as i1 from 'rxjs';\nimport { Observable, of, Subject } from 'rxjs';\nimport { switchMap, filter, map, catchError, take, takeUntil } from 'rxjs/operators';\nclass TuiLazyLoadingService extends Observable {\n  constructor(cdr, destroy$, intersections$) {\n    super(subscriber => this.src$.pipe(switchMap(src => intersections$.pipe(filter(([{\n      isIntersecting\n    }]) => isIntersecting), map(() => src), catchError(() => of(src)), tuiWatch(cdr), take(1))), takeUntil(destroy$)).subscribe(subscriber));\n    this.src$ = new Subject();\n  }\n  next(src) {\n    this.src$.next(src);\n  }\n}\nTuiLazyLoadingService.ɵfac = function TuiLazyLoadingService_Factory(t) {\n  return new (t || TuiLazyLoadingService)(i0.ɵɵinject(ChangeDetectorRef), i0.ɵɵinject(TuiDestroyService, 2), i0.ɵɵinject(IntersectionObserverService));\n};\nTuiLazyLoadingService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: TuiLazyLoadingService,\n  factory: TuiLazyLoadingService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiLazyLoadingService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef,\n      decorators: [{\n        type: Inject,\n        args: [ChangeDetectorRef]\n      }]\n    }, {\n      type: i1.Observable,\n      decorators: [{\n        type: Self\n      }, {\n        type: Inject,\n        args: [TuiDestroyService]\n      }]\n    }, {\n      type: i1.Observable,\n      decorators: [{\n        type: Inject,\n        args: [IntersectionObserverService]\n      }]\n    }];\n  }, null);\n})();\nclass TuiLazyLoadingDirective {\n  constructor(src$, el) {\n    this.src$ = src$;\n    this.el = el;\n    this.animation = 'tuiSkeletonVibe ease-in-out 1s infinite alternate';\n    this.background = 'var(--tui-clear-hover)';\n    this.src = null;\n    if (!this.supported) {\n      this.src$.subscribe(src => {\n        this.src = src;\n      });\n    }\n  }\n  set srcSetter(src) {\n    this.src = this.supported ? src : null;\n    this.src$.next(src);\n  }\n  get supported() {\n    return 'loading' in this.el.nativeElement;\n  }\n  onLoad() {\n    this.background = '';\n    this.animation = '';\n  }\n}\nTuiLazyLoadingDirective.ɵfac = function TuiLazyLoadingDirective_Factory(t) {\n  return new (t || TuiLazyLoadingDirective)(i0.ɵɵdirectiveInject(TuiLazyLoadingService), i0.ɵɵdirectiveInject(ElementRef));\n};\nTuiLazyLoadingDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TuiLazyLoadingDirective,\n  selectors: [[\"img\", \"loading\", \"lazy\"]],\n  hostVars: 5,\n  hostBindings: function TuiLazyLoadingDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"load\", function TuiLazyLoadingDirective_load_HostBindingHandler() {\n        return ctx.onLoad();\n      });\n    }\n    if (rf & 2) {\n      i0.ɵɵattribute(\"src\", ctx.src, i0.ɵɵsanitizeUrl);\n      i0.ɵɵstyleProp(\"animation\", ctx.animation)(\"background\", ctx.background);\n    }\n  },\n  inputs: {\n    srcSetter: [\"src\", \"srcSetter\"]\n  },\n  features: [i0.ɵɵProvidersFeature([TuiLazyLoadingService, IntersectionObserverService, TuiDestroyService])]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiLazyLoadingDirective, [{\n    type: Directive,\n    args: [{\n      selector: 'img[loading=\"lazy\"]',\n      providers: [TuiLazyLoadingService, IntersectionObserverService, TuiDestroyService]\n    }]\n  }], function () {\n    return [{\n      type: TuiLazyLoadingService,\n      decorators: [{\n        type: Inject,\n        args: [TuiLazyLoadingService]\n      }]\n    }, {\n      type: i0.ElementRef,\n      decorators: [{\n        type: Inject,\n        args: [ElementRef]\n      }]\n    }];\n  }, {\n    srcSetter: [{\n      type: Input,\n      args: ['src']\n    }],\n    animation: [{\n      type: HostBinding,\n      args: ['style.animation']\n    }],\n    background: [{\n      type: HostBinding,\n      args: ['style.background']\n    }],\n    src: [{\n      type: HostBinding,\n      args: ['attr.src']\n    }],\n    onLoad: [{\n      type: HostListener,\n      args: ['load']\n    }]\n  });\n})();\nclass TuiLazyLoadingModule {}\nTuiLazyLoadingModule.ɵfac = function TuiLazyLoadingModule_Factory(t) {\n  return new (t || TuiLazyLoadingModule)();\n};\nTuiLazyLoadingModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: TuiLazyLoadingModule\n});\nTuiLazyLoadingModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TuiLazyLoadingModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [TuiLazyLoadingDirective],\n      exports: [TuiLazyLoadingDirective]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiLazyLoadingDirective, TuiLazyLoadingModule, TuiLazyLoadingService };","map":{"version":3,"names":["i0","ChangeDetectorRef","Injectable","Inject","Self","ElementRef","Directive","Input","HostBinding","HostListener","NgModule","IntersectionObserverService","tuiWatch","TuiDestroyService","i1","Observable","of","Subject","switchMap","filter","map","catchError","take","takeUntil","TuiLazyLoadingService","constructor","cdr","destroy$","intersections$","subscriber","src$","pipe","src","isIntersecting","subscribe","next","ɵfac","ɵprov","type","decorators","args","TuiLazyLoadingDirective","el","animation","background","supported","srcSetter","nativeElement","onLoad","ɵdir","selector","providers","TuiLazyLoadingModule","ɵmod","ɵinj","declarations","exports"],"sources":["C:/Users/denis/PycharmProjects/example_project/frontend/node_modules/@taiga-ui/kit/fesm2015/taiga-ui-kit-directives-lazy-loading.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { ChangeDetectorRef, Injectable, Inject, Self, ElementRef, Directive, Input, HostBinding, HostListener, NgModule } from '@angular/core';\nimport { IntersectionObserverService } from '@ng-web-apis/intersection-observer';\nimport { tuiWatch, TuiDestroyService } from '@taiga-ui/cdk';\nimport * as i1 from 'rxjs';\nimport { Observable, of, Subject } from 'rxjs';\nimport { switchMap, filter, map, catchError, take, takeUntil } from 'rxjs/operators';\n\nclass TuiLazyLoadingService extends Observable {\n    constructor(cdr, destroy$, intersections$) {\n        super(subscriber => this.src$\n            .pipe(switchMap(src => intersections$.pipe(filter(([{ isIntersecting }]) => isIntersecting), map(() => src), catchError(() => of(src)), tuiWatch(cdr), take(1))), takeUntil(destroy$))\n            .subscribe(subscriber));\n        this.src$ = new Subject();\n    }\n    next(src) {\n        this.src$.next(src);\n    }\n}\nTuiLazyLoadingService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiLazyLoadingService, deps: [{ token: ChangeDetectorRef }, { token: TuiDestroyService, self: true }, { token: IntersectionObserverService }], target: i0.ɵɵFactoryTarget.Injectable });\nTuiLazyLoadingService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiLazyLoadingService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiLazyLoadingService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef, decorators: [{\n                    type: Inject,\n                    args: [ChangeDetectorRef]\n                }] }, { type: i1.Observable, decorators: [{\n                    type: Self\n                }, {\n                    type: Inject,\n                    args: [TuiDestroyService]\n                }] }, { type: i1.Observable, decorators: [{\n                    type: Inject,\n                    args: [IntersectionObserverService]\n                }] }]; } });\n\nclass TuiLazyLoadingDirective {\n    constructor(src$, el) {\n        this.src$ = src$;\n        this.el = el;\n        this.animation = 'tuiSkeletonVibe ease-in-out 1s infinite alternate';\n        this.background = 'var(--tui-clear-hover)';\n        this.src = null;\n        if (!this.supported) {\n            this.src$.subscribe(src => {\n                this.src = src;\n            });\n        }\n    }\n    set srcSetter(src) {\n        this.src = this.supported ? src : null;\n        this.src$.next(src);\n    }\n    get supported() {\n        return 'loading' in this.el.nativeElement;\n    }\n    onLoad() {\n        this.background = '';\n        this.animation = '';\n    }\n}\nTuiLazyLoadingDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiLazyLoadingDirective, deps: [{ token: TuiLazyLoadingService }, { token: ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nTuiLazyLoadingDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.17\", type: TuiLazyLoadingDirective, selector: \"img[loading=\\\"lazy\\\"]\", inputs: { srcSetter: [\"src\", \"srcSetter\"] }, host: { listeners: { \"load\": \"onLoad()\" }, properties: { \"style.animation\": \"this.animation\", \"style.background\": \"this.background\", \"attr.src\": \"this.src\" } }, providers: [TuiLazyLoadingService, IntersectionObserverService, TuiDestroyService], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiLazyLoadingDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'img[loading=\"lazy\"]',\n                    providers: [TuiLazyLoadingService, IntersectionObserverService, TuiDestroyService],\n                }]\n        }], ctorParameters: function () { return [{ type: TuiLazyLoadingService, decorators: [{\n                    type: Inject,\n                    args: [TuiLazyLoadingService]\n                }] }, { type: i0.ElementRef, decorators: [{\n                    type: Inject,\n                    args: [ElementRef]\n                }] }]; }, propDecorators: { srcSetter: [{\n                type: Input,\n                args: ['src']\n            }], animation: [{\n                type: HostBinding,\n                args: ['style.animation']\n            }], background: [{\n                type: HostBinding,\n                args: ['style.background']\n            }], src: [{\n                type: HostBinding,\n                args: ['attr.src']\n            }], onLoad: [{\n                type: HostListener,\n                args: ['load']\n            }] } });\n\nclass TuiLazyLoadingModule {\n}\nTuiLazyLoadingModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiLazyLoadingModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nTuiLazyLoadingModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiLazyLoadingModule, declarations: [TuiLazyLoadingDirective], exports: [TuiLazyLoadingDirective] });\nTuiLazyLoadingModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiLazyLoadingModule });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: TuiLazyLoadingModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [TuiLazyLoadingDirective],\n                    exports: [TuiLazyLoadingDirective],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiLazyLoadingDirective, TuiLazyLoadingModule, TuiLazyLoadingService };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}